Galer√≠a Visual de Diagramas
===========================

Explora la arquitectura y flujos de PREXCOL a trav√©s de nuestra galer√≠a interactiva.

.. container:: sd-p-4 sd-bg-light sd-rounded sd-shadow-sm sd-mb-4 sd-text-center

    **Accesos R√°pidos**

    .. grid:: 2
        :gutter: 3

        .. grid-item::
            .. button-link:: http://localhost:5175
                :color: success
                :shadow:
                :expand:
                :icon: octicon:browser

                IR A LA APLICACI√ìN

        .. grid-item::
            .. button-link:: http://localhost:8000/admin
                :color: primary
                :shadow:
                :expand:
                :icon: octicon:server

                IR AL BACKEND

---

.. dropdown:: üìä Diagrama Actividad (7 diagramas)
    :open:
    :class-container: sd-mb-4

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TD
                        Start([Inicio]) --> Input[Usuario completa formulario]
                        Input --> ValidateClient{""""Validaci√≥n<br/>cliente OK?""""}
                        
                        %% Happy Path
                        ValidateClient -->|S√≠| Submit[Enviar a backend]
                        Submit --> CheckEmail{""""Email<br/>√∫nico?""""}
                        
                        CheckEmail -->|S√≠| CheckPass{""""Password<br/>v√°lido?""""}
                        
                        CheckPass -->|S√≠| CreateUser[Crear usuario en DB]
                        CreateUser --> SaveHistory[""""Guardar password<br/>en historial""""]
                        SaveHistory --> SendEmail[""""Enviar email<br/>de bienvenida""""]
                        SendEmail --> ShowSuccess[Mensaje: Registro exitoso]
                        ShowSuccess --> RedirectLogin[Redirect a Login]
                        RedirectLogin --> End([Fin])
                    
                        %% Error Loops (Dotted for cleaner visuals)
                        ValidateClient -->|No| ShowError1[""""Mostrar errores<br/>de validaci√≥n""""]
                        ShowError1 -.-> Input
                        
                        CheckEmail -->|No| EmailExists[Error: Email ya existe]
                        EmailExists -.-> Input
                        
                        CheckPass -->|No| PassWeak[Error: Password d√©bil]
                        PassWeak -.-> Input
                        
                        style Start fill:#90EE90
                        style End fill:#90EE90
                        style ShowError1 fill:#FFB6C1
                        style EmailExists fill:#FFB6C1
                        style PassWeak fill:#FFB6C1

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImZsb3djaGFydCBURFxuICAgIFN0YXJ0KFtJbmljaW9dKSAtLT4gSW5wdXRbVXN1YXJpbyBjb21wbGV0YSBmb3JtdWxhcmlvXVxuICAgIElucHV0IC0tPiBWYWxpZGF0ZUNsaWVudHtWYWxpZGFjaVx1MDBmM248YnIvPmNsaWVudGUgT0s/fVxuICAgIFxuICAgICUlIEhhcHB5IFBhdGhcbiAgICBWYWxpZGF0ZUNsaWVudCAtLT58U1x1MDBlZHwgU3VibWl0W0VudmlhciBhIGJhY2tlbmRdXG4gICAgU3VibWl0IC0tPiBDaGVja0VtYWlse0VtYWlsPGJyLz5cdTAwZmFuaWNvP31cbiAgICBcbiAgICBDaGVja0VtYWlsIC0tPnxTXHUwMGVkfCBDaGVja1Bhc3N7UGFzc3dvcmQ8YnIvPnZcdTAwZTFsaWRvP31cbiAgICBcbiAgICBDaGVja1Bhc3MgLS0+fFNcdTAwZWR8IENyZWF0ZVVzZXJbQ3JlYXIgdXN1YXJpbyBlbiBEQl1cbiAgICBDcmVhdGVVc2VyIC0tPiBTYXZlSGlzdG9yeVtHdWFyZGFyIHBhc3N3b3JkPGJyLz5lbiBoaXN0b3JpYWxdXG4gICAgU2F2ZUhpc3RvcnkgLS0+IFNlbmRFbWFpbFtFbnZpYXIgZW1haWw8YnIvPmRlIGJpZW52ZW5pZGFdXG4gICAgU2VuZEVtYWlsIC0tPiBTaG93U3VjY2Vzc1tNZW5zYWplOiBSZWdpc3RybyBleGl0b3NvXVxuICAgIFNob3dTdWNjZXNzIC0tPiBSZWRpcmVjdExvZ2luW1JlZGlyZWN0IGEgTG9naW5dXG4gICAgUmVkaXJlY3RMb2dpbiAtLT4gRW5kKFtGaW5dKVxuXG4gICAgJSUgRXJyb3IgTG9vcHMgKERvdHRlZCBmb3IgY2xlYW5lciB2aXN1YWxzKVxuICAgIFZhbGlkYXRlQ2xpZW50IC0tIE5vIC0tPiBTaG93RXJyb3IxW01vc3RyYXIgZXJyb3Jlczxici8+ZGUgdmFsaWRhY2lcdTAwZjNuXVxuICAgIFNob3dFcnJvcjEgLS4tPiBJbnB1dFxuICAgIFxuICAgIENoZWNrRW1haWwgLS0gTm8gLS0+IEVtYWlsRXhpc3RzW0Vycm9yOiBFbWFpbCB5YSBleGlzdGVdXG4gICAgRW1haWxFeGlzdHMgLS4tPiBJbnB1dFxuICAgIFxuICAgIENoZWNrUGFzcyAtLSBObyAtLT4gUGFzc1dlYWtbRXJyb3I6IFBhc3N3b3JkIGRcdTAwZTliaWxdXG4gICAgUGFzc1dlYWsgLS4tPiBJbnB1dFxuICAgIFxuICAgIHN0eWxlIFN0YXJ0IGZpbGw6IzkwRUU5MFxuICAgIHN0eWxlIEVuZCBmaWxsOiM5MEVFOTBcbiAgICBzdHlsZSBTaG93RXJyb3IxIGZpbGw6I0ZGQjZDMVxuICAgIHN0eWxlIEVtYWlsRXhpc3RzIGZpbGw6I0ZGQjZDMVxuICAgIHN0eWxlIFBhc3NXZWFrIGZpbGw6I0ZGQjZDMSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImZsb3djaGFydCBURFxuICAgIFN0YXJ0KFtJbmljaW9dKSAtLT4gSW5wdXRbVXN1YXJpbyBjb21wbGV0YSBmb3JtdWxhcmlvXVxuICAgIElucHV0IC0tPiBWYWxpZGF0ZUNsaWVudHtWYWxpZGFjaVx1MDBmM248YnIvPmNsaWVudGUgT0s/fVxuICAgIFxuICAgICUlIEhhcHB5IFBhdGhcbiAgICBWYWxpZGF0ZUNsaWVudCAtLT58U1x1MDBlZHwgU3VibWl0W0VudmlhciBhIGJhY2tlbmRdXG4gICAgU3VibWl0IC0tPiBDaGVja0VtYWlse0VtYWlsPGJyLz5cdTAwZmFuaWNvP31cbiAgICBcbiAgICBDaGVja0VtYWlsIC0tPnxTXHUwMGVkfCBDaGVja1Bhc3N7UGFzc3dvcmQ8YnIvPnZcdTAwZTFsaWRvP31cbiAgICBcbiAgICBDaGVja1Bhc3MgLS0+fFNcdTAwZWR8IENyZWF0ZVVzZXJbQ3JlYXIgdXN1YXJpbyBlbiBEQl1cbiAgICBDcmVhdGVVc2VyIC0tPiBTYXZlSGlzdG9yeVtHdWFyZGFyIHBhc3N3b3JkPGJyLz5lbiBoaXN0b3JpYWxdXG4gICAgU2F2ZUhpc3RvcnkgLS0+IFNlbmRFbWFpbFtFbnZpYXIgZW1haWw8YnIvPmRlIGJpZW52ZW5pZGFdXG4gICAgU2VuZEVtYWlsIC0tPiBTaG93U3VjY2Vzc1tNZW5zYWplOiBSZWdpc3RybyBleGl0b3NvXVxuICAgIFNob3dTdWNjZXNzIC0tPiBSZWRpcmVjdExvZ2luW1JlZGlyZWN0IGEgTG9naW5dXG4gICAgUmVkaXJlY3RMb2dpbiAtLT4gRW5kKFtGaW5dKVxuXG4gICAgJSUgRXJyb3IgTG9vcHMgKERvdHRlZCBmb3IgY2xlYW5lciB2aXN1YWxzKVxuICAgIFZhbGlkYXRlQ2xpZW50IC0tIE5vIC0tPiBTaG93RXJyb3IxW01vc3RyYXIgZXJyb3Jlczxici8+ZGUgdmFsaWRhY2lcdTAwZjNuXVxuICAgIFNob3dFcnJvcjEgLS4tPiBJbnB1dFxuICAgIFxuICAgIENoZWNrRW1haWwgLS0gTm8gLS0+IEVtYWlsRXhpc3RzW0Vycm9yOiBFbWFpbCB5YSBleGlzdGVdXG4gICAgRW1haWxFeGlzdHMgLS4tPiBJbnB1dFxuICAgIFxuICAgIENoZWNrUGFzcyAtLSBObyAtLT4gUGFzc1dlYWtbRXJyb3I6IFBhc3N3b3JkIGRcdTAwZTliaWxdXG4gICAgUGFzc1dlYWsgLS4tPiBJbnB1dFxuICAgIFxuICAgIHN0eWxlIFN0YXJ0IGZpbGw6IzkwRUU5MFxuICAgIHN0eWxlIEVuZCBmaWxsOiM5MEVFOTBcbiAgICBzdHlsZSBTaG93RXJyb3IxIGZpbGw6I0ZGQjZDMVxuICAgIHN0eWxlIEVtYWlsRXhpc3RzIGZpbGw6I0ZGQjZDMVxuICAgIHN0eWxlIFBhc3NXZWFrIGZpbGw6I0ZGQjZDMSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TD
                        Start([Inicio]) --> Input[Usuario completa formulario]
                        Input --> ValidateClient{""""Validaci√≥n<br/>cliente OK?""""}
                        
                        %% Happy Path
                        ValidateClient -->|S√≠| Submit[Enviar a backend]
                        Submit --> CheckEmail{""""Email<br/>√∫nico?""""}
                        
                        CheckEmail -->|S√≠| CheckPass{""""Password<br/>v√°lido?""""}
                        
                        CheckPass -->|S√≠| CreateUser[Crear usuario en DB]
                        CreateUser --> SaveHistory[""""Guardar password<br/>en historial""""]
                        SaveHistory --> SendEmail[""""Enviar email<br/>de bienvenida""""]
                        SendEmail --> ShowSuccess[Mensaje: Registro exitoso]
                        ShowSuccess --> RedirectLogin[Redirect a Login]
                        RedirectLogin --> End([Fin])
                    
                        %% Error Loops (Dotted for cleaner visuals)
                        ValidateClient -->|No| ShowError1[""""Mostrar errores<br/>de validaci√≥n""""]
                        ShowError1 -.-> Input
                        
                        CheckEmail -->|No| EmailExists[Error: Email ya existe]
                        EmailExists -.-> Input
                        
                        CheckPass -->|No| PassWeak[Error: Password d√©bil]
                        PassWeak -.-> Input
                        
                        style Start fill:#90EE90
                        style End fill:#90EE90
                        style ShowError1 fill:#FFB6C1
                        style EmailExists fill:#FFB6C1
                        style PassWeak fill:#FFB6C1

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TD
                        Start([Inicio: Cliente en cat√°logo]) --> Browse[Navegar productos]
                        Browse --> SelectProduct[Seleccionar producto]
                        SelectProduct --> ViewDetails[Ver detalles]
                        
                        ViewDetails --> CheckStock{""""Stock<br/>disponible?""""}
                        
                        CheckStock -->|S√≠| AddCart[Agregar al carrito]
                        AddCart --> MoreProducts{""""Agregar<br/>m√°s productos?""""}
                        
                        MoreProducts -->|S√≠| Browse
                        MoreProducts -->|No| ViewCart[Ver carrito]
                        
                        ViewCart --> AdjustQty{""""Ajustar<br/>cantidades?""""}
                        AdjustQty -->|S√≠| ModifyCart[Modificar carrito]
                        ModifyCart --> ViewCart
                        
                        AdjustQty -->|No| Checkout[Proceder al pago]
                        Checkout --> ValidateStock{""""Todo el stock<br/>disponible?""""}
                        
                        ValidateStock -->|S√≠| SelectPayment[""""Seleccionar m√©todo<br/>de pago""""]
                        SelectPayment --> PaymentMethod{M√©todo?}
                        
                        PaymentMethod -->|Tarjeta| EnterCard[""""Ingresar datos<br/>de tarjeta""""]
                        PaymentMethod -->|Transferencia| UploadProof[Subir comprobante]
                        PaymentMethod -->|PSE| LoginBank[Login banco]
                        
                        EnterCard --> ProcessPayment[Procesar pago]
                        UploadProof --> ProcessPayment
                        LoginBank --> ProcessPayment
                        
                        ProcessPayment --> PaymentResult{""""Pago<br/>exitoso?""""}
                        
                        PaymentResult -->|S√≠| CreateOrder[Crear pedido]
                        CreateOrder --> ReduceStock[Reducir stock]
                        ReduceStock --> SendNotifications[Enviar notificaciones]
                        SendNotifications --> ShowConfirmation[Mostrar confirmaci√≥n]
                        ShowConfirmation --> SendConfirmEmail[""""Enviar email<br/>de confirmaci√≥n""""]
                        SendConfirmEmail --> End2([Fin: Pedido creado])
                    
                        %% Feedback / Alternate Paths
                        CheckStock -->|No| OutOfStock[Mostrar "Agotado"]
                        OutOfStock -.-> Browse
                        
                        ValidateStock -->|No| StockError[Error: Stock insuficiente]
                        StockError -.-> ViewCart
                        
                        PaymentResult -->|No| PaymentFailed[Pago rechazado]
                        PaymentFailed --> RetryPayment{Reintentar?}
                        RetryPayment -->|S√≠| SelectPayment
                        RetryPayment -->|No| CancelOrder[Cancelar orden]
                        CancelOrder --> End1([Fin: Sin pedido])
                        
                        style Start fill:#90EE90
                        style End1 fill:#FFB6C1
                        style End2 fill:#90EE90
                        style OutOfStock fill:#FFA500
                        style StockError fill:#FFB6C1
                        style PaymentFailed fill:#FFB6C1

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImZsb3djaGFydCBURFxuICAgIFN0YXJ0KFtJbmljaW86IENsaWVudGUgZW4gY2F0XHUwMGUxbG9nb10pIC0tPiBCcm93c2VbTmF2ZWdhciBwcm9kdWN0b3NdXG4gICAgQnJvd3NlIC0tPiBTZWxlY3RQcm9kdWN0W1NlbGVjY2lvbmFyIHByb2R1Y3RvXVxuICAgIFNlbGVjdFByb2R1Y3QgLS0+IFZpZXdEZXRhaWxzW1ZlciBkZXRhbGxlc11cbiAgICBcbiAgICBWaWV3RGV0YWlscyAtLT4gQ2hlY2tTdG9ja3tTdG9jazxici8+ZGlzcG9uaWJsZT99XG4gICAgXG4gICAgQ2hlY2tTdG9jayAtLT58U1x1MDBlZHwgQWRkQ2FydFtBZ3JlZ2FyIGFsIGNhcnJpdG9dXG4gICAgQWRkQ2FydCAtLT4gTW9yZVByb2R1Y3Rze0FncmVnYXI8YnIvPm1cdTAwZTFzIHByb2R1Y3Rvcz99XG4gICAgXG4gICAgTW9yZVByb2R1Y3RzIC0tPnxTXHUwMGVkfCBCcm93c2VcbiAgICBNb3JlUHJvZHVjdHMgLS0+fE5vfCBWaWV3Q2FydFtWZXIgY2Fycml0b11cbiAgICBcbiAgICBWaWV3Q2FydCAtLT4gQWRqdXN0UXR5e0FqdXN0YXI8YnIvPmNhbnRpZGFkZXM/fVxuICAgIEFkanVzdFF0eSAtLT58U1x1MDBlZHwgTW9kaWZ5Q2FydFtNb2RpZmljYXIgY2Fycml0b11cbiAgICBNb2RpZnlDYXJ0IC0tPiBWaWV3Q2FydFxuICAgIFxuICAgIEFkanVzdFF0eSAtLT58Tm98IENoZWNrb3V0W1Byb2NlZGVyIGFsIHBhZ29dXG4gICAgQ2hlY2tvdXQgLS0+IFZhbGlkYXRlU3RvY2t7VG9kbyBlbCBzdG9jazxici8+ZGlzcG9uaWJsZT99XG4gICAgXG4gICAgVmFsaWRhdGVTdG9jayAtLT58U1x1MDBlZHwgU2VsZWN0UGF5bWVudFtTZWxlY2Npb25hciBtXHUwMGU5dG9kbzxici8+ZGUgcGFnb11cbiAgICBTZWxlY3RQYXltZW50IC0tPiBQYXltZW50TWV0aG9ke01cdTAwZTl0b2RvP31cbiAgICBcbiAgICBQYXltZW50TWV0aG9kIC0tPnxUYXJqZXRhfCBFbnRlckNhcmRbSW5ncmVzYXIgZGF0b3M8YnIvPmRlIHRhcmpldGFdXG4gICAgUGF5bWVudE1ldGhvZCAtLT58VHJhbnNmZXJlbmNpYXwgVXBsb2FkUHJvb2ZbU3ViaXIgY29tcHJvYmFudGVdXG4gICAgUGF5bWVudE1ldGhvZCAtLT58UFNFfCBMb2dpbkJhbmtbTG9naW4gYmFuY29dXG4gICAgXG4gICAgRW50ZXJDYXJkIC0tPiBQcm9jZXNzUGF5bWVudFtQcm9jZXNhciBwYWdvXVxuICAgIFVwbG9hZFByb29mIC0tPiBQcm9jZXNzUGF5bWVudFxuICAgIExvZ2luQmFuayAtLT4gUHJvY2Vzc1BheW1lbnRcbiAgICBcbiAgICBQcm9jZXNzUGF5bWVudCAtLT4gUGF5bWVudFJlc3VsdHtQYWdvPGJyLz5leGl0b3NvP31cbiAgICBcbiAgICBQYXltZW50UmVzdWx0IC0tPnxTXHUwMGVkfCBDcmVhdGVPcmRlcltDcmVhciBwZWRpZG9dXG4gICAgQ3JlYXRlT3JkZXIgLS0+IFJlZHVjZVN0b2NrW1JlZHVjaXIgc3RvY2tdXG4gICAgUmVkdWNlU3RvY2sgLS0+IFNlbmROb3RpZmljYXRpb25zW0VudmlhciBub3RpZmljYWNpb25lc11cbiAgICBTZW5kTm90aWZpY2F0aW9ucyAtLT4gU2hvd0NvbmZpcm1hdGlvbltNb3N0cmFyIGNvbmZpcm1hY2lcdTAwZjNuXVxuICAgIFNob3dDb25maXJtYXRpb24gLS0+IFNlbmRDb25maXJtRW1haWxbRW52aWFyIGVtYWlsPGJyLz5kZSBjb25maXJtYWNpXHUwMGYzbl1cbiAgICBTZW5kQ29uZmlybUVtYWlsIC0tPiBFbmQyKFtGaW46IFBlZGlkbyBjcmVhZG9dKVxuXG4gICAgJSUgRmVlZGJhY2sgLyBBbHRlcm5hdGUgUGF0aHNcbiAgICBDaGVja1N0b2NrIC0tIE5vIC0tPiBPdXRPZlN0b2NrW01vc3RyYXIgXCJBZ290YWRvXCJdXG4gICAgT3V0T2ZTdG9jayAtLi0+IEJyb3dzZVxuICAgIFxuICAgIFZhbGlkYXRlU3RvY2sgLS0gTm8gLS0+IFN0b2NrRXJyb3JbRXJyb3I6IFN0b2NrIGluc3VmaWNpZW50ZV1cbiAgICBTdG9ja0Vycm9yIC0uLT4gVmlld0NhcnRcbiAgICBcbiAgICBQYXltZW50UmVzdWx0IC0tIE5vIC0tPiBQYXltZW50RmFpbGVkW1BhZ28gcmVjaGF6YWRvXVxuICAgIFBheW1lbnRGYWlsZWQgLS0+IFJldHJ5UGF5bWVudHtSZWludGVudGFyP31cbiAgICBSZXRyeVBheW1lbnQgLS0gU1x1MDBlZCAtLT4gU2VsZWN0UGF5bWVudFxuICAgIFJldHJ5UGF5bWVudCAtLSBObyAtLT4gQ2FuY2VsT3JkZXJbQ2FuY2VsYXIgb3JkZW5dXG4gICAgQ2FuY2VsT3JkZXIgLS0+IEVuZDEoW0ZpbjogU2luIHBlZGlkb10pXG4gICAgXG4gICAgc3R5bGUgU3RhcnQgZmlsbDojOTBFRTkwXG4gICAgc3R5bGUgRW5kMSBmaWxsOiNGRkI2QzFcbiAgICBzdHlsZSBFbmQyIGZpbGw6IzkwRUU5MFxuICAgIHN0eWxlIE91dE9mU3RvY2sgZmlsbDojRkZBNTAwXG4gICAgc3R5bGUgU3RvY2tFcnJvciBmaWxsOiNGRkI2QzFcbiAgICBzdHlsZSBQYXltZW50RmFpbGVkIGZpbGw6I0ZGQjZDMSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImZsb3djaGFydCBURFxuICAgIFN0YXJ0KFtJbmljaW86IENsaWVudGUgZW4gY2F0XHUwMGUxbG9nb10pIC0tPiBCcm93c2VbTmF2ZWdhciBwcm9kdWN0b3NdXG4gICAgQnJvd3NlIC0tPiBTZWxlY3RQcm9kdWN0W1NlbGVjY2lvbmFyIHByb2R1Y3RvXVxuICAgIFNlbGVjdFByb2R1Y3QgLS0+IFZpZXdEZXRhaWxzW1ZlciBkZXRhbGxlc11cbiAgICBcbiAgICBWaWV3RGV0YWlscyAtLT4gQ2hlY2tTdG9ja3tTdG9jazxici8+ZGlzcG9uaWJsZT99XG4gICAgXG4gICAgQ2hlY2tTdG9jayAtLT58U1x1MDBlZHwgQWRkQ2FydFtBZ3JlZ2FyIGFsIGNhcnJpdG9dXG4gICAgQWRkQ2FydCAtLT4gTW9yZVByb2R1Y3Rze0FncmVnYXI8YnIvPm1cdTAwZTFzIHByb2R1Y3Rvcz99XG4gICAgXG4gICAgTW9yZVByb2R1Y3RzIC0tPnxTXHUwMGVkfCBCcm93c2VcbiAgICBNb3JlUHJvZHVjdHMgLS0+fE5vfCBWaWV3Q2FydFtWZXIgY2Fycml0b11cbiAgICBcbiAgICBWaWV3Q2FydCAtLT4gQWRqdXN0UXR5e0FqdXN0YXI8YnIvPmNhbnRpZGFkZXM/fVxuICAgIEFkanVzdFF0eSAtLT58U1x1MDBlZHwgTW9kaWZ5Q2FydFtNb2RpZmljYXIgY2Fycml0b11cbiAgICBNb2RpZnlDYXJ0IC0tPiBWaWV3Q2FydFxuICAgIFxuICAgIEFkanVzdFF0eSAtLT58Tm98IENoZWNrb3V0W1Byb2NlZGVyIGFsIHBhZ29dXG4gICAgQ2hlY2tvdXQgLS0+IFZhbGlkYXRlU3RvY2t7VG9kbyBlbCBzdG9jazxici8+ZGlzcG9uaWJsZT99XG4gICAgXG4gICAgVmFsaWRhdGVTdG9jayAtLT58U1x1MDBlZHwgU2VsZWN0UGF5bWVudFtTZWxlY2Npb25hciBtXHUwMGU5dG9kbzxici8+ZGUgcGFnb11cbiAgICBTZWxlY3RQYXltZW50IC0tPiBQYXltZW50TWV0aG9ke01cdTAwZTl0b2RvP31cbiAgICBcbiAgICBQYXltZW50TWV0aG9kIC0tPnxUYXJqZXRhfCBFbnRlckNhcmRbSW5ncmVzYXIgZGF0b3M8YnIvPmRlIHRhcmpldGFdXG4gICAgUGF5bWVudE1ldGhvZCAtLT58VHJhbnNmZXJlbmNpYXwgVXBsb2FkUHJvb2ZbU3ViaXIgY29tcHJvYmFudGVdXG4gICAgUGF5bWVudE1ldGhvZCAtLT58UFNFfCBMb2dpbkJhbmtbTG9naW4gYmFuY29dXG4gICAgXG4gICAgRW50ZXJDYXJkIC0tPiBQcm9jZXNzUGF5bWVudFtQcm9jZXNhciBwYWdvXVxuICAgIFVwbG9hZFByb29mIC0tPiBQcm9jZXNzUGF5bWVudFxuICAgIExvZ2luQmFuayAtLT4gUHJvY2Vzc1BheW1lbnRcbiAgICBcbiAgICBQcm9jZXNzUGF5bWVudCAtLT4gUGF5bWVudFJlc3VsdHtQYWdvPGJyLz5leGl0b3NvP31cbiAgICBcbiAgICBQYXltZW50UmVzdWx0IC0tPnxTXHUwMGVkfCBDcmVhdGVPcmRlcltDcmVhciBwZWRpZG9dXG4gICAgQ3JlYXRlT3JkZXIgLS0+IFJlZHVjZVN0b2NrW1JlZHVjaXIgc3RvY2tdXG4gICAgUmVkdWNlU3RvY2sgLS0+IFNlbmROb3RpZmljYXRpb25zW0VudmlhciBub3RpZmljYWNpb25lc11cbiAgICBTZW5kTm90aWZpY2F0aW9ucyAtLT4gU2hvd0NvbmZpcm1hdGlvbltNb3N0cmFyIGNvbmZpcm1hY2lcdTAwZjNuXVxuICAgIFNob3dDb25maXJtYXRpb24gLS0+IFNlbmRDb25maXJtRW1haWxbRW52aWFyIGVtYWlsPGJyLz5kZSBjb25maXJtYWNpXHUwMGYzbl1cbiAgICBTZW5kQ29uZmlybUVtYWlsIC0tPiBFbmQyKFtGaW46IFBlZGlkbyBjcmVhZG9dKVxuXG4gICAgJSUgRmVlZGJhY2sgLyBBbHRlcm5hdGUgUGF0aHNcbiAgICBDaGVja1N0b2NrIC0tIE5vIC0tPiBPdXRPZlN0b2NrW01vc3RyYXIgXCJBZ290YWRvXCJdXG4gICAgT3V0T2ZTdG9jayAtLi0+IEJyb3dzZVxuICAgIFxuICAgIFZhbGlkYXRlU3RvY2sgLS0gTm8gLS0+IFN0b2NrRXJyb3JbRXJyb3I6IFN0b2NrIGluc3VmaWNpZW50ZV1cbiAgICBTdG9ja0Vycm9yIC0uLT4gVmlld0NhcnRcbiAgICBcbiAgICBQYXltZW50UmVzdWx0IC0tIE5vIC0tPiBQYXltZW50RmFpbGVkW1BhZ28gcmVjaGF6YWRvXVxuICAgIFBheW1lbnRGYWlsZWQgLS0+IFJldHJ5UGF5bWVudHtSZWludGVudGFyP31cbiAgICBSZXRyeVBheW1lbnQgLS0gU1x1MDBlZCAtLT4gU2VsZWN0UGF5bWVudFxuICAgIFJldHJ5UGF5bWVudCAtLSBObyAtLT4gQ2FuY2VsT3JkZXJbQ2FuY2VsYXIgb3JkZW5dXG4gICAgQ2FuY2VsT3JkZXIgLS0+IEVuZDEoW0ZpbjogU2luIHBlZGlkb10pXG4gICAgXG4gICAgc3R5bGUgU3RhcnQgZmlsbDojOTBFRTkwXG4gICAgc3R5bGUgRW5kMSBmaWxsOiNGRkI2QzFcbiAgICBzdHlsZSBFbmQyIGZpbGw6IzkwRUU5MFxuICAgIHN0eWxlIE91dE9mU3RvY2sgZmlsbDojRkZBNTAwXG4gICAgc3R5bGUgU3RvY2tFcnJvciBmaWxsOiNGRkI2QzFcbiAgICBzdHlsZSBQYXltZW50RmFpbGVkIGZpbGw6I0ZGQjZDMSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TD
                        Start([Inicio: Cliente en cat√°logo]) --> Browse[Navegar productos]
                        Browse --> SelectProduct[Seleccionar producto]
                        SelectProduct --> ViewDetails[Ver detalles]
                        
                        ViewDetails --> CheckStock{""""Stock<br/>disponible?""""}
                        
                        CheckStock -->|S√≠| AddCart[Agregar al carrito]
                        AddCart --> MoreProducts{""""Agregar<br/>m√°s productos?""""}
                        
                        MoreProducts -->|S√≠| Browse
                        MoreProducts -->|No| ViewCart[Ver carrito]
                        
                        ViewCart --> AdjustQty{""""Ajustar<br/>cantidades?""""}
                        AdjustQty -->|S√≠| ModifyCart[Modificar carrito]
                        ModifyCart --> ViewCart
                        
                        AdjustQty -->|No| Checkout[Proceder al pago]
                        Checkout --> ValidateStock{""""Todo el stock<br/>disponible?""""}
                        
                        ValidateStock -->|S√≠| SelectPayment[""""Seleccionar m√©todo<br/>de pago""""]
                        SelectPayment --> PaymentMethod{M√©todo?}
                        
                        PaymentMethod -->|Tarjeta| EnterCard[""""Ingresar datos<br/>de tarjeta""""]
                        PaymentMethod -->|Transferencia| UploadProof[Subir comprobante]
                        PaymentMethod -->|PSE| LoginBank[Login banco]
                        
                        EnterCard --> ProcessPayment[Procesar pago]
                        UploadProof --> ProcessPayment
                        LoginBank --> ProcessPayment
                        
                        ProcessPayment --> PaymentResult{""""Pago<br/>exitoso?""""}
                        
                        PaymentResult -->|S√≠| CreateOrder[Crear pedido]
                        CreateOrder --> ReduceStock[Reducir stock]
                        ReduceStock --> SendNotifications[Enviar notificaciones]
                        SendNotifications --> ShowConfirmation[Mostrar confirmaci√≥n]
                        ShowConfirmation --> SendConfirmEmail[""""Enviar email<br/>de confirmaci√≥n""""]
                        SendConfirmEmail --> End2([Fin: Pedido creado])
                    
                        %% Feedback / Alternate Paths
                        CheckStock -->|No| OutOfStock[Mostrar "Agotado"]
                        OutOfStock -.-> Browse
                        
                        ValidateStock -->|No| StockError[Error: Stock insuficiente]
                        StockError -.-> ViewCart
                        
                        PaymentResult -->|No| PaymentFailed[Pago rechazado]
                        PaymentFailed --> RetryPayment{Reintentar?}
                        RetryPayment -->|S√≠| SelectPayment
                        RetryPayment -->|No| CancelOrder[Cancelar orden]
                        CancelOrder --> End1([Fin: Sin pedido])
                        
                        style Start fill:#90EE90
                        style End1 fill:#FFB6C1
                        style End2 fill:#90EE90
                        style OutOfStock fill:#FFA500
                        style StockError fill:#FFB6C1
                        style PaymentFailed fill:#FFB6C1

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TD
                        Start([Inicio]) --> Login[Log√≠stica inicia sesi√≥n]
                        Login --> Dashboard[Ver dashboard]
                        Dashboard --> ViewPending[Ver pedidos pendientes]
                        
                        ViewPending --> SelectOrder[Seleccionar pedido]
                        SelectOrder --> ViewDetails[Ver detalles]
                        ViewDetails --> CheckInventory{""""Productos<br/>disponibles?""""}
                        
                        CheckInventory -->|S√≠| StartPrep[Iniciar preparaci√≥n]
                        StartPrep --> ChangeStatus1[""""Cambiar estado:<br/>PREPARANDO""""]
                        ChangeStatus1 --> NotifyClient1[Notificar cliente]
                        
                        NotifyClient1 --> PickProducts[Recolectar productos]
                        PickProducts --> VerifyItems[Verificar items]
                        VerifyItems --> PackOrder[Empacar pedido]
                        PackOrder --> PrintLabel[Imprimir etiqueta]
                        
                        PrintLabel --> ReadyShip{""""Listo para<br/>enviar?""""}
                        
                        ReadyShip -->|S√≠| ChangeStatus2[""""Cambiar estado:<br/>EN_TRANSITO""""]
                        ChangeStatus2 --> NotifyClient2[Notificar cliente]
                        NotifyClient2 --> AssignCourier[Asignar transportista]
                        
                        AssignCourier --> InTransit[Pedido en tr√°nsito]
                        InTransit --> WaitDelivery[""""Esperar confirmaci√≥n<br/>de entrega""""]
                        
                        WaitDelivery --> DeliveryConfirm{""""Entrega<br/>confirmada?""""}
                        
                        DeliveryConfirm -->|S√≠| ChangeStatus3[""""Cambiar estado:<br/>ENTREGADO""""]
                        ChangeStatus3 --> GenerateSale[""""Generar registro<br/>de venta""""]
                        GenerateSale --> NotifyClient3[Notificar cliente]
                        NotifyClient3 --> UpdateMetrics[Actualizar m√©tricas]
                        UpdateMetrics --> End2([Fin: Completado])
                    
                        %% Exceptions
                        CheckInventory -->|No| ReportIssue[Reportar problema]
                        ReportIssue --> NotifyAdmin[Notificar admin]
                        NotifyAdmin --> WaitResolution[Esperar resoluci√≥n]
                        WaitResolution --> End1([Fin: Pendiente])
                    
                        ReadyShip -->|No| CheckIssue{""""Hay<br/>problema?""""}
                        CheckIssue -->|S√≠| ReportIssue
                        CheckIssue -->|No| PickProducts
                        
                        DeliveryConfirm -->|No| DeliveryIssue{""""Hay<br/>problema?""""}
                        DeliveryIssue -->|S√≠| ContactClient[Contactar cliente]
                        ContactClient --> Reschedule[Reprogramar entrega]
                        Reschedule -.-> InTransit
                        DeliveryIssue -->|No| WaitDelivery
                        
                        style Start fill:#90EE90
                        style End1 fill:#FFA500
                        style End2 fill:#90EE90
                        style ReportIssue fill:#FFB6C1
                        style ContactClient fill:#FFA500

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImZsb3djaGFydCBURFxuICAgIFN0YXJ0KFtJbmljaW9dKSAtLT4gTG9naW5bTG9nXHUwMGVkc3RpY2EgaW5pY2lhIHNlc2lcdTAwZjNuXVxuICAgIExvZ2luIC0tPiBEYXNoYm9hcmRbVmVyIGRhc2hib2FyZF1cbiAgICBEYXNoYm9hcmQgLS0+IFZpZXdQZW5kaW5nW1ZlciBwZWRpZG9zIHBlbmRpZW50ZXNdXG4gICAgXG4gICAgVmlld1BlbmRpbmcgLS0+IFNlbGVjdE9yZGVyW1NlbGVjY2lvbmFyIHBlZGlkb11cbiAgICBTZWxlY3RPcmRlciAtLT4gVmlld0RldGFpbHNbVmVyIGRldGFsbGVzXVxuICAgIFZpZXdEZXRhaWxzIC0tPiBDaGVja0ludmVudG9yeXtQcm9kdWN0b3M8YnIvPmRpc3BvbmlibGVzP31cbiAgICBcbiAgICBDaGVja0ludmVudG9yeSAtLT58U1x1MDBlZHwgU3RhcnRQcmVwW0luaWNpYXIgcHJlcGFyYWNpXHUwMGYzbl1cbiAgICBTdGFydFByZXAgLS0+IENoYW5nZVN0YXR1czFbQ2FtYmlhciBlc3RhZG86PGJyLz5QUkVQQVJBTkRPXVxuICAgIENoYW5nZVN0YXR1czEgLS0+IE5vdGlmeUNsaWVudDFbTm90aWZpY2FyIGNsaWVudGVdXG4gICAgXG4gICAgTm90aWZ5Q2xpZW50MSAtLT4gUGlja1Byb2R1Y3RzW1JlY29sZWN0YXIgcHJvZHVjdG9zXVxuICAgIFBpY2tQcm9kdWN0cyAtLT4gVmVyaWZ5SXRlbXNbVmVyaWZpY2FyIGl0ZW1zXVxuICAgIFZlcmlmeUl0ZW1zIC0tPiBQYWNrT3JkZXJbRW1wYWNhciBwZWRpZG9dXG4gICAgUGFja09yZGVyIC0tPiBQcmludExhYmVsW0ltcHJpbWlyIGV0aXF1ZXRhXVxuICAgIFxuICAgIFByaW50TGFiZWwgLS0+IFJlYWR5U2hpcHtMaXN0byBwYXJhPGJyLz5lbnZpYXI/fVxuICAgIFxuICAgIFJlYWR5U2hpcCAtLT58U1x1MDBlZHwgQ2hhbmdlU3RhdHVzMltDYW1iaWFyIGVzdGFkbzo8YnIvPkVOX1RSQU5TSVRPXVxuICAgIENoYW5nZVN0YXR1czIgLS0+IE5vdGlmeUNsaWVudDJbTm90aWZpY2FyIGNsaWVudGVdXG4gICAgTm90aWZ5Q2xpZW50MiAtLT4gQXNzaWduQ291cmllcltBc2lnbmFyIHRyYW5zcG9ydGlzdGFdXG4gICAgXG4gICAgQXNzaWduQ291cmllciAtLT4gSW5UcmFuc2l0W1BlZGlkbyBlbiB0clx1MDBlMW5zaXRvXVxuICAgIEluVHJhbnNpdCAtLT4gV2FpdERlbGl2ZXJ5W0VzcGVyYXIgY29uZmlybWFjaVx1MDBmM248YnIvPmRlIGVudHJlZ2FdXG4gICAgXG4gICAgV2FpdERlbGl2ZXJ5IC0tPiBEZWxpdmVyeUNvbmZpcm17RW50cmVnYTxici8+Y29uZmlybWFkYT99XG4gICAgXG4gICAgRGVsaXZlcnlDb25maXJtIC0tPnxTXHUwMGVkfCBDaGFuZ2VTdGF0dXMzW0NhbWJpYXIgZXN0YWRvOjxici8+RU5UUkVHQURPXVxuICAgIENoYW5nZVN0YXR1czMgLS0+IEdlbmVyYXRlU2FsZVtHZW5lcmFyIHJlZ2lzdHJvPGJyLz5kZSB2ZW50YV1cbiAgICBHZW5lcmF0ZVNhbGUgLS0+IE5vdGlmeUNsaWVudDNbTm90aWZpY2FyIGNsaWVudGVdXG4gICAgTm90aWZ5Q2xpZW50MyAtLT4gVXBkYXRlTWV0cmljc1tBY3R1YWxpemFyIG1cdTAwZTl0cmljYXNdXG4gICAgVXBkYXRlTWV0cmljcyAtLT4gRW5kMihbRmluOiBDb21wbGV0YWRvXSlcblxuICAgICUlIEV4Y2VwdGlvbnNcbiAgICBDaGVja0ludmVudG9yeSAtLSBObyAtLT4gUmVwb3J0SXNzdWVbUmVwb3J0YXIgcHJvYmxlbWFdXG4gICAgUmVwb3J0SXNzdWUgLS0+IE5vdGlmeUFkbWluW05vdGlmaWNhciBhZG1pbl1cbiAgICBOb3RpZnlBZG1pbiAtLT4gV2FpdFJlc29sdXRpb25bRXNwZXJhciByZXNvbHVjaVx1MDBmM25dXG4gICAgV2FpdFJlc29sdXRpb24gLS0+IEVuZDEoW0ZpbjogUGVuZGllbnRlXSlcblxuICAgIFJlYWR5U2hpcCAtLSBObyAtLT4gQ2hlY2tJc3N1ZXtIYXk8YnIvPnByb2JsZW1hP31cbiAgICBDaGVja0lzc3VlIC0tIFNcdTAwZWQgLS0+IFJlcG9ydElzc3VlXG4gICAgQ2hlY2tJc3N1ZSAtLSBObyAtLT4gUGlja1Byb2R1Y3RzXG4gICAgXG4gICAgRGVsaXZlcnlDb25maXJtIC0tIE5vIC0tPiBEZWxpdmVyeUlzc3Vle0hheTxici8+cHJvYmxlbWE/fVxuICAgIERlbGl2ZXJ5SXNzdWUgLS0gU1x1MDBlZCAtLT4gQ29udGFjdENsaWVudFtDb250YWN0YXIgY2xpZW50ZV1cbiAgICBDb250YWN0Q2xpZW50IC0tPiBSZXNjaGVkdWxlW1JlcHJvZ3JhbWFyIGVudHJlZ2FdXG4gICAgUmVzY2hlZHVsZSAtLi0+IEluVHJhbnNpdFxuICAgIERlbGl2ZXJ5SXNzdWUgLS0gTm8gLS0+IFdhaXREZWxpdmVyeVxuICAgIFxuICAgIHN0eWxlIFN0YXJ0IGZpbGw6IzkwRUU5MFxuICAgIHN0eWxlIEVuZDEgZmlsbDojRkZBNTAwXG4gICAgc3R5bGUgRW5kMiBmaWxsOiM5MEVFOTBcbiAgICBzdHlsZSBSZXBvcnRJc3N1ZSBmaWxsOiNGRkI2QzFcbiAgICBzdHlsZSBDb250YWN0Q2xpZW50IGZpbGw6I0ZGQTUwMCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImZsb3djaGFydCBURFxuICAgIFN0YXJ0KFtJbmljaW9dKSAtLT4gTG9naW5bTG9nXHUwMGVkc3RpY2EgaW5pY2lhIHNlc2lcdTAwZjNuXVxuICAgIExvZ2luIC0tPiBEYXNoYm9hcmRbVmVyIGRhc2hib2FyZF1cbiAgICBEYXNoYm9hcmQgLS0+IFZpZXdQZW5kaW5nW1ZlciBwZWRpZG9zIHBlbmRpZW50ZXNdXG4gICAgXG4gICAgVmlld1BlbmRpbmcgLS0+IFNlbGVjdE9yZGVyW1NlbGVjY2lvbmFyIHBlZGlkb11cbiAgICBTZWxlY3RPcmRlciAtLT4gVmlld0RldGFpbHNbVmVyIGRldGFsbGVzXVxuICAgIFZpZXdEZXRhaWxzIC0tPiBDaGVja0ludmVudG9yeXtQcm9kdWN0b3M8YnIvPmRpc3BvbmlibGVzP31cbiAgICBcbiAgICBDaGVja0ludmVudG9yeSAtLT58U1x1MDBlZHwgU3RhcnRQcmVwW0luaWNpYXIgcHJlcGFyYWNpXHUwMGYzbl1cbiAgICBTdGFydFByZXAgLS0+IENoYW5nZVN0YXR1czFbQ2FtYmlhciBlc3RhZG86PGJyLz5QUkVQQVJBTkRPXVxuICAgIENoYW5nZVN0YXR1czEgLS0+IE5vdGlmeUNsaWVudDFbTm90aWZpY2FyIGNsaWVudGVdXG4gICAgXG4gICAgTm90aWZ5Q2xpZW50MSAtLT4gUGlja1Byb2R1Y3RzW1JlY29sZWN0YXIgcHJvZHVjdG9zXVxuICAgIFBpY2tQcm9kdWN0cyAtLT4gVmVyaWZ5SXRlbXNbVmVyaWZpY2FyIGl0ZW1zXVxuICAgIFZlcmlmeUl0ZW1zIC0tPiBQYWNrT3JkZXJbRW1wYWNhciBwZWRpZG9dXG4gICAgUGFja09yZGVyIC0tPiBQcmludExhYmVsW0ltcHJpbWlyIGV0aXF1ZXRhXVxuICAgIFxuICAgIFByaW50TGFiZWwgLS0+IFJlYWR5U2hpcHtMaXN0byBwYXJhPGJyLz5lbnZpYXI/fVxuICAgIFxuICAgIFJlYWR5U2hpcCAtLT58U1x1MDBlZHwgQ2hhbmdlU3RhdHVzMltDYW1iaWFyIGVzdGFkbzo8YnIvPkVOX1RSQU5TSVRPXVxuICAgIENoYW5nZVN0YXR1czIgLS0+IE5vdGlmeUNsaWVudDJbTm90aWZpY2FyIGNsaWVudGVdXG4gICAgTm90aWZ5Q2xpZW50MiAtLT4gQXNzaWduQ291cmllcltBc2lnbmFyIHRyYW5zcG9ydGlzdGFdXG4gICAgXG4gICAgQXNzaWduQ291cmllciAtLT4gSW5UcmFuc2l0W1BlZGlkbyBlbiB0clx1MDBlMW5zaXRvXVxuICAgIEluVHJhbnNpdCAtLT4gV2FpdERlbGl2ZXJ5W0VzcGVyYXIgY29uZmlybWFjaVx1MDBmM248YnIvPmRlIGVudHJlZ2FdXG4gICAgXG4gICAgV2FpdERlbGl2ZXJ5IC0tPiBEZWxpdmVyeUNvbmZpcm17RW50cmVnYTxici8+Y29uZmlybWFkYT99XG4gICAgXG4gICAgRGVsaXZlcnlDb25maXJtIC0tPnxTXHUwMGVkfCBDaGFuZ2VTdGF0dXMzW0NhbWJpYXIgZXN0YWRvOjxici8+RU5UUkVHQURPXVxuICAgIENoYW5nZVN0YXR1czMgLS0+IEdlbmVyYXRlU2FsZVtHZW5lcmFyIHJlZ2lzdHJvPGJyLz5kZSB2ZW50YV1cbiAgICBHZW5lcmF0ZVNhbGUgLS0+IE5vdGlmeUNsaWVudDNbTm90aWZpY2FyIGNsaWVudGVdXG4gICAgTm90aWZ5Q2xpZW50MyAtLT4gVXBkYXRlTWV0cmljc1tBY3R1YWxpemFyIG1cdTAwZTl0cmljYXNdXG4gICAgVXBkYXRlTWV0cmljcyAtLT4gRW5kMihbRmluOiBDb21wbGV0YWRvXSlcblxuICAgICUlIEV4Y2VwdGlvbnNcbiAgICBDaGVja0ludmVudG9yeSAtLSBObyAtLT4gUmVwb3J0SXNzdWVbUmVwb3J0YXIgcHJvYmxlbWFdXG4gICAgUmVwb3J0SXNzdWUgLS0+IE5vdGlmeUFkbWluW05vdGlmaWNhciBhZG1pbl1cbiAgICBOb3RpZnlBZG1pbiAtLT4gV2FpdFJlc29sdXRpb25bRXNwZXJhciByZXNvbHVjaVx1MDBmM25dXG4gICAgV2FpdFJlc29sdXRpb24gLS0+IEVuZDEoW0ZpbjogUGVuZGllbnRlXSlcblxuICAgIFJlYWR5U2hpcCAtLSBObyAtLT4gQ2hlY2tJc3N1ZXtIYXk8YnIvPnByb2JsZW1hP31cbiAgICBDaGVja0lzc3VlIC0tIFNcdTAwZWQgLS0+IFJlcG9ydElzc3VlXG4gICAgQ2hlY2tJc3N1ZSAtLSBObyAtLT4gUGlja1Byb2R1Y3RzXG4gICAgXG4gICAgRGVsaXZlcnlDb25maXJtIC0tIE5vIC0tPiBEZWxpdmVyeUlzc3Vle0hheTxici8+cHJvYmxlbWE/fVxuICAgIERlbGl2ZXJ5SXNzdWUgLS0gU1x1MDBlZCAtLT4gQ29udGFjdENsaWVudFtDb250YWN0YXIgY2xpZW50ZV1cbiAgICBDb250YWN0Q2xpZW50IC0tPiBSZXNjaGVkdWxlW1JlcHJvZ3JhbWFyIGVudHJlZ2FdXG4gICAgUmVzY2hlZHVsZSAtLi0+IEluVHJhbnNpdFxuICAgIERlbGl2ZXJ5SXNzdWUgLS0gTm8gLS0+IFdhaXREZWxpdmVyeVxuICAgIFxuICAgIHN0eWxlIFN0YXJ0IGZpbGw6IzkwRUU5MFxuICAgIHN0eWxlIEVuZDEgZmlsbDojRkZBNTAwXG4gICAgc3R5bGUgRW5kMiBmaWxsOiM5MEVFOTBcbiAgICBzdHlsZSBSZXBvcnRJc3N1ZSBmaWxsOiNGRkI2QzFcbiAgICBzdHlsZSBDb250YWN0Q2xpZW50IGZpbGw6I0ZGQTUwMCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TD
                        Start([Inicio]) --> Login[Log√≠stica inicia sesi√≥n]
                        Login --> Dashboard[Ver dashboard]
                        Dashboard --> ViewPending[Ver pedidos pendientes]
                        
                        ViewPending --> SelectOrder[Seleccionar pedido]
                        SelectOrder --> ViewDetails[Ver detalles]
                        ViewDetails --> CheckInventory{""""Productos<br/>disponibles?""""}
                        
                        CheckInventory -->|S√≠| StartPrep[Iniciar preparaci√≥n]
                        StartPrep --> ChangeStatus1[""""Cambiar estado:<br/>PREPARANDO""""]
                        ChangeStatus1 --> NotifyClient1[Notificar cliente]
                        
                        NotifyClient1 --> PickProducts[Recolectar productos]
                        PickProducts --> VerifyItems[Verificar items]
                        VerifyItems --> PackOrder[Empacar pedido]
                        PackOrder --> PrintLabel[Imprimir etiqueta]
                        
                        PrintLabel --> ReadyShip{""""Listo para<br/>enviar?""""}
                        
                        ReadyShip -->|S√≠| ChangeStatus2[""""Cambiar estado:<br/>EN_TRANSITO""""]
                        ChangeStatus2 --> NotifyClient2[Notificar cliente]
                        NotifyClient2 --> AssignCourier[Asignar transportista]
                        
                        AssignCourier --> InTransit[Pedido en tr√°nsito]
                        InTransit --> WaitDelivery[""""Esperar confirmaci√≥n<br/>de entrega""""]
                        
                        WaitDelivery --> DeliveryConfirm{""""Entrega<br/>confirmada?""""}
                        
                        DeliveryConfirm -->|S√≠| ChangeStatus3[""""Cambiar estado:<br/>ENTREGADO""""]
                        ChangeStatus3 --> GenerateSale[""""Generar registro<br/>de venta""""]
                        GenerateSale --> NotifyClient3[Notificar cliente]
                        NotifyClient3 --> UpdateMetrics[Actualizar m√©tricas]
                        UpdateMetrics --> End2([Fin: Completado])
                    
                        %% Exceptions
                        CheckInventory -->|No| ReportIssue[Reportar problema]
                        ReportIssue --> NotifyAdmin[Notificar admin]
                        NotifyAdmin --> WaitResolution[Esperar resoluci√≥n]
                        WaitResolution --> End1([Fin: Pendiente])
                    
                        ReadyShip -->|No| CheckIssue{""""Hay<br/>problema?""""}
                        CheckIssue -->|S√≠| ReportIssue
                        CheckIssue -->|No| PickProducts
                        
                        DeliveryConfirm -->|No| DeliveryIssue{""""Hay<br/>problema?""""}
                        DeliveryIssue -->|S√≠| ContactClient[Contactar cliente]
                        ContactClient --> Reschedule[Reprogramar entrega]
                        Reschedule -.-> InTransit
                        DeliveryIssue -->|No| WaitDelivery
                        
                        style Start fill:#90EE90
                        style End1 fill:#FFA500
                        style End2 fill:#90EE90
                        style ReportIssue fill:#FFB6C1
                        style ContactClient fill:#FFA500

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TD
                        Start([Inicio: Timer]) --> Trigger[""""Celery Beat trigger<br/>cada 1 hora""""]
                        Trigger --> GetProducts[""""Obtener productos con<br/>recarga autom√°tica activa""""]
                        GetProducts --> Loop{""""M√°s productos<br/>por revisar?""""}
                        
                        Loop -->|No| EndProcess[Finalizar proceso]
                        EndProcess --> End([Fin])
                        
                        Loop -->|S√≠| NextProduct[Siguiente producto]
                        NextProduct --> CheckStock{""""Stock actual <=<br/>Stock m√≠nimo?""""}
                        
                        CheckStock -->|No| SkipProduct[No requiere recarga]
                        SkipProduct -.-> Loop
                        
                        CheckStock -->|S√≠| BeginTrans[BEGIN TRANSACTION]
                        BeginTrans --> CalcRecharge[Calcular cantidad]
                        CalcRecharge --> UpdateStock[UPDATE stock]
                        
                        UpdateStock --> LogHistory[INSERT historial]
                        LogHistory --> UpdateConfig[UPDATE config]
                        
                        UpdateConfig --> Commit[COMMIT TRANSACTION]
                        Commit --> SendNotif[Notificar proveedor]
                        SendNotif --> LogEvent[Registrar en log]
                        LogEvent -.-> Loop
                        
                        BeginTrans -.Error.-> Rollback[ROLLBACK]
                        Rollback --> LogError[Registrar error]
                        LogError --> NotifyAdmin[Notificar admin]
                        NotifyAdmin -.-> Loop
                        
                        style Start fill:#90EE90
                        style End fill:#90EE90
                        style SkipProduct fill:#D3D3D3
                        style Rollback fill:#FFB6C1

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImZsb3djaGFydCBURFxuICAgIFN0YXJ0KFtJbmljaW86IFRpbWVyXSkgLS0+IFRyaWdnZXJbQ2VsZXJ5IEJlYXQgdHJpZ2dlcjxici8+Y2FkYSAxIGhvcmFdXG4gICAgVHJpZ2dlciAtLT4gR2V0UHJvZHVjdHNbT2J0ZW5lciBwcm9kdWN0b3MgY29uPGJyLz5yZWNhcmdhIGF1dG9tXHUwMGUxdGljYSBhY3RpdmFdXG4gICAgR2V0UHJvZHVjdHMgLS0+IExvb3B7TVx1MDBlMXMgcHJvZHVjdG9zPGJyLz5wb3IgcmV2aXNhcj99XG4gICAgXG4gICAgTG9vcCAtLT58Tm98IEVuZFByb2Nlc3NbRmluYWxpemFyIHByb2Nlc29dXG4gICAgRW5kUHJvY2VzcyAtLT4gRW5kKFtGaW5dKVxuICAgIFxuICAgIExvb3AgLS0+fFNcdTAwZWR8IE5leHRQcm9kdWN0W1NpZ3VpZW50ZSBwcm9kdWN0b11cbiAgICBOZXh0UHJvZHVjdCAtLT4gQ2hlY2tTdG9ja3tTdG9jayBhY3R1YWwgPD08YnIvPlN0b2NrIG1cdTAwZWRuaW1vP31cbiAgICBcbiAgICBDaGVja1N0b2NrIC0tPnxOb3wgU2tpcFByb2R1Y3RbTm8gcmVxdWllcmUgcmVjYXJnYV1cbiAgICBTa2lwUHJvZHVjdCAtLi0+IExvb3BcbiAgICBcbiAgICBDaGVja1N0b2NrIC0tPnxTXHUwMGVkfCBCZWdpblRyYW5zW0JFR0lOIFRSQU5TQUNUSU9OXVxuICAgIEJlZ2luVHJhbnMgLS0+IENhbGNSZWNoYXJnZVtDYWxjdWxhciBjYW50aWRhZF1cbiAgICBDYWxjUmVjaGFyZ2UgLS0+IFVwZGF0ZVN0b2NrW1VQREFURSBzdG9ja11cbiAgICBcbiAgICBVcGRhdGVTdG9jayAtLT4gTG9nSGlzdG9yeVtJTlNFUlQgaGlzdG9yaWFsXVxuICAgIExvZ0hpc3RvcnkgLS0+IFVwZGF0ZUNvbmZpZ1tVUERBVEUgY29uZmlnXVxuICAgIFxuICAgIFVwZGF0ZUNvbmZpZyAtLT4gQ29tbWl0W0NPTU1JVCBUUkFOU0FDVElPTl1cbiAgICBDb21taXQgLS0+IFNlbmROb3RpZltOb3RpZmljYXIgcHJvdmVlZG9yXVxuICAgIFNlbmROb3RpZiAtLT4gTG9nRXZlbnRbUmVnaXN0cmFyIGVuIGxvZ11cbiAgICBMb2dFdmVudCAtLi0+IExvb3BcbiAgICBcbiAgICBCZWdpblRyYW5zIC0uRXJyb3IuLT4gUm9sbGJhY2tbUk9MTEJBQ0tdXG4gICAgUm9sbGJhY2sgLS0+IExvZ0Vycm9yW1JlZ2lzdHJhciBlcnJvcl1cbiAgICBMb2dFcnJvciAtLT4gTm90aWZ5QWRtaW5bTm90aWZpY2FyIGFkbWluXVxuICAgIE5vdGlmeUFkbWluIC0uLT4gTG9vcFxuICAgIFxuICAgIHN0eWxlIFN0YXJ0IGZpbGw6IzkwRUU5MFxuICAgIHN0eWxlIEVuZCBmaWxsOiM5MEVFOTBcbiAgICBzdHlsZSBTa2lwUHJvZHVjdCBmaWxsOiNEM0QzRDNcbiAgICBzdHlsZSBSb2xsYmFjayBmaWxsOiNGRkI2QzEiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImZsb3djaGFydCBURFxuICAgIFN0YXJ0KFtJbmljaW86IFRpbWVyXSkgLS0+IFRyaWdnZXJbQ2VsZXJ5IEJlYXQgdHJpZ2dlcjxici8+Y2FkYSAxIGhvcmFdXG4gICAgVHJpZ2dlciAtLT4gR2V0UHJvZHVjdHNbT2J0ZW5lciBwcm9kdWN0b3MgY29uPGJyLz5yZWNhcmdhIGF1dG9tXHUwMGUxdGljYSBhY3RpdmFdXG4gICAgR2V0UHJvZHVjdHMgLS0+IExvb3B7TVx1MDBlMXMgcHJvZHVjdG9zPGJyLz5wb3IgcmV2aXNhcj99XG4gICAgXG4gICAgTG9vcCAtLT58Tm98IEVuZFByb2Nlc3NbRmluYWxpemFyIHByb2Nlc29dXG4gICAgRW5kUHJvY2VzcyAtLT4gRW5kKFtGaW5dKVxuICAgIFxuICAgIExvb3AgLS0+fFNcdTAwZWR8IE5leHRQcm9kdWN0W1NpZ3VpZW50ZSBwcm9kdWN0b11cbiAgICBOZXh0UHJvZHVjdCAtLT4gQ2hlY2tTdG9ja3tTdG9jayBhY3R1YWwgPD08YnIvPlN0b2NrIG1cdTAwZWRuaW1vP31cbiAgICBcbiAgICBDaGVja1N0b2NrIC0tPnxOb3wgU2tpcFByb2R1Y3RbTm8gcmVxdWllcmUgcmVjYXJnYV1cbiAgICBTa2lwUHJvZHVjdCAtLi0+IExvb3BcbiAgICBcbiAgICBDaGVja1N0b2NrIC0tPnxTXHUwMGVkfCBCZWdpblRyYW5zW0JFR0lOIFRSQU5TQUNUSU9OXVxuICAgIEJlZ2luVHJhbnMgLS0+IENhbGNSZWNoYXJnZVtDYWxjdWxhciBjYW50aWRhZF1cbiAgICBDYWxjUmVjaGFyZ2UgLS0+IFVwZGF0ZVN0b2NrW1VQREFURSBzdG9ja11cbiAgICBcbiAgICBVcGRhdGVTdG9jayAtLT4gTG9nSGlzdG9yeVtJTlNFUlQgaGlzdG9yaWFsXVxuICAgIExvZ0hpc3RvcnkgLS0+IFVwZGF0ZUNvbmZpZ1tVUERBVEUgY29uZmlnXVxuICAgIFxuICAgIFVwZGF0ZUNvbmZpZyAtLT4gQ29tbWl0W0NPTU1JVCBUUkFOU0FDVElPTl1cbiAgICBDb21taXQgLS0+IFNlbmROb3RpZltOb3RpZmljYXIgcHJvdmVlZG9yXVxuICAgIFNlbmROb3RpZiAtLT4gTG9nRXZlbnRbUmVnaXN0cmFyIGVuIGxvZ11cbiAgICBMb2dFdmVudCAtLi0+IExvb3BcbiAgICBcbiAgICBCZWdpblRyYW5zIC0uRXJyb3IuLT4gUm9sbGJhY2tbUk9MTEJBQ0tdXG4gICAgUm9sbGJhY2sgLS0+IExvZ0Vycm9yW1JlZ2lzdHJhciBlcnJvcl1cbiAgICBMb2dFcnJvciAtLT4gTm90aWZ5QWRtaW5bTm90aWZpY2FyIGFkbWluXVxuICAgIE5vdGlmeUFkbWluIC0uLT4gTG9vcFxuICAgIFxuICAgIHN0eWxlIFN0YXJ0IGZpbGw6IzkwRUU5MFxuICAgIHN0eWxlIEVuZCBmaWxsOiM5MEVFOTBcbiAgICBzdHlsZSBTa2lwUHJvZHVjdCBmaWxsOiNEM0QzRDNcbiAgICBzdHlsZSBSb2xsYmFjayBmaWxsOiNGRkI2QzEiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TD
                        Start([Inicio: Timer]) --> Trigger[""""Celery Beat trigger<br/>cada 1 hora""""]
                        Trigger --> GetProducts[""""Obtener productos con<br/>recarga autom√°tica activa""""]
                        GetProducts --> Loop{""""M√°s productos<br/>por revisar?""""}
                        
                        Loop -->|No| EndProcess[Finalizar proceso]
                        EndProcess --> End([Fin])
                        
                        Loop -->|S√≠| NextProduct[Siguiente producto]
                        NextProduct --> CheckStock{""""Stock actual <=<br/>Stock m√≠nimo?""""}
                        
                        CheckStock -->|No| SkipProduct[No requiere recarga]
                        SkipProduct -.-> Loop
                        
                        CheckStock -->|S√≠| BeginTrans[BEGIN TRANSACTION]
                        BeginTrans --> CalcRecharge[Calcular cantidad]
                        CalcRecharge --> UpdateStock[UPDATE stock]
                        
                        UpdateStock --> LogHistory[INSERT historial]
                        LogHistory --> UpdateConfig[UPDATE config]
                        
                        UpdateConfig --> Commit[COMMIT TRANSACTION]
                        Commit --> SendNotif[Notificar proveedor]
                        SendNotif --> LogEvent[Registrar en log]
                        LogEvent -.-> Loop
                        
                        BeginTrans -.Error.-> Rollback[ROLLBACK]
                        Rollback --> LogError[Registrar error]
                        LogError --> NotifyAdmin[Notificar admin]
                        NotifyAdmin -.-> Loop
                        
                        style Start fill:#90EE90
                        style End fill:#90EE90
                        style SkipProduct fill:#D3D3D3
                        style Rollback fill:#FFB6C1

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TD
                        Start([Inicio]) --> AdminLogin[Admin inicia sesi√≥n]
                        AdminLogin --> NavProducts[Navegar Gesti√≥n]
                        NavProducts --> ViewProducts[Ver lista productos]
                        
                        ViewProducts --> SelectProduct[Seleccionar producto]
                        SelectProduct --> ViewCurrent{""""Proveedor<br/>actual?""""}
                        
                        ViewCurrent -->|S√≠| ConfirmChange{""""Confirmar<br/>cambio?""""}
                        ConfirmChange -->|No| ViewProducts
                        ConfirmChange -->|S√≠| NewAssign[Nueva asignaci√≥n]
                        ViewCurrent -->|No| NewAssign
                        
                        NewAssign --> GetProviders[Listar proveedores]
                        GetProviders --> SelectProvider[Seleccionar proveedor]
                        
                        SelectProvider --> ValidateProvider{""""Proveedor<br/>v√°lido?""""}
                        ValidateProvider -->|No| ErrorInvalid[Error: Inv√°lido]
                        ErrorInvalid -.-> GetProviders
                        
                        ValidateProvider -->|S√≠| ConfirmAssign[Confirmar]
                        ConfirmAssign --> UpdateProduct[UPDATE producto]
                        
                        UpdateProduct --> CheckAutoStock{""""Configurar<br/>recarga auto?""""}
                        CheckAutoStock -->|S√≠| ConfigStock[Configurar]
                        ConfigStock --> SetParams[Establecer par√°metros]
                        SetParams --> EnableAuto[Activar]
                        EnableAuto --> SaveConfig[Guardar config]
                        SaveConfig --> NotifyProvider
                        
                        CheckAutoStock -->|No| NotifyProvider[Notificar]
                        NotifyProvider --> LogChange[Registrar auditor√≠a]
                        LogChange --> ShowSuccess[√âxito]
                        ShowSuccess --> MoreAssign{¬øM√°s?}
                        
                        MoreAssign -->|S√≠| ViewProducts
                        MoreAssign -->|No| End([Fin])
                        
                        style Start fill:#90EE90
                        style End fill:#90EE90
                        style ErrorInvalid fill:#FFB6C1

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImZsb3djaGFydCBURFxuICAgIFN0YXJ0KFtJbmljaW9dKSAtLT4gQWRtaW5Mb2dpbltBZG1pbiBpbmljaWEgc2VzaVx1MDBmM25dXG4gICAgQWRtaW5Mb2dpbiAtLT4gTmF2UHJvZHVjdHNbTmF2ZWdhciBHZXN0aVx1MDBmM25dXG4gICAgTmF2UHJvZHVjdHMgLS0+IFZpZXdQcm9kdWN0c1tWZXIgbGlzdGEgcHJvZHVjdG9zXVxuICAgIFxuICAgIFZpZXdQcm9kdWN0cyAtLT4gU2VsZWN0UHJvZHVjdFtTZWxlY2Npb25hciBwcm9kdWN0b11cbiAgICBTZWxlY3RQcm9kdWN0IC0tPiBWaWV3Q3VycmVudHtQcm92ZWVkb3I8YnIvPmFjdHVhbD99XG4gICAgXG4gICAgVmlld0N1cnJlbnQgLS0+fFNcdTAwZWR8IENvbmZpcm1DaGFuZ2V7Q29uZmlybWFyPGJyLz5jYW1iaW8/fVxuICAgIENvbmZpcm1DaGFuZ2UgLS0gTm8gLS0+IFZpZXdQcm9kdWN0c1xuICAgIENvbmZpcm1DaGFuZ2UgLS0gU1x1MDBlZCAtLT4gTmV3QXNzaWduW051ZXZhIGFzaWduYWNpXHUwMGYzbl1cbiAgICBWaWV3Q3VycmVudCAtLSBObyAtLT4gTmV3QXNzaWduXG4gICAgXG4gICAgTmV3QXNzaWduIC0tPiBHZXRQcm92aWRlcnNbTGlzdGFyIHByb3ZlZWRvcmVzXVxuICAgIEdldFByb3ZpZGVycyAtLT4gU2VsZWN0UHJvdmlkZXJbU2VsZWNjaW9uYXIgcHJvdmVlZG9yXVxuICAgIFxuICAgIFNlbGVjdFByb3ZpZGVyIC0tPiBWYWxpZGF0ZVByb3ZpZGVye1Byb3ZlZWRvcjxici8+dlx1MDBlMWxpZG8/fVxuICAgIFZhbGlkYXRlUHJvdmlkZXIgLS0gTm8gLS0+IEVycm9ySW52YWxpZFtFcnJvcjogSW52XHUwMGUxbGlkb11cbiAgICBFcnJvckludmFsaWQgLS4tPiBHZXRQcm92aWRlcnNcbiAgICBcbiAgICBWYWxpZGF0ZVByb3ZpZGVyIC0tPnxTXHUwMGVkfCBDb25maXJtQXNzaWduW0NvbmZpcm1hcl1cbiAgICBDb25maXJtQXNzaWduIC0tPiBVcGRhdGVQcm9kdWN0W1VQREFURSBwcm9kdWN0b11cbiAgICBcbiAgICBVcGRhdGVQcm9kdWN0IC0tPiBDaGVja0F1dG9TdG9ja3tDb25maWd1cmFyPGJyLz5yZWNhcmdhIGF1dG8/fVxuICAgIENoZWNrQXV0b1N0b2NrIC0tPnxTXHUwMGVkfCBDb25maWdTdG9ja1tDb25maWd1cmFyXVxuICAgIENvbmZpZ1N0b2NrIC0tPiBTZXRQYXJhbXNbRXN0YWJsZWNlciBwYXJcdTAwZTFtZXRyb3NdXG4gICAgU2V0UGFyYW1zIC0tPiBFbmFibGVBdXRvW0FjdGl2YXJdXG4gICAgRW5hYmxlQXV0byAtLT4gU2F2ZUNvbmZpZ1tHdWFyZGFyIGNvbmZpZ11cbiAgICBTYXZlQ29uZmlnIC0tPiBOb3RpZnlQcm92aWRlclxuICAgIFxuICAgIENoZWNrQXV0b1N0b2NrIC0tPnxOb3wgTm90aWZ5UHJvdmlkZXJbTm90aWZpY2FyXVxuICAgIE5vdGlmeVByb3ZpZGVyIC0tPiBMb2dDaGFuZ2VbUmVnaXN0cmFyIGF1ZGl0b3JcdTAwZWRhXVxuICAgIExvZ0NoYW5nZSAtLT4gU2hvd1N1Y2Nlc3NbXHUwMGM5eGl0b11cbiAgICBTaG93U3VjY2VzcyAtLT4gTW9yZUFzc2lnbntcdTAwYmZNXHUwMGUxcz99XG4gICAgXG4gICAgTW9yZUFzc2lnbiAtLSBTXHUwMGVkIC0tPiBWaWV3UHJvZHVjdHNcbiAgICBNb3JlQXNzaWduIC0tIE5vIC0tPiBFbmQoW0Zpbl0pXG4gICAgXG4gICAgc3R5bGUgU3RhcnQgZmlsbDojOTBFRTkwXG4gICAgc3R5bGUgRW5kIGZpbGw6IzkwRUU5MFxuICAgIHN0eWxlIEVycm9ySW52YWxpZCBmaWxsOiNGRkI2QzEiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImZsb3djaGFydCBURFxuICAgIFN0YXJ0KFtJbmljaW9dKSAtLT4gQWRtaW5Mb2dpbltBZG1pbiBpbmljaWEgc2VzaVx1MDBmM25dXG4gICAgQWRtaW5Mb2dpbiAtLT4gTmF2UHJvZHVjdHNbTmF2ZWdhciBHZXN0aVx1MDBmM25dXG4gICAgTmF2UHJvZHVjdHMgLS0+IFZpZXdQcm9kdWN0c1tWZXIgbGlzdGEgcHJvZHVjdG9zXVxuICAgIFxuICAgIFZpZXdQcm9kdWN0cyAtLT4gU2VsZWN0UHJvZHVjdFtTZWxlY2Npb25hciBwcm9kdWN0b11cbiAgICBTZWxlY3RQcm9kdWN0IC0tPiBWaWV3Q3VycmVudHtQcm92ZWVkb3I8YnIvPmFjdHVhbD99XG4gICAgXG4gICAgVmlld0N1cnJlbnQgLS0+fFNcdTAwZWR8IENvbmZpcm1DaGFuZ2V7Q29uZmlybWFyPGJyLz5jYW1iaW8/fVxuICAgIENvbmZpcm1DaGFuZ2UgLS0gTm8gLS0+IFZpZXdQcm9kdWN0c1xuICAgIENvbmZpcm1DaGFuZ2UgLS0gU1x1MDBlZCAtLT4gTmV3QXNzaWduW051ZXZhIGFzaWduYWNpXHUwMGYzbl1cbiAgICBWaWV3Q3VycmVudCAtLSBObyAtLT4gTmV3QXNzaWduXG4gICAgXG4gICAgTmV3QXNzaWduIC0tPiBHZXRQcm92aWRlcnNbTGlzdGFyIHByb3ZlZWRvcmVzXVxuICAgIEdldFByb3ZpZGVycyAtLT4gU2VsZWN0UHJvdmlkZXJbU2VsZWNjaW9uYXIgcHJvdmVlZG9yXVxuICAgIFxuICAgIFNlbGVjdFByb3ZpZGVyIC0tPiBWYWxpZGF0ZVByb3ZpZGVye1Byb3ZlZWRvcjxici8+dlx1MDBlMWxpZG8/fVxuICAgIFZhbGlkYXRlUHJvdmlkZXIgLS0gTm8gLS0+IEVycm9ySW52YWxpZFtFcnJvcjogSW52XHUwMGUxbGlkb11cbiAgICBFcnJvckludmFsaWQgLS4tPiBHZXRQcm92aWRlcnNcbiAgICBcbiAgICBWYWxpZGF0ZVByb3ZpZGVyIC0tPnxTXHUwMGVkfCBDb25maXJtQXNzaWduW0NvbmZpcm1hcl1cbiAgICBDb25maXJtQXNzaWduIC0tPiBVcGRhdGVQcm9kdWN0W1VQREFURSBwcm9kdWN0b11cbiAgICBcbiAgICBVcGRhdGVQcm9kdWN0IC0tPiBDaGVja0F1dG9TdG9ja3tDb25maWd1cmFyPGJyLz5yZWNhcmdhIGF1dG8/fVxuICAgIENoZWNrQXV0b1N0b2NrIC0tPnxTXHUwMGVkfCBDb25maWdTdG9ja1tDb25maWd1cmFyXVxuICAgIENvbmZpZ1N0b2NrIC0tPiBTZXRQYXJhbXNbRXN0YWJsZWNlciBwYXJcdTAwZTFtZXRyb3NdXG4gICAgU2V0UGFyYW1zIC0tPiBFbmFibGVBdXRvW0FjdGl2YXJdXG4gICAgRW5hYmxlQXV0byAtLT4gU2F2ZUNvbmZpZ1tHdWFyZGFyIGNvbmZpZ11cbiAgICBTYXZlQ29uZmlnIC0tPiBOb3RpZnlQcm92aWRlclxuICAgIFxuICAgIENoZWNrQXV0b1N0b2NrIC0tPnxOb3wgTm90aWZ5UHJvdmlkZXJbTm90aWZpY2FyXVxuICAgIE5vdGlmeVByb3ZpZGVyIC0tPiBMb2dDaGFuZ2VbUmVnaXN0cmFyIGF1ZGl0b3JcdTAwZWRhXVxuICAgIExvZ0NoYW5nZSAtLT4gU2hvd1N1Y2Nlc3NbXHUwMGM5eGl0b11cbiAgICBTaG93U3VjY2VzcyAtLT4gTW9yZUFzc2lnbntcdTAwYmZNXHUwMGUxcz99XG4gICAgXG4gICAgTW9yZUFzc2lnbiAtLSBTXHUwMGVkIC0tPiBWaWV3UHJvZHVjdHNcbiAgICBNb3JlQXNzaWduIC0tIE5vIC0tPiBFbmQoW0Zpbl0pXG4gICAgXG4gICAgc3R5bGUgU3RhcnQgZmlsbDojOTBFRTkwXG4gICAgc3R5bGUgRW5kIGZpbGw6IzkwRUU5MFxuICAgIHN0eWxlIEVycm9ySW52YWxpZCBmaWxsOiNGRkI2QzEiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TD
                        Start([Inicio]) --> AdminLogin[Admin inicia sesi√≥n]
                        AdminLogin --> NavProducts[Navegar Gesti√≥n]
                        NavProducts --> ViewProducts[Ver lista productos]
                        
                        ViewProducts --> SelectProduct[Seleccionar producto]
                        SelectProduct --> ViewCurrent{""""Proveedor<br/>actual?""""}
                        
                        ViewCurrent -->|S√≠| ConfirmChange{""""Confirmar<br/>cambio?""""}
                        ConfirmChange -->|No| ViewProducts
                        ConfirmChange -->|S√≠| NewAssign[Nueva asignaci√≥n]
                        ViewCurrent -->|No| NewAssign
                        
                        NewAssign --> GetProviders[Listar proveedores]
                        GetProviders --> SelectProvider[Seleccionar proveedor]
                        
                        SelectProvider --> ValidateProvider{""""Proveedor<br/>v√°lido?""""}
                        ValidateProvider -->|No| ErrorInvalid[Error: Inv√°lido]
                        ErrorInvalid -.-> GetProviders
                        
                        ValidateProvider -->|S√≠| ConfirmAssign[Confirmar]
                        ConfirmAssign --> UpdateProduct[UPDATE producto]
                        
                        UpdateProduct --> CheckAutoStock{""""Configurar<br/>recarga auto?""""}
                        CheckAutoStock -->|S√≠| ConfigStock[Configurar]
                        ConfigStock --> SetParams[Establecer par√°metros]
                        SetParams --> EnableAuto[Activar]
                        EnableAuto --> SaveConfig[Guardar config]
                        SaveConfig --> NotifyProvider
                        
                        CheckAutoStock -->|No| NotifyProvider[Notificar]
                        NotifyProvider --> LogChange[Registrar auditor√≠a]
                        LogChange --> ShowSuccess[√âxito]
                        ShowSuccess --> MoreAssign{¬øM√°s?}
                        
                        MoreAssign -->|S√≠| ViewProducts
                        MoreAssign -->|No| End([Fin])
                        
                        style Start fill:#90EE90
                        style End fill:#90EE90
                        style ErrorInvalid fill:#FFB6C1

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TD
                        Start([Inicio]) --> Login{""""Usuario<br/>autenticado?""""}
                        Login -->|No| RedirectLogin[Redirect login]
                        RedirectLogin --> End1([Fin])
                        
                        Login -->|S√≠| CheckRole{Rol?}
                        
                        CheckRole -->|Admin| AdminDash[Dashboard Admin]
                        CheckRole -->|Proveedor| ProvDash[Dashboard Prov]
                        CheckRole -->|Log√≠stica| LogiDash[Dashboard Log]
                        CheckRole -->|Cliente| ClientDash[Dashboard Client]
                        
                        AdminDash --> SelectReportType[Seleccionar reporte]
                        SelectReportType --> ReportType{Tipo?}
                        
                        ReportType --> SalesReport[Ventas]
                        ReportType --> StockReport[Stock]
                        ReportType --> UsersReport[Usuarios]
                        ReportType --> OrdersReport[Pedidos]
                        
                        ProvDash --> ProvReports[Reportes Prov]
                        LogiDash --> LogiReports[Reportes Log]
                        ClientDash --> ClientReports[Reportes Client]
                        
                        SalesReport --> SetParams[Par√°metros]
                        StockReport --> SetParams
                        UsersReport --> SetParams
                        OrdersReport --> SetParams
                        ProvReports --> SetParams
                        LogiReports --> SetParams
                        ClientReports --> SetParams
                        
                        SetParams --> QueryDB[Consultar DB]
                        QueryDB --> ProcessData[Procesar]
                        ProcessData --> GenerateChart[Gr√°ficos]
                        GenerateChart --> FormatReport[Formatear]
                        
                        FormatReport --> ExportFormat{Exportar?}
                        ExportFormat -->|PDF| GenPDF[PDF]
                        ExportFormat -->|Excel| GenExcel[Excel]
                        ExportFormat -->|CSV| GenCSV[CSV]
                        
                        GenPDF --> Download[Descargar]
                        GenExcel --> Download
                        GenCSV --> Download
                        
                        Download --> SaveHistory[Historial]
                        SaveHistory --> End2([Fin])
                        
                        style Start fill:#90EE90
                        style End1 fill:#FFB6C1
                        style End2 fill:#90EE90

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImZsb3djaGFydCBURFxuICAgIFN0YXJ0KFtJbmljaW9dKSAtLT4gTG9naW57VXN1YXJpbzxici8+YXV0ZW50aWNhZG8/fVxuICAgIExvZ2luIC0tIE5vIC0tPiBSZWRpcmVjdExvZ2luW1JlZGlyZWN0IGxvZ2luXVxuICAgIFJlZGlyZWN0TG9naW4gLS0+IEVuZDEoW0Zpbl0pXG4gICAgXG4gICAgTG9naW4gLS0+fFNcdTAwZWR8IENoZWNrUm9sZXtSb2w/fVxuICAgIFxuICAgIENoZWNrUm9sZSAtLT58QWRtaW58IEFkbWluRGFzaFtEYXNoYm9hcmQgQWRtaW5dXG4gICAgQ2hlY2tSb2xlIC0tPnxQcm92ZWVkb3J8IFByb3ZEYXNoW0Rhc2hib2FyZCBQcm92XVxuICAgIENoZWNrUm9sZSAtLT58TG9nXHUwMGVkc3RpY2F8IExvZ2lEYXNoW0Rhc2hib2FyZCBMb2ddXG4gICAgQ2hlY2tSb2xlIC0tPnxDbGllbnRlfCBDbGllbnREYXNoW0Rhc2hib2FyZCBDbGllbnRdXG4gICAgXG4gICAgQWRtaW5EYXNoIC0tPiBTZWxlY3RSZXBvcnRUeXBlW1NlbGVjY2lvbmFyIHJlcG9ydGVdXG4gICAgU2VsZWN0UmVwb3J0VHlwZSAtLT4gUmVwb3J0VHlwZXtUaXBvP31cbiAgICBcbiAgICBSZXBvcnRUeXBlIC0tPiBTYWxlc1JlcG9ydFtWZW50YXNdXG4gICAgUmVwb3J0VHlwZSAtLT4gU3RvY2tSZXBvcnRbU3RvY2tdXG4gICAgUmVwb3J0VHlwZSAtLT4gVXNlcnNSZXBvcnRbVXN1YXJpb3NdXG4gICAgUmVwb3J0VHlwZSAtLT4gT3JkZXJzUmVwb3J0W1BlZGlkb3NdXG4gICAgXG4gICAgUHJvdkRhc2ggLS0+IFByb3ZSZXBvcnRzW1JlcG9ydGVzIFByb3ZdXG4gICAgTG9naURhc2ggLS0+IExvZ2lSZXBvcnRzW1JlcG9ydGVzIExvZ11cbiAgICBDbGllbnREYXNoIC0tPiBDbGllbnRSZXBvcnRzW1JlcG9ydGVzIENsaWVudF1cbiAgICBcbiAgICBTYWxlc1JlcG9ydCAtLT4gU2V0UGFyYW1zW1Bhclx1MDBlMW1ldHJvc11cbiAgICBTdG9ja1JlcG9ydCAtLT4gU2V0UGFyYW1zXG4gICAgVXNlcnNSZXBvcnQgLS0+IFNldFBhcmFtc1xuICAgIE9yZGVyc1JlcG9ydCAtLT4gU2V0UGFyYW1zXG4gICAgUHJvdlJlcG9ydHMgLS0+IFNldFBhcmFtc1xuICAgIExvZ2lSZXBvcnRzIC0tPiBTZXRQYXJhbXNcbiAgICBDbGllbnRSZXBvcnRzIC0tPiBTZXRQYXJhbXNcbiAgICBcbiAgICBTZXRQYXJhbXMgLS0+IFF1ZXJ5REJbQ29uc3VsdGFyIERCXVxuICAgIFF1ZXJ5REIgLS0+IFByb2Nlc3NEYXRhW1Byb2Nlc2FyXVxuICAgIFByb2Nlc3NEYXRhIC0tPiBHZW5lcmF0ZUNoYXJ0W0dyXHUwMGUxZmljb3NdXG4gICAgR2VuZXJhdGVDaGFydCAtLT4gRm9ybWF0UmVwb3J0W0Zvcm1hdGVhcl1cbiAgICBcbiAgICBGb3JtYXRSZXBvcnQgLS0+IEV4cG9ydEZvcm1hdHtFeHBvcnRhcj99XG4gICAgRXhwb3J0Rm9ybWF0IC0tPnxQREZ8IEdlblBERltQREZdXG4gICAgRXhwb3J0Rm9ybWF0IC0tPnxFeGNlbHwgR2VuRXhjZWxbRXhjZWxdXG4gICAgRXhwb3J0Rm9ybWF0IC0tPnxDU1Z8IEdlbkNTVltDU1ZdXG4gICAgXG4gICAgR2VuUERGIC0tPiBEb3dubG9hZFtEZXNjYXJnYXJdXG4gICAgR2VuRXhjZWwgLS0+IERvd25sb2FkXG4gICAgR2VuQ1NWIC0tPiBEb3dubG9hZFxuICAgIFxuICAgIERvd25sb2FkIC0tPiBTYXZlSGlzdG9yeVtIaXN0b3JpYWxdXG4gICAgU2F2ZUhpc3RvcnkgLS0+IEVuZDIoW0Zpbl0pXG4gICAgXG4gICAgc3R5bGUgU3RhcnQgZmlsbDojOTBFRTkwXG4gICAgc3R5bGUgRW5kMSBmaWxsOiNGRkI2QzFcbiAgICBzdHlsZSBFbmQyIGZpbGw6IzkwRUU5MCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImZsb3djaGFydCBURFxuICAgIFN0YXJ0KFtJbmljaW9dKSAtLT4gTG9naW57VXN1YXJpbzxici8+YXV0ZW50aWNhZG8/fVxuICAgIExvZ2luIC0tIE5vIC0tPiBSZWRpcmVjdExvZ2luW1JlZGlyZWN0IGxvZ2luXVxuICAgIFJlZGlyZWN0TG9naW4gLS0+IEVuZDEoW0Zpbl0pXG4gICAgXG4gICAgTG9naW4gLS0+fFNcdTAwZWR8IENoZWNrUm9sZXtSb2w/fVxuICAgIFxuICAgIENoZWNrUm9sZSAtLT58QWRtaW58IEFkbWluRGFzaFtEYXNoYm9hcmQgQWRtaW5dXG4gICAgQ2hlY2tSb2xlIC0tPnxQcm92ZWVkb3J8IFByb3ZEYXNoW0Rhc2hib2FyZCBQcm92XVxuICAgIENoZWNrUm9sZSAtLT58TG9nXHUwMGVkc3RpY2F8IExvZ2lEYXNoW0Rhc2hib2FyZCBMb2ddXG4gICAgQ2hlY2tSb2xlIC0tPnxDbGllbnRlfCBDbGllbnREYXNoW0Rhc2hib2FyZCBDbGllbnRdXG4gICAgXG4gICAgQWRtaW5EYXNoIC0tPiBTZWxlY3RSZXBvcnRUeXBlW1NlbGVjY2lvbmFyIHJlcG9ydGVdXG4gICAgU2VsZWN0UmVwb3J0VHlwZSAtLT4gUmVwb3J0VHlwZXtUaXBvP31cbiAgICBcbiAgICBSZXBvcnRUeXBlIC0tPiBTYWxlc1JlcG9ydFtWZW50YXNdXG4gICAgUmVwb3J0VHlwZSAtLT4gU3RvY2tSZXBvcnRbU3RvY2tdXG4gICAgUmVwb3J0VHlwZSAtLT4gVXNlcnNSZXBvcnRbVXN1YXJpb3NdXG4gICAgUmVwb3J0VHlwZSAtLT4gT3JkZXJzUmVwb3J0W1BlZGlkb3NdXG4gICAgXG4gICAgUHJvdkRhc2ggLS0+IFByb3ZSZXBvcnRzW1JlcG9ydGVzIFByb3ZdXG4gICAgTG9naURhc2ggLS0+IExvZ2lSZXBvcnRzW1JlcG9ydGVzIExvZ11cbiAgICBDbGllbnREYXNoIC0tPiBDbGllbnRSZXBvcnRzW1JlcG9ydGVzIENsaWVudF1cbiAgICBcbiAgICBTYWxlc1JlcG9ydCAtLT4gU2V0UGFyYW1zW1Bhclx1MDBlMW1ldHJvc11cbiAgICBTdG9ja1JlcG9ydCAtLT4gU2V0UGFyYW1zXG4gICAgVXNlcnNSZXBvcnQgLS0+IFNldFBhcmFtc1xuICAgIE9yZGVyc1JlcG9ydCAtLT4gU2V0UGFyYW1zXG4gICAgUHJvdlJlcG9ydHMgLS0+IFNldFBhcmFtc1xuICAgIExvZ2lSZXBvcnRzIC0tPiBTZXRQYXJhbXNcbiAgICBDbGllbnRSZXBvcnRzIC0tPiBTZXRQYXJhbXNcbiAgICBcbiAgICBTZXRQYXJhbXMgLS0+IFF1ZXJ5REJbQ29uc3VsdGFyIERCXVxuICAgIFF1ZXJ5REIgLS0+IFByb2Nlc3NEYXRhW1Byb2Nlc2FyXVxuICAgIFByb2Nlc3NEYXRhIC0tPiBHZW5lcmF0ZUNoYXJ0W0dyXHUwMGUxZmljb3NdXG4gICAgR2VuZXJhdGVDaGFydCAtLT4gRm9ybWF0UmVwb3J0W0Zvcm1hdGVhcl1cbiAgICBcbiAgICBGb3JtYXRSZXBvcnQgLS0+IEV4cG9ydEZvcm1hdHtFeHBvcnRhcj99XG4gICAgRXhwb3J0Rm9ybWF0IC0tPnxQREZ8IEdlblBERltQREZdXG4gICAgRXhwb3J0Rm9ybWF0IC0tPnxFeGNlbHwgR2VuRXhjZWxbRXhjZWxdXG4gICAgRXhwb3J0Rm9ybWF0IC0tPnxDU1Z8IEdlbkNTVltDU1ZdXG4gICAgXG4gICAgR2VuUERGIC0tPiBEb3dubG9hZFtEZXNjYXJnYXJdXG4gICAgR2VuRXhjZWwgLS0+IERvd25sb2FkXG4gICAgR2VuQ1NWIC0tPiBEb3dubG9hZFxuICAgIFxuICAgIERvd25sb2FkIC0tPiBTYXZlSGlzdG9yeVtIaXN0b3JpYWxdXG4gICAgU2F2ZUhpc3RvcnkgLS0+IEVuZDIoW0Zpbl0pXG4gICAgXG4gICAgc3R5bGUgU3RhcnQgZmlsbDojOTBFRTkwXG4gICAgc3R5bGUgRW5kMSBmaWxsOiNGRkI2QzFcbiAgICBzdHlsZSBFbmQyIGZpbGw6IzkwRUU5MCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TD
                        Start([Inicio]) --> Login{""""Usuario<br/>autenticado?""""}
                        Login -->|No| RedirectLogin[Redirect login]
                        RedirectLogin --> End1([Fin])
                        
                        Login -->|S√≠| CheckRole{Rol?}
                        
                        CheckRole -->|Admin| AdminDash[Dashboard Admin]
                        CheckRole -->|Proveedor| ProvDash[Dashboard Prov]
                        CheckRole -->|Log√≠stica| LogiDash[Dashboard Log]
                        CheckRole -->|Cliente| ClientDash[Dashboard Client]
                        
                        AdminDash --> SelectReportType[Seleccionar reporte]
                        SelectReportType --> ReportType{Tipo?}
                        
                        ReportType --> SalesReport[Ventas]
                        ReportType --> StockReport[Stock]
                        ReportType --> UsersReport[Usuarios]
                        ReportType --> OrdersReport[Pedidos]
                        
                        ProvDash --> ProvReports[Reportes Prov]
                        LogiDash --> LogiReports[Reportes Log]
                        ClientDash --> ClientReports[Reportes Client]
                        
                        SalesReport --> SetParams[Par√°metros]
                        StockReport --> SetParams
                        UsersReport --> SetParams
                        OrdersReport --> SetParams
                        ProvReports --> SetParams
                        LogiReports --> SetParams
                        ClientReports --> SetParams
                        
                        SetParams --> QueryDB[Consultar DB]
                        QueryDB --> ProcessData[Procesar]
                        ProcessData --> GenerateChart[Gr√°ficos]
                        GenerateChart --> FormatReport[Formatear]
                        
                        FormatReport --> ExportFormat{Exportar?}
                        ExportFormat -->|PDF| GenPDF[PDF]
                        ExportFormat -->|Excel| GenExcel[Excel]
                        ExportFormat -->|CSV| GenCSV[CSV]
                        
                        GenPDF --> Download[Descargar]
                        GenExcel --> Download
                        GenCSV --> Download
                        
                        Download --> SaveHistory[Historial]
                        SaveHistory --> End2([Fin])
                        
                        style Start fill:#90EE90
                        style End1 fill:#FFB6C1
                        style End2 fill:#90EE90

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TD
                        Start([Inicio]) --> ViewProfile[Ver perfil]
                        ViewProfile --> SelectAction{Acci√≥n?}
                        
                        SelectAction -->|Editar| EditProfile
                        SelectAction -->|Pass| ChangePass
                        SelectAction -->|Deactivate| DeactivateAcc[Desactivar]
                        SelectAction -->|Delete| DeleteAcc[Eliminar]
                        
                        %% Edit Profile
                        EditProfile --> InputChanges[Ingresar]
                        InputChanges --> ValidateChanges{V√°lido?}
                        ValidateChanges -->|No| ShowErrors[Error]
                        ShowErrors -.-> InputChanges
                        ValidateChanges -->|S√≠| SaveChanges[Guardar]
                        SaveChanges --> SuccessMsg[√âxito]
                        SuccessMsg --> ViewProfile
                        
                        %% Change Pass
                        ChangePass --> InputOldPass[Pass actual]
                        InputOldPass --> VerifyOldPass{Correcta?}
                        VerifyOldPass -->|No| ErrorOldPass[Error]
                        ErrorOldPass -.-> ChangePass
                        
                        VerifyOldPass -->|S√≠| InputNewPass[Nueva pass]
                        InputNewPass --> CheckStrength{Fuerte?}
                        CheckStrength -->|No| ErrorWeak[D√©bil]
                        ErrorWeak -.-> InputNewPass
                        
                        CheckStrength -->|S√≠| CheckHistory{Usada?}
                        CheckHistory -->|S√≠| ErrorUsed[Usada]
                        ErrorUsed -.-> InputNewPass
                        
                        CheckHistory -->|No| UpdatePass[Actualizar]
                        UpdatePass --> SaveHistory[Historial]
                        SaveHistory --> LogoutAll[Logout all]
                        LogoutAll --> Redirect[Login]
                        Redirect --> End1([Fin])
                        
                        %% Deactivate
                        DeactivateAcc --> ConfirmDeact{Confirmar?}
                        ConfirmDeact -->|No| ViewProfile
                        ConfirmDeact -->|S√≠| SetSelfDeact[Desactivar]
                        SetSelfDeact --> Logout[Logout]
                        Logout --> End2([Fin])
                        
                        %% Delete
                        DeleteAcc --> ConfirmDelete{Confirmar?}
                        ConfirmDelete -->|No| ViewProfile
                        ConfirmDelete -->|S√≠| NotifyAdmin[Notificar Admin]
                        NotifyAdmin --> PendingReview[Revisi√≥n]
                        PendingReview --> End3([Fin])
                        
                        style Start fill:#90EE90
                        style End1 fill:#87CEEB
                        style End2 fill:#FFA500
                        style End3 fill:#FFA500
                        style ErrorOldPass fill:#FFB6C1
                        style ErrorWeak fill:#FFB6C1
                        style ErrorUsed fill:#FFB6C1

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImZsb3djaGFydCBURFxuICAgIFN0YXJ0KFtJbmljaW9dKSAtLT4gVmlld1Byb2ZpbGVbVmVyIHBlcmZpbF1cbiAgICBWaWV3UHJvZmlsZSAtLT4gU2VsZWN0QWN0aW9ue0FjY2lcdTAwZjNuP31cbiAgICBcbiAgICBTZWxlY3RBY3Rpb24gLS0+fEVkaXRhcnwgRWRpdFByb2ZpbGVcbiAgICBTZWxlY3RBY3Rpb24gLS0+fFBhc3N8IENoYW5nZVBhc3NcbiAgICBTZWxlY3RBY3Rpb24gLS0+fERlYWN0aXZhdGV8IERlYWN0aXZhdGVBY2NbRGVzYWN0aXZhcl1cbiAgICBTZWxlY3RBY3Rpb24gLS0+fERlbGV0ZXwgRGVsZXRlQWNjW0VsaW1pbmFyXVxuICAgIFxuICAgICUlIEVkaXQgUHJvZmlsZVxuICAgIEVkaXRQcm9maWxlIC0tPiBJbnB1dENoYW5nZXNbSW5ncmVzYXJdXG4gICAgSW5wdXRDaGFuZ2VzIC0tPiBWYWxpZGF0ZUNoYW5nZXN7Vlx1MDBlMWxpZG8/fVxuICAgIFZhbGlkYXRlQ2hhbmdlcyAtLSBObyAtLT4gU2hvd0Vycm9yc1tFcnJvcl1cbiAgICBTaG93RXJyb3JzIC0uLT4gSW5wdXRDaGFuZ2VzXG4gICAgVmFsaWRhdGVDaGFuZ2VzIC0tPnxTXHUwMGVkfCBTYXZlQ2hhbmdlc1tHdWFyZGFyXVxuICAgIFNhdmVDaGFuZ2VzIC0tPiBTdWNjZXNzTXNnW1x1MDBjOXhpdG9dXG4gICAgU3VjY2Vzc01zZyAtLT4gVmlld1Byb2ZpbGVcbiAgICBcbiAgICAlJSBDaGFuZ2UgUGFzc1xuICAgIENoYW5nZVBhc3MgLS0+IElucHV0T2xkUGFzc1tQYXNzIGFjdHVhbF1cbiAgICBJbnB1dE9sZFBhc3MgLS0+IFZlcmlmeU9sZFBhc3N7Q29ycmVjdGE/fVxuICAgIFZlcmlmeU9sZFBhc3MgLS0gTm8gLS0+IEVycm9yT2xkUGFzc1tFcnJvcl1cbiAgICBFcnJvck9sZFBhc3MgLS4tPiBDaGFuZ2VQYXNzXG4gICAgXG4gICAgVmVyaWZ5T2xkUGFzcyAtLT58U1x1MDBlZHwgSW5wdXROZXdQYXNzW051ZXZhIHBhc3NdXG4gICAgSW5wdXROZXdQYXNzIC0tPiBDaGVja1N0cmVuZ3Roe0Z1ZXJ0ZT99XG4gICAgQ2hlY2tTdHJlbmd0aCAtLSBObyAtLT4gRXJyb3JXZWFrW0RcdTAwZTliaWxdXG4gICAgRXJyb3JXZWFrIC0uLT4gSW5wdXROZXdQYXNzXG4gICAgXG4gICAgQ2hlY2tTdHJlbmd0aCAtLT58U1x1MDBlZHwgQ2hlY2tIaXN0b3J5e1VzYWRhP31cbiAgICBDaGVja0hpc3RvcnkgLS0gU1x1MDBlZCAtLT4gRXJyb3JVc2VkW1VzYWRhXVxuICAgIEVycm9yVXNlZCAtLi0+IElucHV0TmV3UGFzc1xuICAgIFxuICAgIENoZWNrSGlzdG9yeSAtLT58Tm98IFVwZGF0ZVBhc3NbQWN0dWFsaXphcl1cbiAgICBVcGRhdGVQYXNzIC0tPiBTYXZlSGlzdG9yeVtIaXN0b3JpYWxdXG4gICAgU2F2ZUhpc3RvcnkgLS0+IExvZ291dEFsbFtMb2dvdXQgYWxsXVxuICAgIExvZ291dEFsbCAtLT4gUmVkaXJlY3RbTG9naW5dXG4gICAgUmVkaXJlY3QgLS0+IEVuZDEoW0Zpbl0pXG4gICAgXG4gICAgJSUgRGVhY3RpdmF0ZVxuICAgIERlYWN0aXZhdGVBY2MgLS0+IENvbmZpcm1EZWFjdHtDb25maXJtYXI/fVxuICAgIENvbmZpcm1EZWFjdCAtLSBObyAtLT4gVmlld1Byb2ZpbGVcbiAgICBDb25maXJtRGVhY3QgLS0+fFNcdTAwZWR8IFNldFNlbGZEZWFjdFtEZXNhY3RpdmFyXVxuICAgIFNldFNlbGZEZWFjdCAtLT4gTG9nb3V0W0xvZ291dF1cbiAgICBMb2dvdXQgLS0+IEVuZDIoW0Zpbl0pXG4gICAgXG4gICAgJSUgRGVsZXRlXG4gICAgRGVsZXRlQWNjIC0tPiBDb25maXJtRGVsZXRle0NvbmZpcm1hcj99XG4gICAgQ29uZmlybURlbGV0ZSAtLSBObyAtLT4gVmlld1Byb2ZpbGVcbiAgICBDb25maXJtRGVsZXRlIC0tPnxTXHUwMGVkfCBOb3RpZnlBZG1pbltOb3RpZmljYXIgQWRtaW5dXG4gICAgTm90aWZ5QWRtaW4gLS0+IFBlbmRpbmdSZXZpZXdbUmV2aXNpXHUwMGYzbl1cbiAgICBQZW5kaW5nUmV2aWV3IC0tPiBFbmQzKFtGaW5dKVxuICAgIFxuICAgIHN0eWxlIFN0YXJ0IGZpbGw6IzkwRUU5MFxuICAgIHN0eWxlIEVuZDEgZmlsbDojODdDRUVCXG4gICAgc3R5bGUgRW5kMiBmaWxsOiNGRkE1MDBcbiAgICBzdHlsZSBFbmQzIGZpbGw6I0ZGQTUwMFxuICAgIHN0eWxlIEVycm9yT2xkUGFzcyBmaWxsOiNGRkI2QzFcbiAgICBzdHlsZSBFcnJvcldlYWsgZmlsbDojRkZCNkMxXG4gICAgc3R5bGUgRXJyb3JVc2VkIGZpbGw6I0ZGQjZDMSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImZsb3djaGFydCBURFxuICAgIFN0YXJ0KFtJbmljaW9dKSAtLT4gVmlld1Byb2ZpbGVbVmVyIHBlcmZpbF1cbiAgICBWaWV3UHJvZmlsZSAtLT4gU2VsZWN0QWN0aW9ue0FjY2lcdTAwZjNuP31cbiAgICBcbiAgICBTZWxlY3RBY3Rpb24gLS0+fEVkaXRhcnwgRWRpdFByb2ZpbGVcbiAgICBTZWxlY3RBY3Rpb24gLS0+fFBhc3N8IENoYW5nZVBhc3NcbiAgICBTZWxlY3RBY3Rpb24gLS0+fERlYWN0aXZhdGV8IERlYWN0aXZhdGVBY2NbRGVzYWN0aXZhcl1cbiAgICBTZWxlY3RBY3Rpb24gLS0+fERlbGV0ZXwgRGVsZXRlQWNjW0VsaW1pbmFyXVxuICAgIFxuICAgICUlIEVkaXQgUHJvZmlsZVxuICAgIEVkaXRQcm9maWxlIC0tPiBJbnB1dENoYW5nZXNbSW5ncmVzYXJdXG4gICAgSW5wdXRDaGFuZ2VzIC0tPiBWYWxpZGF0ZUNoYW5nZXN7Vlx1MDBlMWxpZG8/fVxuICAgIFZhbGlkYXRlQ2hhbmdlcyAtLSBObyAtLT4gU2hvd0Vycm9yc1tFcnJvcl1cbiAgICBTaG93RXJyb3JzIC0uLT4gSW5wdXRDaGFuZ2VzXG4gICAgVmFsaWRhdGVDaGFuZ2VzIC0tPnxTXHUwMGVkfCBTYXZlQ2hhbmdlc1tHdWFyZGFyXVxuICAgIFNhdmVDaGFuZ2VzIC0tPiBTdWNjZXNzTXNnW1x1MDBjOXhpdG9dXG4gICAgU3VjY2Vzc01zZyAtLT4gVmlld1Byb2ZpbGVcbiAgICBcbiAgICAlJSBDaGFuZ2UgUGFzc1xuICAgIENoYW5nZVBhc3MgLS0+IElucHV0T2xkUGFzc1tQYXNzIGFjdHVhbF1cbiAgICBJbnB1dE9sZFBhc3MgLS0+IFZlcmlmeU9sZFBhc3N7Q29ycmVjdGE/fVxuICAgIFZlcmlmeU9sZFBhc3MgLS0gTm8gLS0+IEVycm9yT2xkUGFzc1tFcnJvcl1cbiAgICBFcnJvck9sZFBhc3MgLS4tPiBDaGFuZ2VQYXNzXG4gICAgXG4gICAgVmVyaWZ5T2xkUGFzcyAtLT58U1x1MDBlZHwgSW5wdXROZXdQYXNzW051ZXZhIHBhc3NdXG4gICAgSW5wdXROZXdQYXNzIC0tPiBDaGVja1N0cmVuZ3Roe0Z1ZXJ0ZT99XG4gICAgQ2hlY2tTdHJlbmd0aCAtLSBObyAtLT4gRXJyb3JXZWFrW0RcdTAwZTliaWxdXG4gICAgRXJyb3JXZWFrIC0uLT4gSW5wdXROZXdQYXNzXG4gICAgXG4gICAgQ2hlY2tTdHJlbmd0aCAtLT58U1x1MDBlZHwgQ2hlY2tIaXN0b3J5e1VzYWRhP31cbiAgICBDaGVja0hpc3RvcnkgLS0gU1x1MDBlZCAtLT4gRXJyb3JVc2VkW1VzYWRhXVxuICAgIEVycm9yVXNlZCAtLi0+IElucHV0TmV3UGFzc1xuICAgIFxuICAgIENoZWNrSGlzdG9yeSAtLT58Tm98IFVwZGF0ZVBhc3NbQWN0dWFsaXphcl1cbiAgICBVcGRhdGVQYXNzIC0tPiBTYXZlSGlzdG9yeVtIaXN0b3JpYWxdXG4gICAgU2F2ZUhpc3RvcnkgLS0+IExvZ291dEFsbFtMb2dvdXQgYWxsXVxuICAgIExvZ291dEFsbCAtLT4gUmVkaXJlY3RbTG9naW5dXG4gICAgUmVkaXJlY3QgLS0+IEVuZDEoW0Zpbl0pXG4gICAgXG4gICAgJSUgRGVhY3RpdmF0ZVxuICAgIERlYWN0aXZhdGVBY2MgLS0+IENvbmZpcm1EZWFjdHtDb25maXJtYXI/fVxuICAgIENvbmZpcm1EZWFjdCAtLSBObyAtLT4gVmlld1Byb2ZpbGVcbiAgICBDb25maXJtRGVhY3QgLS0+fFNcdTAwZWR8IFNldFNlbGZEZWFjdFtEZXNhY3RpdmFyXVxuICAgIFNldFNlbGZEZWFjdCAtLT4gTG9nb3V0W0xvZ291dF1cbiAgICBMb2dvdXQgLS0+IEVuZDIoW0Zpbl0pXG4gICAgXG4gICAgJSUgRGVsZXRlXG4gICAgRGVsZXRlQWNjIC0tPiBDb25maXJtRGVsZXRle0NvbmZpcm1hcj99XG4gICAgQ29uZmlybURlbGV0ZSAtLSBObyAtLT4gVmlld1Byb2ZpbGVcbiAgICBDb25maXJtRGVsZXRlIC0tPnxTXHUwMGVkfCBOb3RpZnlBZG1pbltOb3RpZmljYXIgQWRtaW5dXG4gICAgTm90aWZ5QWRtaW4gLS0+IFBlbmRpbmdSZXZpZXdbUmV2aXNpXHUwMGYzbl1cbiAgICBQZW5kaW5nUmV2aWV3IC0tPiBFbmQzKFtGaW5dKVxuICAgIFxuICAgIHN0eWxlIFN0YXJ0IGZpbGw6IzkwRUU5MFxuICAgIHN0eWxlIEVuZDEgZmlsbDojODdDRUVCXG4gICAgc3R5bGUgRW5kMiBmaWxsOiNGRkE1MDBcbiAgICBzdHlsZSBFbmQzIGZpbGw6I0ZGQTUwMFxuICAgIHN0eWxlIEVycm9yT2xkUGFzcyBmaWxsOiNGRkI2QzFcbiAgICBzdHlsZSBFcnJvcldlYWsgZmlsbDojRkZCNkMxXG4gICAgc3R5bGUgRXJyb3JVc2VkIGZpbGw6I0ZGQjZDMSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TD
                        Start([Inicio]) --> ViewProfile[Ver perfil]
                        ViewProfile --> SelectAction{Acci√≥n?}
                        
                        SelectAction -->|Editar| EditProfile
                        SelectAction -->|Pass| ChangePass
                        SelectAction -->|Deactivate| DeactivateAcc[Desactivar]
                        SelectAction -->|Delete| DeleteAcc[Eliminar]
                        
                        %% Edit Profile
                        EditProfile --> InputChanges[Ingresar]
                        InputChanges --> ValidateChanges{V√°lido?}
                        ValidateChanges -->|No| ShowErrors[Error]
                        ShowErrors -.-> InputChanges
                        ValidateChanges -->|S√≠| SaveChanges[Guardar]
                        SaveChanges --> SuccessMsg[√âxito]
                        SuccessMsg --> ViewProfile
                        
                        %% Change Pass
                        ChangePass --> InputOldPass[Pass actual]
                        InputOldPass --> VerifyOldPass{Correcta?}
                        VerifyOldPass -->|No| ErrorOldPass[Error]
                        ErrorOldPass -.-> ChangePass
                        
                        VerifyOldPass -->|S√≠| InputNewPass[Nueva pass]
                        InputNewPass --> CheckStrength{Fuerte?}
                        CheckStrength -->|No| ErrorWeak[D√©bil]
                        ErrorWeak -.-> InputNewPass
                        
                        CheckStrength -->|S√≠| CheckHistory{Usada?}
                        CheckHistory -->|S√≠| ErrorUsed[Usada]
                        ErrorUsed -.-> InputNewPass
                        
                        CheckHistory -->|No| UpdatePass[Actualizar]
                        UpdatePass --> SaveHistory[Historial]
                        SaveHistory --> LogoutAll[Logout all]
                        LogoutAll --> Redirect[Login]
                        Redirect --> End1([Fin])
                        
                        %% Deactivate
                        DeactivateAcc --> ConfirmDeact{Confirmar?}
                        ConfirmDeact -->|No| ViewProfile
                        ConfirmDeact -->|S√≠| SetSelfDeact[Desactivar]
                        SetSelfDeact --> Logout[Logout]
                        Logout --> End2([Fin])
                        
                        %% Delete
                        DeleteAcc --> ConfirmDelete{Confirmar?}
                        ConfirmDelete -->|No| ViewProfile
                        ConfirmDelete -->|S√≠| NotifyAdmin[Notificar Admin]
                        NotifyAdmin --> PendingReview[Revisi√≥n]
                        PendingReview --> End3([Fin])
                        
                        style Start fill:#90EE90
                        style End1 fill:#87CEEB
                        style End2 fill:#FFA500
                        style End3 fill:#FFA500
                        style ErrorOldPass fill:#FFB6C1
                        style ErrorWeak fill:#FFB6C1
                        style ErrorUsed fill:#FFB6C1


.. dropdown:: üìä Diagrama Casos Uso (5 diagramas)
    :open:
    :class-container: sd-mb-4

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart LR
                        %% Actors on the Left
                        Admin((Administrador))
                        Proveedor((Proveedor))
                        Logistica((Log√≠stica))
                        Cliente((Cliente))
                        Sistema_Ext[Sistema Externo]
                    
                        %% System Boundary
                        subgraph Sistema_PREXCOL["SISTEMA PREXCOL"]
                            direction TB
                            
                            subgraph Autenticacion["M√≥dulo de Autenticaci√≥n"]
                                UC1[Registrarse]
                                UC2[Iniciar Sesi√≥n]
                                UC3[Recuperar Contrase√±a]
                                UC4[Cambiar Contrase√±a]
                                UC5[Gestionar Cuenta]
                            end
                    
                            subgraph Productos["M√≥dulo de Productos"]
                                UC6[Gestionar Tiendas]
                                UC7[Gestionar Productos]
                                UC8[Asignar Productos]
                                UC9[Navegar Cat√°logo]
                                UC10[Buscar Productos]
                            end
                    
                            subgraph Stock["M√≥dulo de Stock"]
                                UC11[Configurar Recarga Auto]
                                UC12[Recargar Stock Manual]
                                UC13[Ver Historial Recargas]
                                UC14[Monitorear Stock]
                            end
                    
                            subgraph Pedidos["M√≥dulo de Pedidos"]
                                UC15[Crear Pedido]
                                UC16[Procesar Pago]
                                UC17[Gestionar Pedidos]
                                UC18[Cambiar Estado Pedido]
                                UC19[Ver Mis Pedidos]
                            end
                    
                            subgraph Ventas["M√≥dulo de Ventas"]
                                UC20[Generar Venta]
                                UC21[Ver Historial Ventas]
                                UC22[Generar Reportes]
                            end
                    
                            subgraph Administracion["M√≥dulo de Administraci√≥n"]
                                UC26[Gestionar Usuarios]
                                UC27[Suspender Cuenta]
                                UC28[Ver Dashboard]
                                UC29[Configurar Sistema]
                            end
                            
                            subgraph Notificaciones["M√≥dulo de Notificaciones"]
                                UC23[Enviar Notificaci√≥n]
                                UC24[Ver Notificaciones]
                                UC25[Marcar como Le√≠da]
                            end
                        end
                    
                        %% Relationships - Organized to reduce crossing
                        %% Admin Connections
                        Admin --> UC1
                        Admin --> UC2
                        Admin --> UC6
                        Admin --> UC7
                        Admin --> UC8
                        Admin --> UC22
                        Admin --> UC26
                        Admin --> UC27
                        Admin --> UC28
                        
                        %% Provider Connections
                        Proveedor --> UC1
                        Proveedor --> UC2
                        Proveedor --> UC7
                        Proveedor --> UC11
                        Proveedor --> UC12
                        Proveedor --> UC13
                        Proveedor --> UC14
                        Proveedor --> UC22
                        
                        %% Logistica Connections
                        Logistica --> UC1
                        Logistica --> UC2
                        Logistica --> UC17
                        Logistica --> UC18
                        Logistica --> UC28
                        
                        %% Client Connections
                        Cliente --> UC1
                        Cliente --> UC2
                        Cliente --> UC9
                        Cliente --> UC10
                        Cliente --> UC15
                        Cliente --> UC16
                        Cliente --> UC19
                        Cliente --> UC24
                    
                        %% Include/Extend
                        UC16 -.-> Sistema_Ext
                        UC23 -.-> Sistema_Ext

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgJSUgQWN0b3JzIG9uIHRoZSBMZWZ0XG4gICAgQWRtaW4oKEFkbWluaXN0cmFkb3IpKVxuICAgIFByb3ZlZWRvcigoUHJvdmVlZG9yKSlcbiAgICBMb2dpc3RpY2EoKExvZ1x1MDBlZHN0aWNhKSlcbiAgICBDbGllbnRlKChDbGllbnRlKSlcbiAgICBTaXN0ZW1hX0V4dFtTaXN0ZW1hIEV4dGVybm9dXG5cbiAgICAlJSBTeXN0ZW0gQm91bmRhcnlcbiAgICBzdWJncmFwaCBTaXN0ZW1hX1BSRVhDT0xbXCJTSVNURU1BIFBSRVhDT0xcIl1cbiAgICAgICAgZGlyZWN0aW9uIFRCXG4gICAgICAgIFxuICAgICAgICBzdWJncmFwaCBBdXRlbnRpY2FjaW9uW1wiTVx1MDBmM2R1bG8gZGUgQXV0ZW50aWNhY2lcdTAwZjNuXCJdXG4gICAgICAgICAgICBVQzFbUmVnaXN0cmFyc2VdXG4gICAgICAgICAgICBVQzJbSW5pY2lhciBTZXNpXHUwMGYzbl1cbiAgICAgICAgICAgIFVDM1tSZWN1cGVyYXIgQ29udHJhc2VcdTAwZjFhXVxuICAgICAgICAgICAgVUM0W0NhbWJpYXIgQ29udHJhc2VcdTAwZjFhXVxuICAgICAgICAgICAgVUM1W0dlc3Rpb25hciBDdWVudGFdXG4gICAgICAgIGVuZFxuXG4gICAgICAgIHN1YmdyYXBoIFByb2R1Y3Rvc1tcIk1cdTAwZjNkdWxvIGRlIFByb2R1Y3Rvc1wiXVxuICAgICAgICAgICAgVUM2W0dlc3Rpb25hciBUaWVuZGFzXVxuICAgICAgICAgICAgVUM3W0dlc3Rpb25hciBQcm9kdWN0b3NdXG4gICAgICAgICAgICBVQzhbQXNpZ25hciBQcm9kdWN0b3NdXG4gICAgICAgICAgICBVQzlbTmF2ZWdhciBDYXRcdTAwZTFsb2dvXVxuICAgICAgICAgICAgVUMxMFtCdXNjYXIgUHJvZHVjdG9zXVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBTdG9ja1tcIk1cdTAwZjNkdWxvIGRlIFN0b2NrXCJdXG4gICAgICAgICAgICBVQzExW0NvbmZpZ3VyYXIgUmVjYXJnYSBBdXRvXVxuICAgICAgICAgICAgVUMxMltSZWNhcmdhciBTdG9jayBNYW51YWxdXG4gICAgICAgICAgICBVQzEzW1ZlciBIaXN0b3JpYWwgUmVjYXJnYXNdXG4gICAgICAgICAgICBVQzE0W01vbml0b3JlYXIgU3RvY2tdXG4gICAgICAgIGVuZFxuXG4gICAgICAgIHN1YmdyYXBoIFBlZGlkb3NbXCJNXHUwMGYzZHVsbyBkZSBQZWRpZG9zXCJdXG4gICAgICAgICAgICBVQzE1W0NyZWFyIFBlZGlkb11cbiAgICAgICAgICAgIFVDMTZbUHJvY2VzYXIgUGFnb11cbiAgICAgICAgICAgIFVDMTdbR2VzdGlvbmFyIFBlZGlkb3NdXG4gICAgICAgICAgICBVQzE4W0NhbWJpYXIgRXN0YWRvIFBlZGlkb11cbiAgICAgICAgICAgIFVDMTlbVmVyIE1pcyBQZWRpZG9zXVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBWZW50YXNbXCJNXHUwMGYzZHVsbyBkZSBWZW50YXNcIl1cbiAgICAgICAgICAgIFVDMjBbR2VuZXJhciBWZW50YV1cbiAgICAgICAgICAgIFVDMjFbVmVyIEhpc3RvcmlhbCBWZW50YXNdXG4gICAgICAgICAgICBVQzIyW0dlbmVyYXIgUmVwb3J0ZXNdXG4gICAgICAgIGVuZFxuXG4gICAgICAgIHN1YmdyYXBoIEFkbWluaXN0cmFjaW9uW1wiTVx1MDBmM2R1bG8gZGUgQWRtaW5pc3RyYWNpXHUwMGYzblwiXVxuICAgICAgICAgICAgVUMyNltHZXN0aW9uYXIgVXN1YXJpb3NdXG4gICAgICAgICAgICBVQzI3W1N1c3BlbmRlciBDdWVudGFdXG4gICAgICAgICAgICBVQzI4W1ZlciBEYXNoYm9hcmRdXG4gICAgICAgICAgICBVQzI5W0NvbmZpZ3VyYXIgU2lzdGVtYV1cbiAgICAgICAgZW5kXG4gICAgICAgIFxuICAgICAgICBzdWJncmFwaCBOb3RpZmljYWNpb25lc1tcIk1cdTAwZjNkdWxvIGRlIE5vdGlmaWNhY2lvbmVzXCJdXG4gICAgICAgICAgICBVQzIzW0VudmlhciBOb3RpZmljYWNpXHUwMGYzbl1cbiAgICAgICAgICAgIFVDMjRbVmVyIE5vdGlmaWNhY2lvbmVzXVxuICAgICAgICAgICAgVUMyNVtNYXJjYXIgY29tbyBMZVx1MDBlZGRhXVxuICAgICAgICBlbmRcbiAgICBlbmRcblxuICAgICUlIFJlbGF0aW9uc2hpcHMgLSBPcmdhbml6ZWQgdG8gcmVkdWNlIGNyb3NzaW5nXG4gICAgJSUgQWRtaW4gQ29ubmVjdGlvbnNcbiAgICBBZG1pbiAtLT4gVUMxXG4gICAgQWRtaW4gLS0+IFVDMlxuICAgIEFkbWluIC0tPiBVQzZcbiAgICBBZG1pbiAtLT4gVUM3XG4gICAgQWRtaW4gLS0+IFVDOFxuICAgIEFkbWluIC0tPiBVQzIyXG4gICAgQWRtaW4gLS0+IFVDMjZcbiAgICBBZG1pbiAtLT4gVUMyN1xuICAgIEFkbWluIC0tPiBVQzI4XG4gICAgXG4gICAgJSUgUHJvdmlkZXIgQ29ubmVjdGlvbnNcbiAgICBQcm92ZWVkb3IgLS0+IFVDMVxuICAgIFByb3ZlZWRvciAtLT4gVUMyXG4gICAgUHJvdmVlZG9yIC0tPiBVQzdcbiAgICBQcm92ZWVkb3IgLS0+IFVDMTFcbiAgICBQcm92ZWVkb3IgLS0+IFVDMTJcbiAgICBQcm92ZWVkb3IgLS0+IFVDMTNcbiAgICBQcm92ZWVkb3IgLS0+IFVDMTRcbiAgICBQcm92ZWVkb3IgLS0+IFVDMjJcbiAgICBcbiAgICAlJSBMb2dpc3RpY2EgQ29ubmVjdGlvbnNcbiAgICBMb2dpc3RpY2EgLS0+IFVDMVxuICAgIExvZ2lzdGljYSAtLT4gVUMyXG4gICAgTG9naXN0aWNhIC0tPiBVQzE3XG4gICAgTG9naXN0aWNhIC0tPiBVQzE4XG4gICAgTG9naXN0aWNhIC0tPiBVQzI4XG4gICAgXG4gICAgJSUgQ2xpZW50IENvbm5lY3Rpb25zXG4gICAgQ2xpZW50ZSAtLT4gVUMxXG4gICAgQ2xpZW50ZSAtLT4gVUMyXG4gICAgQ2xpZW50ZSAtLT4gVUM5XG4gICAgQ2xpZW50ZSAtLT4gVUMxMFxuICAgIENsaWVudGUgLS0+IFVDMTVcbiAgICBDbGllbnRlIC0tPiBVQzE2XG4gICAgQ2xpZW50ZSAtLT4gVUMxOVxuICAgIENsaWVudGUgLS0+IFVDMjRcblxuICAgICUlIEluY2x1ZGUvRXh0ZW5kXG4gICAgVUMxNiAtLi0+IFNpc3RlbWFfRXh0XG4gICAgVUMyMyAtLi0+IFNpc3RlbWFfRXh0IiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgJSUgQWN0b3JzIG9uIHRoZSBMZWZ0XG4gICAgQWRtaW4oKEFkbWluaXN0cmFkb3IpKVxuICAgIFByb3ZlZWRvcigoUHJvdmVlZG9yKSlcbiAgICBMb2dpc3RpY2EoKExvZ1x1MDBlZHN0aWNhKSlcbiAgICBDbGllbnRlKChDbGllbnRlKSlcbiAgICBTaXN0ZW1hX0V4dFtTaXN0ZW1hIEV4dGVybm9dXG5cbiAgICAlJSBTeXN0ZW0gQm91bmRhcnlcbiAgICBzdWJncmFwaCBTaXN0ZW1hX1BSRVhDT0xbXCJTSVNURU1BIFBSRVhDT0xcIl1cbiAgICAgICAgZGlyZWN0aW9uIFRCXG4gICAgICAgIFxuICAgICAgICBzdWJncmFwaCBBdXRlbnRpY2FjaW9uW1wiTVx1MDBmM2R1bG8gZGUgQXV0ZW50aWNhY2lcdTAwZjNuXCJdXG4gICAgICAgICAgICBVQzFbUmVnaXN0cmFyc2VdXG4gICAgICAgICAgICBVQzJbSW5pY2lhciBTZXNpXHUwMGYzbl1cbiAgICAgICAgICAgIFVDM1tSZWN1cGVyYXIgQ29udHJhc2VcdTAwZjFhXVxuICAgICAgICAgICAgVUM0W0NhbWJpYXIgQ29udHJhc2VcdTAwZjFhXVxuICAgICAgICAgICAgVUM1W0dlc3Rpb25hciBDdWVudGFdXG4gICAgICAgIGVuZFxuXG4gICAgICAgIHN1YmdyYXBoIFByb2R1Y3Rvc1tcIk1cdTAwZjNkdWxvIGRlIFByb2R1Y3Rvc1wiXVxuICAgICAgICAgICAgVUM2W0dlc3Rpb25hciBUaWVuZGFzXVxuICAgICAgICAgICAgVUM3W0dlc3Rpb25hciBQcm9kdWN0b3NdXG4gICAgICAgICAgICBVQzhbQXNpZ25hciBQcm9kdWN0b3NdXG4gICAgICAgICAgICBVQzlbTmF2ZWdhciBDYXRcdTAwZTFsb2dvXVxuICAgICAgICAgICAgVUMxMFtCdXNjYXIgUHJvZHVjdG9zXVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBTdG9ja1tcIk1cdTAwZjNkdWxvIGRlIFN0b2NrXCJdXG4gICAgICAgICAgICBVQzExW0NvbmZpZ3VyYXIgUmVjYXJnYSBBdXRvXVxuICAgICAgICAgICAgVUMxMltSZWNhcmdhciBTdG9jayBNYW51YWxdXG4gICAgICAgICAgICBVQzEzW1ZlciBIaXN0b3JpYWwgUmVjYXJnYXNdXG4gICAgICAgICAgICBVQzE0W01vbml0b3JlYXIgU3RvY2tdXG4gICAgICAgIGVuZFxuXG4gICAgICAgIHN1YmdyYXBoIFBlZGlkb3NbXCJNXHUwMGYzZHVsbyBkZSBQZWRpZG9zXCJdXG4gICAgICAgICAgICBVQzE1W0NyZWFyIFBlZGlkb11cbiAgICAgICAgICAgIFVDMTZbUHJvY2VzYXIgUGFnb11cbiAgICAgICAgICAgIFVDMTdbR2VzdGlvbmFyIFBlZGlkb3NdXG4gICAgICAgICAgICBVQzE4W0NhbWJpYXIgRXN0YWRvIFBlZGlkb11cbiAgICAgICAgICAgIFVDMTlbVmVyIE1pcyBQZWRpZG9zXVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBWZW50YXNbXCJNXHUwMGYzZHVsbyBkZSBWZW50YXNcIl1cbiAgICAgICAgICAgIFVDMjBbR2VuZXJhciBWZW50YV1cbiAgICAgICAgICAgIFVDMjFbVmVyIEhpc3RvcmlhbCBWZW50YXNdXG4gICAgICAgICAgICBVQzIyW0dlbmVyYXIgUmVwb3J0ZXNdXG4gICAgICAgIGVuZFxuXG4gICAgICAgIHN1YmdyYXBoIEFkbWluaXN0cmFjaW9uW1wiTVx1MDBmM2R1bG8gZGUgQWRtaW5pc3RyYWNpXHUwMGYzblwiXVxuICAgICAgICAgICAgVUMyNltHZXN0aW9uYXIgVXN1YXJpb3NdXG4gICAgICAgICAgICBVQzI3W1N1c3BlbmRlciBDdWVudGFdXG4gICAgICAgICAgICBVQzI4W1ZlciBEYXNoYm9hcmRdXG4gICAgICAgICAgICBVQzI5W0NvbmZpZ3VyYXIgU2lzdGVtYV1cbiAgICAgICAgZW5kXG4gICAgICAgIFxuICAgICAgICBzdWJncmFwaCBOb3RpZmljYWNpb25lc1tcIk1cdTAwZjNkdWxvIGRlIE5vdGlmaWNhY2lvbmVzXCJdXG4gICAgICAgICAgICBVQzIzW0VudmlhciBOb3RpZmljYWNpXHUwMGYzbl1cbiAgICAgICAgICAgIFVDMjRbVmVyIE5vdGlmaWNhY2lvbmVzXVxuICAgICAgICAgICAgVUMyNVtNYXJjYXIgY29tbyBMZVx1MDBlZGRhXVxuICAgICAgICBlbmRcbiAgICBlbmRcblxuICAgICUlIFJlbGF0aW9uc2hpcHMgLSBPcmdhbml6ZWQgdG8gcmVkdWNlIGNyb3NzaW5nXG4gICAgJSUgQWRtaW4gQ29ubmVjdGlvbnNcbiAgICBBZG1pbiAtLT4gVUMxXG4gICAgQWRtaW4gLS0+IFVDMlxuICAgIEFkbWluIC0tPiBVQzZcbiAgICBBZG1pbiAtLT4gVUM3XG4gICAgQWRtaW4gLS0+IFVDOFxuICAgIEFkbWluIC0tPiBVQzIyXG4gICAgQWRtaW4gLS0+IFVDMjZcbiAgICBBZG1pbiAtLT4gVUMyN1xuICAgIEFkbWluIC0tPiBVQzI4XG4gICAgXG4gICAgJSUgUHJvdmlkZXIgQ29ubmVjdGlvbnNcbiAgICBQcm92ZWVkb3IgLS0+IFVDMVxuICAgIFByb3ZlZWRvciAtLT4gVUMyXG4gICAgUHJvdmVlZG9yIC0tPiBVQzdcbiAgICBQcm92ZWVkb3IgLS0+IFVDMTFcbiAgICBQcm92ZWVkb3IgLS0+IFVDMTJcbiAgICBQcm92ZWVkb3IgLS0+IFVDMTNcbiAgICBQcm92ZWVkb3IgLS0+IFVDMTRcbiAgICBQcm92ZWVkb3IgLS0+IFVDMjJcbiAgICBcbiAgICAlJSBMb2dpc3RpY2EgQ29ubmVjdGlvbnNcbiAgICBMb2dpc3RpY2EgLS0+IFVDMVxuICAgIExvZ2lzdGljYSAtLT4gVUMyXG4gICAgTG9naXN0aWNhIC0tPiBVQzE3XG4gICAgTG9naXN0aWNhIC0tPiBVQzE4XG4gICAgTG9naXN0aWNhIC0tPiBVQzI4XG4gICAgXG4gICAgJSUgQ2xpZW50IENvbm5lY3Rpb25zXG4gICAgQ2xpZW50ZSAtLT4gVUMxXG4gICAgQ2xpZW50ZSAtLT4gVUMyXG4gICAgQ2xpZW50ZSAtLT4gVUM5XG4gICAgQ2xpZW50ZSAtLT4gVUMxMFxuICAgIENsaWVudGUgLS0+IFVDMTVcbiAgICBDbGllbnRlIC0tPiBVQzE2XG4gICAgQ2xpZW50ZSAtLT4gVUMxOVxuICAgIENsaWVudGUgLS0+IFVDMjRcblxuICAgICUlIEluY2x1ZGUvRXh0ZW5kXG4gICAgVUMxNiAtLi0+IFNpc3RlbWFfRXh0XG4gICAgVUMyMyAtLi0+IFNpc3RlbWFfRXh0IiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart LR
                        %% Actors on the Left
                        Admin((Administrador))
                        Proveedor((Proveedor))
                        Logistica((Log√≠stica))
                        Cliente((Cliente))
                        Sistema_Ext[Sistema Externo]
                    
                        %% System Boundary
                        subgraph Sistema_PREXCOL["SISTEMA PREXCOL"]
                            direction TB
                            
                            subgraph Autenticacion["M√≥dulo de Autenticaci√≥n"]
                                UC1[Registrarse]
                                UC2[Iniciar Sesi√≥n]
                                UC3[Recuperar Contrase√±a]
                                UC4[Cambiar Contrase√±a]
                                UC5[Gestionar Cuenta]
                            end
                    
                            subgraph Productos["M√≥dulo de Productos"]
                                UC6[Gestionar Tiendas]
                                UC7[Gestionar Productos]
                                UC8[Asignar Productos]
                                UC9[Navegar Cat√°logo]
                                UC10[Buscar Productos]
                            end
                    
                            subgraph Stock["M√≥dulo de Stock"]
                                UC11[Configurar Recarga Auto]
                                UC12[Recargar Stock Manual]
                                UC13[Ver Historial Recargas]
                                UC14[Monitorear Stock]
                            end
                    
                            subgraph Pedidos["M√≥dulo de Pedidos"]
                                UC15[Crear Pedido]
                                UC16[Procesar Pago]
                                UC17[Gestionar Pedidos]
                                UC18[Cambiar Estado Pedido]
                                UC19[Ver Mis Pedidos]
                            end
                    
                            subgraph Ventas["M√≥dulo de Ventas"]
                                UC20[Generar Venta]
                                UC21[Ver Historial Ventas]
                                UC22[Generar Reportes]
                            end
                    
                            subgraph Administracion["M√≥dulo de Administraci√≥n"]
                                UC26[Gestionar Usuarios]
                                UC27[Suspender Cuenta]
                                UC28[Ver Dashboard]
                                UC29[Configurar Sistema]
                            end
                            
                            subgraph Notificaciones["M√≥dulo de Notificaciones"]
                                UC23[Enviar Notificaci√≥n]
                                UC24[Ver Notificaciones]
                                UC25[Marcar como Le√≠da]
                            end
                        end
                    
                        %% Relationships - Organized to reduce crossing
                        %% Admin Connections
                        Admin --> UC1
                        Admin --> UC2
                        Admin --> UC6
                        Admin --> UC7
                        Admin --> UC8
                        Admin --> UC22
                        Admin --> UC26
                        Admin --> UC27
                        Admin --> UC28
                        
                        %% Provider Connections
                        Proveedor --> UC1
                        Proveedor --> UC2
                        Proveedor --> UC7
                        Proveedor --> UC11
                        Proveedor --> UC12
                        Proveedor --> UC13
                        Proveedor --> UC14
                        Proveedor --> UC22
                        
                        %% Logistica Connections
                        Logistica --> UC1
                        Logistica --> UC2
                        Logistica --> UC17
                        Logistica --> UC18
                        Logistica --> UC28
                        
                        %% Client Connections
                        Cliente --> UC1
                        Cliente --> UC2
                        Cliente --> UC9
                        Cliente --> UC10
                        Cliente --> UC15
                        Cliente --> UC16
                        Cliente --> UC19
                        Cliente --> UC24
                    
                        %% Include/Extend
                        UC16 -.-> Sistema_Ext
                        UC23 -.-> Sistema_Ext

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart LR
                        Admin((Administrador))
                        
                        subgraph CU_Admin["Casos de Uso del Administrador"]
                            direction TB
                            A1[Gestionar Tiendas]
                            A2[Gestionar Productos]
                            A3[""""Asignar Productos<br/>a Proveedor""""]
                            A4[Gestionar Usuarios]
                            A5[""""Suspender/Reactivar<br/>Cuentas""""]
                            A6[Ver Dashboard Global]
                            A7[""""Generar Reportes<br/>Completos""""]
                            A8[Configurar Sistema]
                            A9[Ver M√©tricas KPI]
                        end
                    
                        Admin --> A1
                        Admin --> A2
                        Admin --> A3
                        Admin --> A4
                        Admin --> A5
                        Admin --> A6
                        Admin --> A7
                        Admin --> A8
                        Admin --> A9
                    
                        A3 -.include.-> A2
                        A7 -.include.-> A6

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgQWRtaW4oKEFkbWluaXN0cmFkb3IpKVxuICAgIFxuICAgIHN1YmdyYXBoIENVX0FkbWluW1wiQ2Fzb3MgZGUgVXNvIGRlbCBBZG1pbmlzdHJhZG9yXCJdXG4gICAgICAgIGRpcmVjdGlvbiBUQlxuICAgICAgICBBMVtHZXN0aW9uYXIgVGllbmRhc11cbiAgICAgICAgQTJbR2VzdGlvbmFyIFByb2R1Y3Rvc11cbiAgICAgICAgQTNbQXNpZ25hciBQcm9kdWN0b3M8YnIvPmEgUHJvdmVlZG9yXVxuICAgICAgICBBNFtHZXN0aW9uYXIgVXN1YXJpb3NdXG4gICAgICAgIEE1W1N1c3BlbmRlci9SZWFjdGl2YXI8YnIvPkN1ZW50YXNdXG4gICAgICAgIEE2W1ZlciBEYXNoYm9hcmQgR2xvYmFsXVxuICAgICAgICBBN1tHZW5lcmFyIFJlcG9ydGVzPGJyLz5Db21wbGV0b3NdXG4gICAgICAgIEE4W0NvbmZpZ3VyYXIgU2lzdGVtYV1cbiAgICAgICAgQTlbVmVyIE1cdTAwZTl0cmljYXMgS1BJXVxuICAgIGVuZFxuXG4gICAgQWRtaW4gLS0+IEExXG4gICAgQWRtaW4gLS0+IEEyXG4gICAgQWRtaW4gLS0+IEEzXG4gICAgQWRtaW4gLS0+IEE0XG4gICAgQWRtaW4gLS0+IEE1XG4gICAgQWRtaW4gLS0+IEE2XG4gICAgQWRtaW4gLS0+IEE3XG4gICAgQWRtaW4gLS0+IEE4XG4gICAgQWRtaW4gLS0+IEE5XG5cbiAgICBBMyAtLmluY2x1ZGUuLT4gQTJcbiAgICBBNyAtLmluY2x1ZGUuLT4gQTYiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgQWRtaW4oKEFkbWluaXN0cmFkb3IpKVxuICAgIFxuICAgIHN1YmdyYXBoIENVX0FkbWluW1wiQ2Fzb3MgZGUgVXNvIGRlbCBBZG1pbmlzdHJhZG9yXCJdXG4gICAgICAgIGRpcmVjdGlvbiBUQlxuICAgICAgICBBMVtHZXN0aW9uYXIgVGllbmRhc11cbiAgICAgICAgQTJbR2VzdGlvbmFyIFByb2R1Y3Rvc11cbiAgICAgICAgQTNbQXNpZ25hciBQcm9kdWN0b3M8YnIvPmEgUHJvdmVlZG9yXVxuICAgICAgICBBNFtHZXN0aW9uYXIgVXN1YXJpb3NdXG4gICAgICAgIEE1W1N1c3BlbmRlci9SZWFjdGl2YXI8YnIvPkN1ZW50YXNdXG4gICAgICAgIEE2W1ZlciBEYXNoYm9hcmQgR2xvYmFsXVxuICAgICAgICBBN1tHZW5lcmFyIFJlcG9ydGVzPGJyLz5Db21wbGV0b3NdXG4gICAgICAgIEE4W0NvbmZpZ3VyYXIgU2lzdGVtYV1cbiAgICAgICAgQTlbVmVyIE1cdTAwZTl0cmljYXMgS1BJXVxuICAgIGVuZFxuXG4gICAgQWRtaW4gLS0+IEExXG4gICAgQWRtaW4gLS0+IEEyXG4gICAgQWRtaW4gLS0+IEEzXG4gICAgQWRtaW4gLS0+IEE0XG4gICAgQWRtaW4gLS0+IEE1XG4gICAgQWRtaW4gLS0+IEE2XG4gICAgQWRtaW4gLS0+IEE3XG4gICAgQWRtaW4gLS0+IEE4XG4gICAgQWRtaW4gLS0+IEE5XG5cbiAgICBBMyAtLmluY2x1ZGUuLT4gQTJcbiAgICBBNyAtLmluY2x1ZGUuLT4gQTYiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart LR
                        Admin((Administrador))
                        
                        subgraph CU_Admin["Casos de Uso del Administrador"]
                            direction TB
                            A1[Gestionar Tiendas]
                            A2[Gestionar Productos]
                            A3[""""Asignar Productos<br/>a Proveedor""""]
                            A4[Gestionar Usuarios]
                            A5[""""Suspender/Reactivar<br/>Cuentas""""]
                            A6[Ver Dashboard Global]
                            A7[""""Generar Reportes<br/>Completos""""]
                            A8[Configurar Sistema]
                            A9[Ver M√©tricas KPI]
                        end
                    
                        Admin --> A1
                        Admin --> A2
                        Admin --> A3
                        Admin --> A4
                        Admin --> A5
                        Admin --> A6
                        Admin --> A7
                        Admin --> A8
                        Admin --> A9
                    
                        A3 -.include.-> A2
                        A7 -.include.-> A6

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart LR
                        Proveedor((Proveedor))
                        
                        subgraph CU_Proveedor["Casos de Uso del Proveedor"]
                            direction TB
                            P1[Ver Productos Asignados]
                            P2[Actualizar Stock]
                            P3[""""Configurar Recarga<br/>Autom√°tica""""]
                            P4[""""Realizar Recarga<br/>Manual""""]
                            P5[""""Ver Historial<br/>de Recargas""""]
                            P6[""""Editar Informaci√≥n<br/>de Producto""""]
                            P7[""""Subir Im√°genes<br/>de Producto""""]
                            P8[""""Ver Reportes<br/>de Stock""""]
                            P9[""""Recibir Alertas<br/>Stock Bajo""""]
                        end
                    
                        Proveedor --> P1
                        Proveedor --> P2
                        Proveedor --> P3
                        Proveedor --> P4
                        Proveedor --> P5
                        Proveedor --> P6
                        Proveedor --> P7
                        Proveedor --> P8
                        Proveedor --> P9
                    
                        P2 -.extend.-> P4
                        P3 -.include.-> P1

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgUHJvdmVlZG9yKChQcm92ZWVkb3IpKVxuICAgIFxuICAgIHN1YmdyYXBoIENVX1Byb3ZlZWRvcltcIkNhc29zIGRlIFVzbyBkZWwgUHJvdmVlZG9yXCJdXG4gICAgICAgIGRpcmVjdGlvbiBUQlxuICAgICAgICBQMVtWZXIgUHJvZHVjdG9zIEFzaWduYWRvc11cbiAgICAgICAgUDJbQWN0dWFsaXphciBTdG9ja11cbiAgICAgICAgUDNbQ29uZmlndXJhciBSZWNhcmdhPGJyLz5BdXRvbVx1MDBlMXRpY2FdXG4gICAgICAgIFA0W1JlYWxpemFyIFJlY2FyZ2E8YnIvPk1hbnVhbF1cbiAgICAgICAgUDVbVmVyIEhpc3RvcmlhbDxici8+ZGUgUmVjYXJnYXNdXG4gICAgICAgIFA2W0VkaXRhciBJbmZvcm1hY2lcdTAwZjNuPGJyLz5kZSBQcm9kdWN0b11cbiAgICAgICAgUDdbU3ViaXIgSW1cdTAwZTFnZW5lczxici8+ZGUgUHJvZHVjdG9dXG4gICAgICAgIFA4W1ZlciBSZXBvcnRlczxici8+ZGUgU3RvY2tdXG4gICAgICAgIFA5W1JlY2liaXIgQWxlcnRhczxici8+U3RvY2sgQmFqb11cbiAgICBlbmRcblxuICAgIFByb3ZlZWRvciAtLT4gUDFcbiAgICBQcm92ZWVkb3IgLS0+IFAyXG4gICAgUHJvdmVlZG9yIC0tPiBQM1xuICAgIFByb3ZlZWRvciAtLT4gUDRcbiAgICBQcm92ZWVkb3IgLS0+IFA1XG4gICAgUHJvdmVlZG9yIC0tPiBQNlxuICAgIFByb3ZlZWRvciAtLT4gUDdcbiAgICBQcm92ZWVkb3IgLS0+IFA4XG4gICAgUHJvdmVlZG9yIC0tPiBQOVxuXG4gICAgUDIgLS5leHRlbmQuLT4gUDRcbiAgICBQMyAtLmluY2x1ZGUuLT4gUDEiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgUHJvdmVlZG9yKChQcm92ZWVkb3IpKVxuICAgIFxuICAgIHN1YmdyYXBoIENVX1Byb3ZlZWRvcltcIkNhc29zIGRlIFVzbyBkZWwgUHJvdmVlZG9yXCJdXG4gICAgICAgIGRpcmVjdGlvbiBUQlxuICAgICAgICBQMVtWZXIgUHJvZHVjdG9zIEFzaWduYWRvc11cbiAgICAgICAgUDJbQWN0dWFsaXphciBTdG9ja11cbiAgICAgICAgUDNbQ29uZmlndXJhciBSZWNhcmdhPGJyLz5BdXRvbVx1MDBlMXRpY2FdXG4gICAgICAgIFA0W1JlYWxpemFyIFJlY2FyZ2E8YnIvPk1hbnVhbF1cbiAgICAgICAgUDVbVmVyIEhpc3RvcmlhbDxici8+ZGUgUmVjYXJnYXNdXG4gICAgICAgIFA2W0VkaXRhciBJbmZvcm1hY2lcdTAwZjNuPGJyLz5kZSBQcm9kdWN0b11cbiAgICAgICAgUDdbU3ViaXIgSW1cdTAwZTFnZW5lczxici8+ZGUgUHJvZHVjdG9dXG4gICAgICAgIFA4W1ZlciBSZXBvcnRlczxici8+ZGUgU3RvY2tdXG4gICAgICAgIFA5W1JlY2liaXIgQWxlcnRhczxici8+U3RvY2sgQmFqb11cbiAgICBlbmRcblxuICAgIFByb3ZlZWRvciAtLT4gUDFcbiAgICBQcm92ZWVkb3IgLS0+IFAyXG4gICAgUHJvdmVlZG9yIC0tPiBQM1xuICAgIFByb3ZlZWRvciAtLT4gUDRcbiAgICBQcm92ZWVkb3IgLS0+IFA1XG4gICAgUHJvdmVlZG9yIC0tPiBQNlxuICAgIFByb3ZlZWRvciAtLT4gUDdcbiAgICBQcm92ZWVkb3IgLS0+IFA4XG4gICAgUHJvdmVlZG9yIC0tPiBQOVxuXG4gICAgUDIgLS5leHRlbmQuLT4gUDRcbiAgICBQMyAtLmluY2x1ZGUuLT4gUDEiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart LR
                        Proveedor((Proveedor))
                        
                        subgraph CU_Proveedor["Casos de Uso del Proveedor"]
                            direction TB
                            P1[Ver Productos Asignados]
                            P2[Actualizar Stock]
                            P3[""""Configurar Recarga<br/>Autom√°tica""""]
                            P4[""""Realizar Recarga<br/>Manual""""]
                            P5[""""Ver Historial<br/>de Recargas""""]
                            P6[""""Editar Informaci√≥n<br/>de Producto""""]
                            P7[""""Subir Im√°genes<br/>de Producto""""]
                            P8[""""Ver Reportes<br/>de Stock""""]
                            P9[""""Recibir Alertas<br/>Stock Bajo""""]
                        end
                    
                        Proveedor --> P1
                        Proveedor --> P2
                        Proveedor --> P3
                        Proveedor --> P4
                        Proveedor --> P5
                        Proveedor --> P6
                        Proveedor --> P7
                        Proveedor --> P8
                        Proveedor --> P9
                    
                        P2 -.extend.-> P4
                        P3 -.include.-> P1

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart LR
                        Logistica((Log√≠stica))
                        
                        subgraph CU_Logistica["Casos de Uso de Log√≠stica"]
                            direction TB
                            L1[""""Ver Pedidos<br/>Pendientes""""]
                            L2[""""Iniciar Preparaci√≥n<br/>de Pedido""""]
                            L3[""""Cambiar Estado<br/>a EN_TRANSITO""""]
                            L4[""""Cambiar Estado<br/>a ENTREGADO""""]
                            L5[""""Reportar Problema<br/>en Entrega""""]
                            L6[""""Ver Detalles<br/>de Pedido""""]
                            L7[Asignar Transportista]
                            L8[""""Ver Dashboard<br/>Log√≠stica""""]
                            L9[""""Generar Reporte<br/>de Entregas""""]
                        end
                    
                        Logistica --> L1
                        Logistica --> L2
                        Logistica --> L3
                        Logistica --> L4
                        Logistica --> L5
                        Logistica --> L6
                        Logistica --> L7
                        Logistica --> L8
                        Logistica --> L9
                    
                        L2 -.include.-> L6
                        L3 -.extend.-> L7

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgTG9naXN0aWNhKChMb2dcdTAwZWRzdGljYSkpXG4gICAgXG4gICAgc3ViZ3JhcGggQ1VfTG9naXN0aWNhW1wiQ2Fzb3MgZGUgVXNvIGRlIExvZ1x1MDBlZHN0aWNhXCJdXG4gICAgICAgIGRpcmVjdGlvbiBUQlxuICAgICAgICBMMVtWZXIgUGVkaWRvczxici8+UGVuZGllbnRlc11cbiAgICAgICAgTDJbSW5pY2lhciBQcmVwYXJhY2lcdTAwZjNuPGJyLz5kZSBQZWRpZG9dXG4gICAgICAgIEwzW0NhbWJpYXIgRXN0YWRvPGJyLz5hIEVOX1RSQU5TSVRPXVxuICAgICAgICBMNFtDYW1iaWFyIEVzdGFkbzxici8+YSBFTlRSRUdBRE9dXG4gICAgICAgIEw1W1JlcG9ydGFyIFByb2JsZW1hPGJyLz5lbiBFbnRyZWdhXVxuICAgICAgICBMNltWZXIgRGV0YWxsZXM8YnIvPmRlIFBlZGlkb11cbiAgICAgICAgTDdbQXNpZ25hciBUcmFuc3BvcnRpc3RhXVxuICAgICAgICBMOFtWZXIgRGFzaGJvYXJkPGJyLz5Mb2dcdTAwZWRzdGljYV1cbiAgICAgICAgTDlbR2VuZXJhciBSZXBvcnRlPGJyLz5kZSBFbnRyZWdhc11cbiAgICBlbmRcblxuICAgIExvZ2lzdGljYSAtLT4gTDFcbiAgICBMb2dpc3RpY2EgLS0+IEwyXG4gICAgTG9naXN0aWNhIC0tPiBMM1xuICAgIExvZ2lzdGljYSAtLT4gTDRcbiAgICBMb2dpc3RpY2EgLS0+IEw1XG4gICAgTG9naXN0aWNhIC0tPiBMNlxuICAgIExvZ2lzdGljYSAtLT4gTDdcbiAgICBMb2dpc3RpY2EgLS0+IEw4XG4gICAgTG9naXN0aWNhIC0tPiBMOVxuXG4gICAgTDIgLS5pbmNsdWRlLi0+IEw2XG4gICAgTDMgLS5leHRlbmQuLT4gTDciLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgTG9naXN0aWNhKChMb2dcdTAwZWRzdGljYSkpXG4gICAgXG4gICAgc3ViZ3JhcGggQ1VfTG9naXN0aWNhW1wiQ2Fzb3MgZGUgVXNvIGRlIExvZ1x1MDBlZHN0aWNhXCJdXG4gICAgICAgIGRpcmVjdGlvbiBUQlxuICAgICAgICBMMVtWZXIgUGVkaWRvczxici8+UGVuZGllbnRlc11cbiAgICAgICAgTDJbSW5pY2lhciBQcmVwYXJhY2lcdTAwZjNuPGJyLz5kZSBQZWRpZG9dXG4gICAgICAgIEwzW0NhbWJpYXIgRXN0YWRvPGJyLz5hIEVOX1RSQU5TSVRPXVxuICAgICAgICBMNFtDYW1iaWFyIEVzdGFkbzxici8+YSBFTlRSRUdBRE9dXG4gICAgICAgIEw1W1JlcG9ydGFyIFByb2JsZW1hPGJyLz5lbiBFbnRyZWdhXVxuICAgICAgICBMNltWZXIgRGV0YWxsZXM8YnIvPmRlIFBlZGlkb11cbiAgICAgICAgTDdbQXNpZ25hciBUcmFuc3BvcnRpc3RhXVxuICAgICAgICBMOFtWZXIgRGFzaGJvYXJkPGJyLz5Mb2dcdTAwZWRzdGljYV1cbiAgICAgICAgTDlbR2VuZXJhciBSZXBvcnRlPGJyLz5kZSBFbnRyZWdhc11cbiAgICBlbmRcblxuICAgIExvZ2lzdGljYSAtLT4gTDFcbiAgICBMb2dpc3RpY2EgLS0+IEwyXG4gICAgTG9naXN0aWNhIC0tPiBMM1xuICAgIExvZ2lzdGljYSAtLT4gTDRcbiAgICBMb2dpc3RpY2EgLS0+IEw1XG4gICAgTG9naXN0aWNhIC0tPiBMNlxuICAgIExvZ2lzdGljYSAtLT4gTDdcbiAgICBMb2dpc3RpY2EgLS0+IEw4XG4gICAgTG9naXN0aWNhIC0tPiBMOVxuXG4gICAgTDIgLS5pbmNsdWRlLi0+IEw2XG4gICAgTDMgLS5leHRlbmQuLT4gTDciLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart LR
                        Logistica((Log√≠stica))
                        
                        subgraph CU_Logistica["Casos de Uso de Log√≠stica"]
                            direction TB
                            L1[""""Ver Pedidos<br/>Pendientes""""]
                            L2[""""Iniciar Preparaci√≥n<br/>de Pedido""""]
                            L3[""""Cambiar Estado<br/>a EN_TRANSITO""""]
                            L4[""""Cambiar Estado<br/>a ENTREGADO""""]
                            L5[""""Reportar Problema<br/>en Entrega""""]
                            L6[""""Ver Detalles<br/>de Pedido""""]
                            L7[Asignar Transportista]
                            L8[""""Ver Dashboard<br/>Log√≠stica""""]
                            L9[""""Generar Reporte<br/>de Entregas""""]
                        end
                    
                        Logistica --> L1
                        Logistica --> L2
                        Logistica --> L3
                        Logistica --> L4
                        Logistica --> L5
                        Logistica --> L6
                        Logistica --> L7
                        Logistica --> L8
                        Logistica --> L9
                    
                        L2 -.include.-> L6
                        L3 -.extend.-> L7

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart LR
                        Cliente((Cliente))
                        
                        subgraph CU_Cliente["Casos de Uso del Cliente"]
                            direction TB
                            C1[Navegar Cat√°logo]
                            C2[Buscar Productos]
                            C3[""""Ver Detalles<br/>de Producto""""]
                            C4[Agregar al Carrito]
                            C5[Modificar Carrito]
                            C6[Realizar Compra]
                            C7[""""Seleccionar M√©todo<br/>de Pago""""]
                            C8[Ver Mis Pedidos]
                            C9[""""Ver Estado<br/>de Pedido""""]
                            C10[Ver Notificaciones]
                            C11[Descargar Factura]
                        end
                    
                        Cliente --> C1
                        Cliente --> C2
                        Cliente --> C3
                        Cliente --> C4
                        Cliente --> C5
                        Cliente --> C6
                        Cliente --> C7
                        Cliente --> C8
                        Cliente --> C9
                        Cliente --> C10
                        Cliente --> C11
                    
                        C3 -.extend.-> C4
                        C6 -.include.-> C7
                        C9 -.include.-> C8

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgQ2xpZW50ZSgoQ2xpZW50ZSkpXG4gICAgXG4gICAgc3ViZ3JhcGggQ1VfQ2xpZW50ZVtcIkNhc29zIGRlIFVzbyBkZWwgQ2xpZW50ZVwiXVxuICAgICAgICBkaXJlY3Rpb24gVEJcbiAgICAgICAgQzFbTmF2ZWdhciBDYXRcdTAwZTFsb2dvXVxuICAgICAgICBDMltCdXNjYXIgUHJvZHVjdG9zXVxuICAgICAgICBDM1tWZXIgRGV0YWxsZXM8YnIvPmRlIFByb2R1Y3RvXVxuICAgICAgICBDNFtBZ3JlZ2FyIGFsIENhcnJpdG9dXG4gICAgICAgIEM1W01vZGlmaWNhciBDYXJyaXRvXVxuICAgICAgICBDNltSZWFsaXphciBDb21wcmFdXG4gICAgICAgIEM3W1NlbGVjY2lvbmFyIE1cdTAwZTl0b2RvPGJyLz5kZSBQYWdvXVxuICAgICAgICBDOFtWZXIgTWlzIFBlZGlkb3NdXG4gICAgICAgIEM5W1ZlciBFc3RhZG88YnIvPmRlIFBlZGlkb11cbiAgICAgICAgQzEwW1ZlciBOb3RpZmljYWNpb25lc11cbiAgICAgICAgQzExW0Rlc2NhcmdhciBGYWN0dXJhXVxuICAgIGVuZFxuXG4gICAgQ2xpZW50ZSAtLT4gQzFcbiAgICBDbGllbnRlIC0tPiBDMlxuICAgIENsaWVudGUgLS0+IEMzXG4gICAgQ2xpZW50ZSAtLT4gQzRcbiAgICBDbGllbnRlIC0tPiBDNVxuICAgIENsaWVudGUgLS0+IEM2XG4gICAgQ2xpZW50ZSAtLT4gQzdcbiAgICBDbGllbnRlIC0tPiBDOFxuICAgIENsaWVudGUgLS0+IEM5XG4gICAgQ2xpZW50ZSAtLT4gQzEwXG4gICAgQ2xpZW50ZSAtLT4gQzExXG5cbiAgICBDMyAtLmV4dGVuZC4tPiBDNFxuICAgIEM2IC0uaW5jbHVkZS4tPiBDN1xuICAgIEM5IC0uaW5jbHVkZS4tPiBDOCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgQ2xpZW50ZSgoQ2xpZW50ZSkpXG4gICAgXG4gICAgc3ViZ3JhcGggQ1VfQ2xpZW50ZVtcIkNhc29zIGRlIFVzbyBkZWwgQ2xpZW50ZVwiXVxuICAgICAgICBkaXJlY3Rpb24gVEJcbiAgICAgICAgQzFbTmF2ZWdhciBDYXRcdTAwZTFsb2dvXVxuICAgICAgICBDMltCdXNjYXIgUHJvZHVjdG9zXVxuICAgICAgICBDM1tWZXIgRGV0YWxsZXM8YnIvPmRlIFByb2R1Y3RvXVxuICAgICAgICBDNFtBZ3JlZ2FyIGFsIENhcnJpdG9dXG4gICAgICAgIEM1W01vZGlmaWNhciBDYXJyaXRvXVxuICAgICAgICBDNltSZWFsaXphciBDb21wcmFdXG4gICAgICAgIEM3W1NlbGVjY2lvbmFyIE1cdTAwZTl0b2RvPGJyLz5kZSBQYWdvXVxuICAgICAgICBDOFtWZXIgTWlzIFBlZGlkb3NdXG4gICAgICAgIEM5W1ZlciBFc3RhZG88YnIvPmRlIFBlZGlkb11cbiAgICAgICAgQzEwW1ZlciBOb3RpZmljYWNpb25lc11cbiAgICAgICAgQzExW0Rlc2NhcmdhciBGYWN0dXJhXVxuICAgIGVuZFxuXG4gICAgQ2xpZW50ZSAtLT4gQzFcbiAgICBDbGllbnRlIC0tPiBDMlxuICAgIENsaWVudGUgLS0+IEMzXG4gICAgQ2xpZW50ZSAtLT4gQzRcbiAgICBDbGllbnRlIC0tPiBDNVxuICAgIENsaWVudGUgLS0+IEM2XG4gICAgQ2xpZW50ZSAtLT4gQzdcbiAgICBDbGllbnRlIC0tPiBDOFxuICAgIENsaWVudGUgLS0+IEM5XG4gICAgQ2xpZW50ZSAtLT4gQzEwXG4gICAgQ2xpZW50ZSAtLT4gQzExXG5cbiAgICBDMyAtLmV4dGVuZC4tPiBDNFxuICAgIEM2IC0uaW5jbHVkZS4tPiBDN1xuICAgIEM5IC0uaW5jbHVkZS4tPiBDOCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart LR
                        Cliente((Cliente))
                        
                        subgraph CU_Cliente["Casos de Uso del Cliente"]
                            direction TB
                            C1[Navegar Cat√°logo]
                            C2[Buscar Productos]
                            C3[""""Ver Detalles<br/>de Producto""""]
                            C4[Agregar al Carrito]
                            C5[Modificar Carrito]
                            C6[Realizar Compra]
                            C7[""""Seleccionar M√©todo<br/>de Pago""""]
                            C8[Ver Mis Pedidos]
                            C9[""""Ver Estado<br/>de Pedido""""]
                            C10[Ver Notificaciones]
                            C11[Descargar Factura]
                        end
                    
                        Cliente --> C1
                        Cliente --> C2
                        Cliente --> C3
                        Cliente --> C4
                        Cliente --> C5
                        Cliente --> C6
                        Cliente --> C7
                        Cliente --> C8
                        Cliente --> C9
                        Cliente --> C10
                        Cliente --> C11
                    
                        C3 -.extend.-> C4
                        C6 -.include.-> C7
                        C9 -.include.-> C8


.. dropdown:: üìä Diagrama Clases (1 diagramas)
    :open:
    :class-container: sd-mb-4

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    classDiagram
                        class Usuario {
                            +Long id
                            +String email
                            +String nombre
                            +String rol
                            +String telefono
                            +String direccion
                            +Boolean estado
                            +ImageField imagen
                            +DateTime fecha_creacion
                           + DateTime ultimo_ingreso
                            +DateTime last_activity
                            +Boolean is_staff
                            +Boolean self_deactivated
                            +Boolean admin_suspended
                            +String suspension_reason
                            +DateTime suspension_date
                            +set_password(raw_password)
                            +save()
                        }
                    
                        class PasswordHistory {
                            +Long id
                            +Long id_usuario
                            +String password_hash
                            +DateTime fecha_creacion
                        }
                    
                        class Tienda {
                            +Long id
                            +Long id_administrador
                            +String nombre
                            +String direccion
                            +String telefono
                            +Boolean activa
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                        }
                    
                        class Producto {
                            +Long id
                            +Long id_tienda
                            +Long id_proveedor
                            +String nombre
                            +String descripcion
                            +Decimal precio
                            +Integer stock
                            +Boolean es_basico
                            +String categoria
                            +ImageField imagen1
                            +ImageField imagen2
                            +ImageField imagen3
                            +String caracteristicas
                            +Boolean activo
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                            +reducir_stock(cantidad)
                            +aumentar_stock(cantidad)
                        }
                    
                        class StockConfig {
                            +Long id
                            +Long id_producto
                            +Integer stock_minimo
                            +Integer cantidad_recarga
                            +Boolean recarga_automatica_activa
                            +DateTime ultima_recarga
                            +Integer total_recargas
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                            +necesita_recarga()
                            +ejecutar_recarga()
                        }
                    
                        class HistorialRecarga {
                            +Long id
                            +Long id_producto
                            +Long id_usuario_ejecutor
                            +Integer cantidad
                            +Integer stock_anterior
                            +Integer stock_nuevo
                            +String tipo
                            +String notas
                            +DateTime fecha_creacion
                        }
                    
                        class Pedido {
                            +Long id
                            +Long id_cliente
                            +Long id_tienda
                            +String estado
                            +Decimal total
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                            +String notas
                            +calcular_total()
                            +puede_cambiar_a_preparando()
                            +puede_cambiar_a_en_transito()
                            +puede_cambiar_a_entregado()
                        }
                    
                        class DetallePedido {
                            +Long id
                            +Long id_pedido
                            +Long id_producto
                            +Integer cantidad
                            +Decimal precio_unitario
                            +subtotal()
                            +save()
                            +delete()
                        }
                    
                        class Venta {
                            +Long id
                            +Long id_pedido
                            +Long id_cliente
                            +Decimal total
                            +DateTime fecha_venta
                            +Integer cantidad_items
                        }
                    
                        class DetalleVenta {
                            +Long id
                            +Long id_venta
                            +Long id_producto
                            +Integer cantidad
                            +Decimal precio_unitario
                            +Decimal subtotal
                        }
                    
                        class Pago {
                            +Long id
                            +Long id_usuario
                            +Long id_pedido
                            +Long id_estado_pago
                            +Long id_metodo_pago
                            +Decimal monto
                            +FileField comprobante
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                        }
                    
                        class Transaccion {
                            +Long id
                            +Long id_pago
                            +String referencia_externa
                            +Decimal monto
                            +String estado
                            +JSON respuesta_gateway
                            +DateTime fecha_creacion
                        }
                    
                        class EstadoPago {
                            +Long id
                            +String nombre
                            +String descripcion
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                        }
                    
                        class MetodoPago {
                            +Long id
                            +String nombre
                            +Boolean activo
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                        }
                    
                        class Notificacion {
                            +Long id
                            +Long id_usuario
                            +Long id_tipo_notificacion
                            +Long id_estado_notificacion
                            +String mensaje
                            +String destino
                            +Boolean leida
                            +DateTime fecha_lectura
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                        }
                    
                        class TipoNotificacion {
                            +Long id
                            +String nombre
                            +String descripcion
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                        }
                    
                        class EstadoNotificacion {
                            +Long id
                            +String nombre
                            +String descripcion
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                        }
                    
                        class Seccion {
                            +Long id
                            +String nombre
                            +String descripcion
                            +Boolean activa
                            +DateTime fecha_creacion
                        }
                    
                        %% Relaciones
                        Usuario "1" --> "*" PasswordHistory : tiene historial
                        Usuario "1" --> "*" Tienda : administra
                        Usuario "1" --> "*" Producto : suministra
                        Usuario "1" --> "*" Pedido : realiza
                        Usuario "1" --> "*" Pago : efectua
                        Usuario "1" --> "*" Notificacion : recibe
                        Usuario "1" --> "*" HistorialRecarga : ejecuta
                        Usuario "1" --> "*" Venta : compra
                    
                        Tienda "1" --> "*" Producto : contiene
                        Tienda "1" --> "*" Pedido : gestiona
                    
                        Producto "1" --> "1" StockConfig : configura
                        Producto "1" --> "*" HistorialRecarga : registra
                        Producto "1" --> "*" DetallePedido : incluido_en
                        Producto "1" --> "*" DetalleVenta : vendido_en
                        Producto "1" --> "*" Seccion : pertenece_a
                    
                        Pedido "1" --> "*" DetallePedido : contiene
                        Pedido "1" --> "*" Pago : pagado_con
                        Pedido "1" --> "0..1" Venta : genera
                    
                        Venta "1" --> "*" DetalleVenta : contiene
                    
                        Pago --> EstadoPago : tiene estado
                        Pago --> MetodoPago : usa m√©todo
                        Pago "1" --> "*" Transaccion : registra
                    
                        Notificacion --> TipoNotificacion : es tipo
                        Notificacion --> EstadoNotificacion : tiene estado

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImNsYXNzRGlhZ3JhbVxuICAgIGNsYXNzIFVzdWFyaW8ge1xuICAgICAgICArTG9uZyBpZFxuICAgICAgICArU3RyaW5nIGVtYWlsXG4gICAgICAgICtTdHJpbmcgbm9tYnJlXG4gICAgICAgICtTdHJpbmcgcm9sXG4gICAgICAgICtTdHJpbmcgdGVsZWZvbm9cbiAgICAgICAgK1N0cmluZyBkaXJlY2Npb25cbiAgICAgICAgK0Jvb2xlYW4gZXN0YWRvXG4gICAgICAgICtJbWFnZUZpZWxkIGltYWdlblxuICAgICAgICArRGF0ZVRpbWUgZmVjaGFfY3JlYWNpb25cbiAgICAgICArIERhdGVUaW1lIHVsdGltb19pbmdyZXNvXG4gICAgICAgICtEYXRlVGltZSBsYXN0X2FjdGl2aXR5XG4gICAgICAgICtCb29sZWFuIGlzX3N0YWZmXG4gICAgICAgICtCb29sZWFuIHNlbGZfZGVhY3RpdmF0ZWRcbiAgICAgICAgK0Jvb2xlYW4gYWRtaW5fc3VzcGVuZGVkXG4gICAgICAgICtTdHJpbmcgc3VzcGVuc2lvbl9yZWFzb25cbiAgICAgICAgK0RhdGVUaW1lIHN1c3BlbnNpb25fZGF0ZVxuICAgICAgICArc2V0X3Bhc3N3b3JkKHJhd19wYXNzd29yZClcbiAgICAgICAgK3NhdmUoKVxuICAgIH1cblxuICAgIGNsYXNzIFBhc3N3b3JkSGlzdG9yeSB7XG4gICAgICAgICtMb25nIGlkXG4gICAgICAgICtMb25nIGlkX3VzdWFyaW9cbiAgICAgICAgK1N0cmluZyBwYXNzd29yZF9oYXNoXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9jcmVhY2lvblxuICAgIH1cblxuICAgIGNsYXNzIFRpZW5kYSB7XG4gICAgICAgICtMb25nIGlkXG4gICAgICAgICtMb25nIGlkX2FkbWluaXN0cmFkb3JcbiAgICAgICAgK1N0cmluZyBub21icmVcbiAgICAgICAgK1N0cmluZyBkaXJlY2Npb25cbiAgICAgICAgK1N0cmluZyB0ZWxlZm9ub1xuICAgICAgICArQm9vbGVhbiBhY3RpdmFcbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9hY3R1YWxpemFjaW9uXG4gICAgfVxuXG4gICAgY2xhc3MgUHJvZHVjdG8ge1xuICAgICAgICArTG9uZyBpZFxuICAgICAgICArTG9uZyBpZF90aWVuZGFcbiAgICAgICAgK0xvbmcgaWRfcHJvdmVlZG9yXG4gICAgICAgICtTdHJpbmcgbm9tYnJlXG4gICAgICAgICtTdHJpbmcgZGVzY3JpcGNpb25cbiAgICAgICAgK0RlY2ltYWwgcHJlY2lvXG4gICAgICAgICtJbnRlZ2VyIHN0b2NrXG4gICAgICAgICtCb29sZWFuIGVzX2Jhc2ljb1xuICAgICAgICArU3RyaW5nIGNhdGVnb3JpYVxuICAgICAgICArSW1hZ2VGaWVsZCBpbWFnZW4xXG4gICAgICAgICtJbWFnZUZpZWxkIGltYWdlbjJcbiAgICAgICAgK0ltYWdlRmllbGQgaW1hZ2VuM1xuICAgICAgICArU3RyaW5nIGNhcmFjdGVyaXN0aWNhc1xuICAgICAgICArQm9vbGVhbiBhY3Rpdm9cbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9hY3R1YWxpemFjaW9uXG4gICAgICAgICtyZWR1Y2lyX3N0b2NrKGNhbnRpZGFkKVxuICAgICAgICArYXVtZW50YXJfc3RvY2soY2FudGlkYWQpXG4gICAgfVxuXG4gICAgY2xhc3MgU3RvY2tDb25maWcge1xuICAgICAgICArTG9uZyBpZFxuICAgICAgICArTG9uZyBpZF9wcm9kdWN0b1xuICAgICAgICArSW50ZWdlciBzdG9ja19taW5pbW9cbiAgICAgICAgK0ludGVnZXIgY2FudGlkYWRfcmVjYXJnYVxuICAgICAgICArQm9vbGVhbiByZWNhcmdhX2F1dG9tYXRpY2FfYWN0aXZhXG4gICAgICAgICtEYXRlVGltZSB1bHRpbWFfcmVjYXJnYVxuICAgICAgICArSW50ZWdlciB0b3RhbF9yZWNhcmdhc1xuICAgICAgICArRGF0ZVRpbWUgZmVjaGFfY3JlYWNpb25cbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2FjdHVhbGl6YWNpb25cbiAgICAgICAgK25lY2VzaXRhX3JlY2FyZ2EoKVxuICAgICAgICArZWplY3V0YXJfcmVjYXJnYSgpXG4gICAgfVxuXG4gICAgY2xhc3MgSGlzdG9yaWFsUmVjYXJnYSB7XG4gICAgICAgICtMb25nIGlkXG4gICAgICAgICtMb25nIGlkX3Byb2R1Y3RvXG4gICAgICAgICtMb25nIGlkX3VzdWFyaW9fZWplY3V0b3JcbiAgICAgICAgK0ludGVnZXIgY2FudGlkYWRcbiAgICAgICAgK0ludGVnZXIgc3RvY2tfYW50ZXJpb3JcbiAgICAgICAgK0ludGVnZXIgc3RvY2tfbnVldm9cbiAgICAgICAgK1N0cmluZyB0aXBvXG4gICAgICAgICtTdHJpbmcgbm90YXNcbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgfVxuXG4gICAgY2xhc3MgUGVkaWRvIHtcbiAgICAgICAgK0xvbmcgaWRcbiAgICAgICAgK0xvbmcgaWRfY2xpZW50ZVxuICAgICAgICArTG9uZyBpZF90aWVuZGFcbiAgICAgICAgK1N0cmluZyBlc3RhZG9cbiAgICAgICAgK0RlY2ltYWwgdG90YWxcbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9hY3R1YWxpemFjaW9uXG4gICAgICAgICtTdHJpbmcgbm90YXNcbiAgICAgICAgK2NhbGN1bGFyX3RvdGFsKClcbiAgICAgICAgK3B1ZWRlX2NhbWJpYXJfYV9wcmVwYXJhbmRvKClcbiAgICAgICAgK3B1ZWRlX2NhbWJpYXJfYV9lbl90cmFuc2l0bygpXG4gICAgICAgICtwdWVkZV9jYW1iaWFyX2FfZW50cmVnYWRvKClcbiAgICB9XG5cbiAgICBjbGFzcyBEZXRhbGxlUGVkaWRvIHtcbiAgICAgICAgK0xvbmcgaWRcbiAgICAgICAgK0xvbmcgaWRfcGVkaWRvXG4gICAgICAgICtMb25nIGlkX3Byb2R1Y3RvXG4gICAgICAgICtJbnRlZ2VyIGNhbnRpZGFkXG4gICAgICAgICtEZWNpbWFsIHByZWNpb191bml0YXJpb1xuICAgICAgICArc3VidG90YWwoKVxuICAgICAgICArc2F2ZSgpXG4gICAgICAgICtkZWxldGUoKVxuICAgIH1cblxuICAgIGNsYXNzIFZlbnRhIHtcbiAgICAgICAgK0xvbmcgaWRcbiAgICAgICAgK0xvbmcgaWRfcGVkaWRvXG4gICAgICAgICtMb25nIGlkX2NsaWVudGVcbiAgICAgICAgK0RlY2ltYWwgdG90YWxcbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX3ZlbnRhXG4gICAgICAgICtJbnRlZ2VyIGNhbnRpZGFkX2l0ZW1zXG4gICAgfVxuXG4gICAgY2xhc3MgRGV0YWxsZVZlbnRhIHtcbiAgICAgICAgK0xvbmcgaWRcbiAgICAgICAgK0xvbmcgaWRfdmVudGFcbiAgICAgICAgK0xvbmcgaWRfcHJvZHVjdG9cbiAgICAgICAgK0ludGVnZXIgY2FudGlkYWRcbiAgICAgICAgK0RlY2ltYWwgcHJlY2lvX3VuaXRhcmlvXG4gICAgICAgICtEZWNpbWFsIHN1YnRvdGFsXG4gICAgfVxuXG4gICAgY2xhc3MgUGFnbyB7XG4gICAgICAgICtMb25nIGlkXG4gICAgICAgICtMb25nIGlkX3VzdWFyaW9cbiAgICAgICAgK0xvbmcgaWRfcGVkaWRvXG4gICAgICAgICtMb25nIGlkX2VzdGFkb19wYWdvXG4gICAgICAgICtMb25nIGlkX21ldG9kb19wYWdvXG4gICAgICAgICtEZWNpbWFsIG1vbnRvXG4gICAgICAgICtGaWxlRmllbGQgY29tcHJvYmFudGVcbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9hY3R1YWxpemFjaW9uXG4gICAgfVxuXG4gICAgY2xhc3MgVHJhbnNhY2Npb24ge1xuICAgICAgICArTG9uZyBpZFxuICAgICAgICArTG9uZyBpZF9wYWdvXG4gICAgICAgICtTdHJpbmcgcmVmZXJlbmNpYV9leHRlcm5hXG4gICAgICAgICtEZWNpbWFsIG1vbnRvXG4gICAgICAgICtTdHJpbmcgZXN0YWRvXG4gICAgICAgICtKU09OIHJlc3B1ZXN0YV9nYXRld2F5XG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9jcmVhY2lvblxuICAgIH1cblxuICAgIGNsYXNzIEVzdGFkb1BhZ28ge1xuICAgICAgICArTG9uZyBpZFxuICAgICAgICArU3RyaW5nIG5vbWJyZVxuICAgICAgICArU3RyaW5nIGRlc2NyaXBjaW9uXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9jcmVhY2lvblxuICAgICAgICArRGF0ZVRpbWUgZmVjaGFfYWN0dWFsaXphY2lvblxuICAgIH1cblxuICAgIGNsYXNzIE1ldG9kb1BhZ28ge1xuICAgICAgICArTG9uZyBpZFxuICAgICAgICArU3RyaW5nIG5vbWJyZVxuICAgICAgICArQm9vbGVhbiBhY3Rpdm9cbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9hY3R1YWxpemFjaW9uXG4gICAgfVxuXG4gICAgY2xhc3MgTm90aWZpY2FjaW9uIHtcbiAgICAgICAgK0xvbmcgaWRcbiAgICAgICAgK0xvbmcgaWRfdXN1YXJpb1xuICAgICAgICArTG9uZyBpZF90aXBvX25vdGlmaWNhY2lvblxuICAgICAgICArTG9uZyBpZF9lc3RhZG9fbm90aWZpY2FjaW9uXG4gICAgICAgICtTdHJpbmcgbWVuc2FqZVxuICAgICAgICArU3RyaW5nIGRlc3Rpbm9cbiAgICAgICAgK0Jvb2xlYW4gbGVpZGFcbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2xlY3R1cmFcbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9hY3R1YWxpemFjaW9uXG4gICAgfVxuXG4gICAgY2xhc3MgVGlwb05vdGlmaWNhY2lvbiB7XG4gICAgICAgICtMb25nIGlkXG4gICAgICAgICtTdHJpbmcgbm9tYnJlXG4gICAgICAgICtTdHJpbmcgZGVzY3JpcGNpb25cbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9hY3R1YWxpemFjaW9uXG4gICAgfVxuXG4gICAgY2xhc3MgRXN0YWRvTm90aWZpY2FjaW9uIHtcbiAgICAgICAgK0xvbmcgaWRcbiAgICAgICAgK1N0cmluZyBub21icmVcbiAgICAgICAgK1N0cmluZyBkZXNjcmlwY2lvblxuICAgICAgICArRGF0ZVRpbWUgZmVjaGFfY3JlYWNpb25cbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2FjdHVhbGl6YWNpb25cbiAgICB9XG5cbiAgICBjbGFzcyBTZWNjaW9uIHtcbiAgICAgICAgK0xvbmcgaWRcbiAgICAgICAgK1N0cmluZyBub21icmVcbiAgICAgICAgK1N0cmluZyBkZXNjcmlwY2lvblxuICAgICAgICArQm9vbGVhbiBhY3RpdmFcbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgfVxuXG4gICAgJSUgUmVsYWNpb25lc1xuICAgIFVzdWFyaW8gXCIxXCIgLS0+IFwiKlwiIFBhc3N3b3JkSGlzdG9yeSA6IHRpZW5lIGhpc3RvcmlhbFxuICAgIFVzdWFyaW8gXCIxXCIgLS0+IFwiKlwiIFRpZW5kYSA6IGFkbWluaXN0cmFcbiAgICBVc3VhcmlvIFwiMVwiIC0tPiBcIipcIiBQcm9kdWN0byA6IHN1bWluaXN0cmFcbiAgICBVc3VhcmlvIFwiMVwiIC0tPiBcIipcIiBQZWRpZG8gOiByZWFsaXphXG4gICAgVXN1YXJpbyBcIjFcIiAtLT4gXCIqXCIgUGFnbyA6IGVmZWN0dWFcbiAgICBVc3VhcmlvIFwiMVwiIC0tPiBcIipcIiBOb3RpZmljYWNpb24gOiByZWNpYmVcbiAgICBVc3VhcmlvIFwiMVwiIC0tPiBcIipcIiBIaXN0b3JpYWxSZWNhcmdhIDogZWplY3V0YVxuICAgIFVzdWFyaW8gXCIxXCIgLS0+IFwiKlwiIFZlbnRhIDogY29tcHJhXG5cbiAgICBUaWVuZGEgXCIxXCIgLS0+IFwiKlwiIFByb2R1Y3RvIDogY29udGllbmVcbiAgICBUaWVuZGEgXCIxXCIgLS0+IFwiKlwiIFBlZGlkbyA6IGdlc3Rpb25hXG5cbiAgICBQcm9kdWN0byBcIjFcIiAtLT4gXCIxXCIgU3RvY2tDb25maWcgOiBjb25maWd1cmFcbiAgICBQcm9kdWN0byBcIjFcIiAtLT4gXCIqXCIgSGlzdG9yaWFsUmVjYXJnYSA6IHJlZ2lzdHJhXG4gICAgUHJvZHVjdG8gXCIxXCIgLS0+IFwiKlwiIERldGFsbGVQZWRpZG8gOiBpbmNsdWlkb19lblxuICAgIFByb2R1Y3RvIFwiMVwiIC0tPiBcIipcIiBEZXRhbGxlVmVudGEgOiB2ZW5kaWRvX2VuXG4gICAgUHJvZHVjdG8gXCIxXCIgLS0+IFwiKlwiIFNlY2Npb24gOiBwZXJ0ZW5lY2VfYVxuXG4gICAgUGVkaWRvIFwiMVwiIC0tPiBcIipcIiBEZXRhbGxlUGVkaWRvIDogY29udGllbmVcbiAgICBQZWRpZG8gXCIxXCIgLS0+IFwiKlwiIFBhZ28gOiBwYWdhZG9fY29uXG4gICAgUGVkaWRvIFwiMVwiIC0tPiBcIjAuLjFcIiBWZW50YSA6IGdlbmVyYVxuXG4gICAgVmVudGEgXCIxXCIgLS0+IFwiKlwiIERldGFsbGVWZW50YSA6IGNvbnRpZW5lXG5cbiAgICBQYWdvIC0tPiBFc3RhZG9QYWdvIDogdGllbmUgZXN0YWRvXG4gICAgUGFnbyAtLT4gTWV0b2RvUGFnbyA6IHVzYSBtXHUwMGU5dG9kb1xuICAgIFBhZ28gXCIxXCIgLS0+IFwiKlwiIFRyYW5zYWNjaW9uIDogcmVnaXN0cmFcblxuICAgIE5vdGlmaWNhY2lvbiAtLT4gVGlwb05vdGlmaWNhY2lvbiA6IGVzIHRpcG9cbiAgICBOb3RpZmljYWNpb24gLS0+IEVzdGFkb05vdGlmaWNhY2lvbiA6IHRpZW5lIGVzdGFkbyIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImNsYXNzRGlhZ3JhbVxuICAgIGNsYXNzIFVzdWFyaW8ge1xuICAgICAgICArTG9uZyBpZFxuICAgICAgICArU3RyaW5nIGVtYWlsXG4gICAgICAgICtTdHJpbmcgbm9tYnJlXG4gICAgICAgICtTdHJpbmcgcm9sXG4gICAgICAgICtTdHJpbmcgdGVsZWZvbm9cbiAgICAgICAgK1N0cmluZyBkaXJlY2Npb25cbiAgICAgICAgK0Jvb2xlYW4gZXN0YWRvXG4gICAgICAgICtJbWFnZUZpZWxkIGltYWdlblxuICAgICAgICArRGF0ZVRpbWUgZmVjaGFfY3JlYWNpb25cbiAgICAgICArIERhdGVUaW1lIHVsdGltb19pbmdyZXNvXG4gICAgICAgICtEYXRlVGltZSBsYXN0X2FjdGl2aXR5XG4gICAgICAgICtCb29sZWFuIGlzX3N0YWZmXG4gICAgICAgICtCb29sZWFuIHNlbGZfZGVhY3RpdmF0ZWRcbiAgICAgICAgK0Jvb2xlYW4gYWRtaW5fc3VzcGVuZGVkXG4gICAgICAgICtTdHJpbmcgc3VzcGVuc2lvbl9yZWFzb25cbiAgICAgICAgK0RhdGVUaW1lIHN1c3BlbnNpb25fZGF0ZVxuICAgICAgICArc2V0X3Bhc3N3b3JkKHJhd19wYXNzd29yZClcbiAgICAgICAgK3NhdmUoKVxuICAgIH1cblxuICAgIGNsYXNzIFBhc3N3b3JkSGlzdG9yeSB7XG4gICAgICAgICtMb25nIGlkXG4gICAgICAgICtMb25nIGlkX3VzdWFyaW9cbiAgICAgICAgK1N0cmluZyBwYXNzd29yZF9oYXNoXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9jcmVhY2lvblxuICAgIH1cblxuICAgIGNsYXNzIFRpZW5kYSB7XG4gICAgICAgICtMb25nIGlkXG4gICAgICAgICtMb25nIGlkX2FkbWluaXN0cmFkb3JcbiAgICAgICAgK1N0cmluZyBub21icmVcbiAgICAgICAgK1N0cmluZyBkaXJlY2Npb25cbiAgICAgICAgK1N0cmluZyB0ZWxlZm9ub1xuICAgICAgICArQm9vbGVhbiBhY3RpdmFcbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9hY3R1YWxpemFjaW9uXG4gICAgfVxuXG4gICAgY2xhc3MgUHJvZHVjdG8ge1xuICAgICAgICArTG9uZyBpZFxuICAgICAgICArTG9uZyBpZF90aWVuZGFcbiAgICAgICAgK0xvbmcgaWRfcHJvdmVlZG9yXG4gICAgICAgICtTdHJpbmcgbm9tYnJlXG4gICAgICAgICtTdHJpbmcgZGVzY3JpcGNpb25cbiAgICAgICAgK0RlY2ltYWwgcHJlY2lvXG4gICAgICAgICtJbnRlZ2VyIHN0b2NrXG4gICAgICAgICtCb29sZWFuIGVzX2Jhc2ljb1xuICAgICAgICArU3RyaW5nIGNhdGVnb3JpYVxuICAgICAgICArSW1hZ2VGaWVsZCBpbWFnZW4xXG4gICAgICAgICtJbWFnZUZpZWxkIGltYWdlbjJcbiAgICAgICAgK0ltYWdlRmllbGQgaW1hZ2VuM1xuICAgICAgICArU3RyaW5nIGNhcmFjdGVyaXN0aWNhc1xuICAgICAgICArQm9vbGVhbiBhY3Rpdm9cbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9hY3R1YWxpemFjaW9uXG4gICAgICAgICtyZWR1Y2lyX3N0b2NrKGNhbnRpZGFkKVxuICAgICAgICArYXVtZW50YXJfc3RvY2soY2FudGlkYWQpXG4gICAgfVxuXG4gICAgY2xhc3MgU3RvY2tDb25maWcge1xuICAgICAgICArTG9uZyBpZFxuICAgICAgICArTG9uZyBpZF9wcm9kdWN0b1xuICAgICAgICArSW50ZWdlciBzdG9ja19taW5pbW9cbiAgICAgICAgK0ludGVnZXIgY2FudGlkYWRfcmVjYXJnYVxuICAgICAgICArQm9vbGVhbiByZWNhcmdhX2F1dG9tYXRpY2FfYWN0aXZhXG4gICAgICAgICtEYXRlVGltZSB1bHRpbWFfcmVjYXJnYVxuICAgICAgICArSW50ZWdlciB0b3RhbF9yZWNhcmdhc1xuICAgICAgICArRGF0ZVRpbWUgZmVjaGFfY3JlYWNpb25cbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2FjdHVhbGl6YWNpb25cbiAgICAgICAgK25lY2VzaXRhX3JlY2FyZ2EoKVxuICAgICAgICArZWplY3V0YXJfcmVjYXJnYSgpXG4gICAgfVxuXG4gICAgY2xhc3MgSGlzdG9yaWFsUmVjYXJnYSB7XG4gICAgICAgICtMb25nIGlkXG4gICAgICAgICtMb25nIGlkX3Byb2R1Y3RvXG4gICAgICAgICtMb25nIGlkX3VzdWFyaW9fZWplY3V0b3JcbiAgICAgICAgK0ludGVnZXIgY2FudGlkYWRcbiAgICAgICAgK0ludGVnZXIgc3RvY2tfYW50ZXJpb3JcbiAgICAgICAgK0ludGVnZXIgc3RvY2tfbnVldm9cbiAgICAgICAgK1N0cmluZyB0aXBvXG4gICAgICAgICtTdHJpbmcgbm90YXNcbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgfVxuXG4gICAgY2xhc3MgUGVkaWRvIHtcbiAgICAgICAgK0xvbmcgaWRcbiAgICAgICAgK0xvbmcgaWRfY2xpZW50ZVxuICAgICAgICArTG9uZyBpZF90aWVuZGFcbiAgICAgICAgK1N0cmluZyBlc3RhZG9cbiAgICAgICAgK0RlY2ltYWwgdG90YWxcbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9hY3R1YWxpemFjaW9uXG4gICAgICAgICtTdHJpbmcgbm90YXNcbiAgICAgICAgK2NhbGN1bGFyX3RvdGFsKClcbiAgICAgICAgK3B1ZWRlX2NhbWJpYXJfYV9wcmVwYXJhbmRvKClcbiAgICAgICAgK3B1ZWRlX2NhbWJpYXJfYV9lbl90cmFuc2l0bygpXG4gICAgICAgICtwdWVkZV9jYW1iaWFyX2FfZW50cmVnYWRvKClcbiAgICB9XG5cbiAgICBjbGFzcyBEZXRhbGxlUGVkaWRvIHtcbiAgICAgICAgK0xvbmcgaWRcbiAgICAgICAgK0xvbmcgaWRfcGVkaWRvXG4gICAgICAgICtMb25nIGlkX3Byb2R1Y3RvXG4gICAgICAgICtJbnRlZ2VyIGNhbnRpZGFkXG4gICAgICAgICtEZWNpbWFsIHByZWNpb191bml0YXJpb1xuICAgICAgICArc3VidG90YWwoKVxuICAgICAgICArc2F2ZSgpXG4gICAgICAgICtkZWxldGUoKVxuICAgIH1cblxuICAgIGNsYXNzIFZlbnRhIHtcbiAgICAgICAgK0xvbmcgaWRcbiAgICAgICAgK0xvbmcgaWRfcGVkaWRvXG4gICAgICAgICtMb25nIGlkX2NsaWVudGVcbiAgICAgICAgK0RlY2ltYWwgdG90YWxcbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX3ZlbnRhXG4gICAgICAgICtJbnRlZ2VyIGNhbnRpZGFkX2l0ZW1zXG4gICAgfVxuXG4gICAgY2xhc3MgRGV0YWxsZVZlbnRhIHtcbiAgICAgICAgK0xvbmcgaWRcbiAgICAgICAgK0xvbmcgaWRfdmVudGFcbiAgICAgICAgK0xvbmcgaWRfcHJvZHVjdG9cbiAgICAgICAgK0ludGVnZXIgY2FudGlkYWRcbiAgICAgICAgK0RlY2ltYWwgcHJlY2lvX3VuaXRhcmlvXG4gICAgICAgICtEZWNpbWFsIHN1YnRvdGFsXG4gICAgfVxuXG4gICAgY2xhc3MgUGFnbyB7XG4gICAgICAgICtMb25nIGlkXG4gICAgICAgICtMb25nIGlkX3VzdWFyaW9cbiAgICAgICAgK0xvbmcgaWRfcGVkaWRvXG4gICAgICAgICtMb25nIGlkX2VzdGFkb19wYWdvXG4gICAgICAgICtMb25nIGlkX21ldG9kb19wYWdvXG4gICAgICAgICtEZWNpbWFsIG1vbnRvXG4gICAgICAgICtGaWxlRmllbGQgY29tcHJvYmFudGVcbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9hY3R1YWxpemFjaW9uXG4gICAgfVxuXG4gICAgY2xhc3MgVHJhbnNhY2Npb24ge1xuICAgICAgICArTG9uZyBpZFxuICAgICAgICArTG9uZyBpZF9wYWdvXG4gICAgICAgICtTdHJpbmcgcmVmZXJlbmNpYV9leHRlcm5hXG4gICAgICAgICtEZWNpbWFsIG1vbnRvXG4gICAgICAgICtTdHJpbmcgZXN0YWRvXG4gICAgICAgICtKU09OIHJlc3B1ZXN0YV9nYXRld2F5XG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9jcmVhY2lvblxuICAgIH1cblxuICAgIGNsYXNzIEVzdGFkb1BhZ28ge1xuICAgICAgICArTG9uZyBpZFxuICAgICAgICArU3RyaW5nIG5vbWJyZVxuICAgICAgICArU3RyaW5nIGRlc2NyaXBjaW9uXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9jcmVhY2lvblxuICAgICAgICArRGF0ZVRpbWUgZmVjaGFfYWN0dWFsaXphY2lvblxuICAgIH1cblxuICAgIGNsYXNzIE1ldG9kb1BhZ28ge1xuICAgICAgICArTG9uZyBpZFxuICAgICAgICArU3RyaW5nIG5vbWJyZVxuICAgICAgICArQm9vbGVhbiBhY3Rpdm9cbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9hY3R1YWxpemFjaW9uXG4gICAgfVxuXG4gICAgY2xhc3MgTm90aWZpY2FjaW9uIHtcbiAgICAgICAgK0xvbmcgaWRcbiAgICAgICAgK0xvbmcgaWRfdXN1YXJpb1xuICAgICAgICArTG9uZyBpZF90aXBvX25vdGlmaWNhY2lvblxuICAgICAgICArTG9uZyBpZF9lc3RhZG9fbm90aWZpY2FjaW9uXG4gICAgICAgICtTdHJpbmcgbWVuc2FqZVxuICAgICAgICArU3RyaW5nIGRlc3Rpbm9cbiAgICAgICAgK0Jvb2xlYW4gbGVpZGFcbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2xlY3R1cmFcbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9hY3R1YWxpemFjaW9uXG4gICAgfVxuXG4gICAgY2xhc3MgVGlwb05vdGlmaWNhY2lvbiB7XG4gICAgICAgICtMb25nIGlkXG4gICAgICAgICtTdHJpbmcgbm9tYnJlXG4gICAgICAgICtTdHJpbmcgZGVzY3JpcGNpb25cbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgICAgICtEYXRlVGltZSBmZWNoYV9hY3R1YWxpemFjaW9uXG4gICAgfVxuXG4gICAgY2xhc3MgRXN0YWRvTm90aWZpY2FjaW9uIHtcbiAgICAgICAgK0xvbmcgaWRcbiAgICAgICAgK1N0cmluZyBub21icmVcbiAgICAgICAgK1N0cmluZyBkZXNjcmlwY2lvblxuICAgICAgICArRGF0ZVRpbWUgZmVjaGFfY3JlYWNpb25cbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2FjdHVhbGl6YWNpb25cbiAgICB9XG5cbiAgICBjbGFzcyBTZWNjaW9uIHtcbiAgICAgICAgK0xvbmcgaWRcbiAgICAgICAgK1N0cmluZyBub21icmVcbiAgICAgICAgK1N0cmluZyBkZXNjcmlwY2lvblxuICAgICAgICArQm9vbGVhbiBhY3RpdmFcbiAgICAgICAgK0RhdGVUaW1lIGZlY2hhX2NyZWFjaW9uXG4gICAgfVxuXG4gICAgJSUgUmVsYWNpb25lc1xuICAgIFVzdWFyaW8gXCIxXCIgLS0+IFwiKlwiIFBhc3N3b3JkSGlzdG9yeSA6IHRpZW5lIGhpc3RvcmlhbFxuICAgIFVzdWFyaW8gXCIxXCIgLS0+IFwiKlwiIFRpZW5kYSA6IGFkbWluaXN0cmFcbiAgICBVc3VhcmlvIFwiMVwiIC0tPiBcIipcIiBQcm9kdWN0byA6IHN1bWluaXN0cmFcbiAgICBVc3VhcmlvIFwiMVwiIC0tPiBcIipcIiBQZWRpZG8gOiByZWFsaXphXG4gICAgVXN1YXJpbyBcIjFcIiAtLT4gXCIqXCIgUGFnbyA6IGVmZWN0dWFcbiAgICBVc3VhcmlvIFwiMVwiIC0tPiBcIipcIiBOb3RpZmljYWNpb24gOiByZWNpYmVcbiAgICBVc3VhcmlvIFwiMVwiIC0tPiBcIipcIiBIaXN0b3JpYWxSZWNhcmdhIDogZWplY3V0YVxuICAgIFVzdWFyaW8gXCIxXCIgLS0+IFwiKlwiIFZlbnRhIDogY29tcHJhXG5cbiAgICBUaWVuZGEgXCIxXCIgLS0+IFwiKlwiIFByb2R1Y3RvIDogY29udGllbmVcbiAgICBUaWVuZGEgXCIxXCIgLS0+IFwiKlwiIFBlZGlkbyA6IGdlc3Rpb25hXG5cbiAgICBQcm9kdWN0byBcIjFcIiAtLT4gXCIxXCIgU3RvY2tDb25maWcgOiBjb25maWd1cmFcbiAgICBQcm9kdWN0byBcIjFcIiAtLT4gXCIqXCIgSGlzdG9yaWFsUmVjYXJnYSA6IHJlZ2lzdHJhXG4gICAgUHJvZHVjdG8gXCIxXCIgLS0+IFwiKlwiIERldGFsbGVQZWRpZG8gOiBpbmNsdWlkb19lblxuICAgIFByb2R1Y3RvIFwiMVwiIC0tPiBcIipcIiBEZXRhbGxlVmVudGEgOiB2ZW5kaWRvX2VuXG4gICAgUHJvZHVjdG8gXCIxXCIgLS0+IFwiKlwiIFNlY2Npb24gOiBwZXJ0ZW5lY2VfYVxuXG4gICAgUGVkaWRvIFwiMVwiIC0tPiBcIipcIiBEZXRhbGxlUGVkaWRvIDogY29udGllbmVcbiAgICBQZWRpZG8gXCIxXCIgLS0+IFwiKlwiIFBhZ28gOiBwYWdhZG9fY29uXG4gICAgUGVkaWRvIFwiMVwiIC0tPiBcIjAuLjFcIiBWZW50YSA6IGdlbmVyYVxuXG4gICAgVmVudGEgXCIxXCIgLS0+IFwiKlwiIERldGFsbGVWZW50YSA6IGNvbnRpZW5lXG5cbiAgICBQYWdvIC0tPiBFc3RhZG9QYWdvIDogdGllbmUgZXN0YWRvXG4gICAgUGFnbyAtLT4gTWV0b2RvUGFnbyA6IHVzYSBtXHUwMGU5dG9kb1xuICAgIFBhZ28gXCIxXCIgLS0+IFwiKlwiIFRyYW5zYWNjaW9uIDogcmVnaXN0cmFcblxuICAgIE5vdGlmaWNhY2lvbiAtLT4gVGlwb05vdGlmaWNhY2lvbiA6IGVzIHRpcG9cbiAgICBOb3RpZmljYWNpb24gLS0+IEVzdGFkb05vdGlmaWNhY2lvbiA6IHRpZW5lIGVzdGFkbyIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    classDiagram
                        class Usuario {
                            +Long id
                            +String email
                            +String nombre
                            +String rol
                            +String telefono
                            +String direccion
                            +Boolean estado
                            +ImageField imagen
                            +DateTime fecha_creacion
                           + DateTime ultimo_ingreso
                            +DateTime last_activity
                            +Boolean is_staff
                            +Boolean self_deactivated
                            +Boolean admin_suspended
                            +String suspension_reason
                            +DateTime suspension_date
                            +set_password(raw_password)
                            +save()
                        }
                    
                        class PasswordHistory {
                            +Long id
                            +Long id_usuario
                            +String password_hash
                            +DateTime fecha_creacion
                        }
                    
                        class Tienda {
                            +Long id
                            +Long id_administrador
                            +String nombre
                            +String direccion
                            +String telefono
                            +Boolean activa
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                        }
                    
                        class Producto {
                            +Long id
                            +Long id_tienda
                            +Long id_proveedor
                            +String nombre
                            +String descripcion
                            +Decimal precio
                            +Integer stock
                            +Boolean es_basico
                            +String categoria
                            +ImageField imagen1
                            +ImageField imagen2
                            +ImageField imagen3
                            +String caracteristicas
                            +Boolean activo
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                            +reducir_stock(cantidad)
                            +aumentar_stock(cantidad)
                        }
                    
                        class StockConfig {
                            +Long id
                            +Long id_producto
                            +Integer stock_minimo
                            +Integer cantidad_recarga
                            +Boolean recarga_automatica_activa
                            +DateTime ultima_recarga
                            +Integer total_recargas
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                            +necesita_recarga()
                            +ejecutar_recarga()
                        }
                    
                        class HistorialRecarga {
                            +Long id
                            +Long id_producto
                            +Long id_usuario_ejecutor
                            +Integer cantidad
                            +Integer stock_anterior
                            +Integer stock_nuevo
                            +String tipo
                            +String notas
                            +DateTime fecha_creacion
                        }
                    
                        class Pedido {
                            +Long id
                            +Long id_cliente
                            +Long id_tienda
                            +String estado
                            +Decimal total
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                            +String notas
                            +calcular_total()
                            +puede_cambiar_a_preparando()
                            +puede_cambiar_a_en_transito()
                            +puede_cambiar_a_entregado()
                        }
                    
                        class DetallePedido {
                            +Long id
                            +Long id_pedido
                            +Long id_producto
                            +Integer cantidad
                            +Decimal precio_unitario
                            +subtotal()
                            +save()
                            +delete()
                        }
                    
                        class Venta {
                            +Long id
                            +Long id_pedido
                            +Long id_cliente
                            +Decimal total
                            +DateTime fecha_venta
                            +Integer cantidad_items
                        }
                    
                        class DetalleVenta {
                            +Long id
                            +Long id_venta
                            +Long id_producto
                            +Integer cantidad
                            +Decimal precio_unitario
                            +Decimal subtotal
                        }
                    
                        class Pago {
                            +Long id
                            +Long id_usuario
                            +Long id_pedido
                            +Long id_estado_pago
                            +Long id_metodo_pago
                            +Decimal monto
                            +FileField comprobante
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                        }
                    
                        class Transaccion {
                            +Long id
                            +Long id_pago
                            +String referencia_externa
                            +Decimal monto
                            +String estado
                            +JSON respuesta_gateway
                            +DateTime fecha_creacion
                        }
                    
                        class EstadoPago {
                            +Long id
                            +String nombre
                            +String descripcion
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                        }
                    
                        class MetodoPago {
                            +Long id
                            +String nombre
                            +Boolean activo
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                        }
                    
                        class Notificacion {
                            +Long id
                            +Long id_usuario
                            +Long id_tipo_notificacion
                            +Long id_estado_notificacion
                            +String mensaje
                            +String destino
                            +Boolean leida
                            +DateTime fecha_lectura
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                        }
                    
                        class TipoNotificacion {
                            +Long id
                            +String nombre
                            +String descripcion
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                        }
                    
                        class EstadoNotificacion {
                            +Long id
                            +String nombre
                            +String descripcion
                            +DateTime fecha_creacion
                            +DateTime fecha_actualizacion
                        }
                    
                        class Seccion {
                            +Long id
                            +String nombre
                            +String descripcion
                            +Boolean activa
                            +DateTime fecha_creacion
                        }
                    
                        %% Relaciones
                        Usuario "1" --> "*" PasswordHistory : tiene historial
                        Usuario "1" --> "*" Tienda : administra
                        Usuario "1" --> "*" Producto : suministra
                        Usuario "1" --> "*" Pedido : realiza
                        Usuario "1" --> "*" Pago : efectua
                        Usuario "1" --> "*" Notificacion : recibe
                        Usuario "1" --> "*" HistorialRecarga : ejecuta
                        Usuario "1" --> "*" Venta : compra
                    
                        Tienda "1" --> "*" Producto : contiene
                        Tienda "1" --> "*" Pedido : gestiona
                    
                        Producto "1" --> "1" StockConfig : configura
                        Producto "1" --> "*" HistorialRecarga : registra
                        Producto "1" --> "*" DetallePedido : incluido_en
                        Producto "1" --> "*" DetalleVenta : vendido_en
                        Producto "1" --> "*" Seccion : pertenece_a
                    
                        Pedido "1" --> "*" DetallePedido : contiene
                        Pedido "1" --> "*" Pago : pagado_con
                        Pedido "1" --> "0..1" Venta : genera
                    
                        Venta "1" --> "*" DetalleVenta : contiene
                    
                        Pago --> EstadoPago : tiene estado
                        Pago --> MetodoPago : usa m√©todo
                        Pago "1" --> "*" Transaccion : registra
                    
                        Notificacion --> TipoNotificacion : es tipo
                        Notificacion --> EstadoNotificacion : tiene estado


.. dropdown:: üìä Diagrama Colaboracion (5 diagramas)
    :open:
    :class-container: sd-mb-4

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart LR
                        Cliente(("üë§<br/>:Cliente"))
                        UI["""""üì±<br/>:Frontend"""""]
                        API["""""üîå<br/>:API Controller"""""]
                        OrderService["""""‚öôÔ∏è<br/>:OrderService"""""]
                        StockService["""""üì¶<br/>:StockService"""""]
                        PaymentService["""""üí≥<br/>:PaymentService"""""]
                        DB[""""("üíæ<br/>:Database")""""]
                        NotifService["""""üìß<br/>:NotifService"""""]
                    
                        Cliente -->|"1: seleccionaProductos()"| UI
                        UI -->|"2: crearPedido(items)"| API
                        API -->|"3: validarStock(items)"| StockService
                        StockService -->|"4: SELECT stock"| DB
                        DB -->|"5: stock data"| StockService
                        StockService -->|"6: stock OK"| API
                        API -->|"7: procesarPago(monto)"| PaymentService
                        PaymentService -->|"8: pago aprobado"| API
                        API -->|"9: crearPedido(data)"| OrderService
                        OrderService -->|"10: INSERT pedido"| DB
                        OrderService -->|"11: reducirStock(items)"| StockService
                        StockService -->|"12: UPDATE stock"| DB
                        OrderService -->|"13: enviarNotif()"| NotifService
                        NotifService -->|"14: emails sent"| OrderService
                        OrderService -->|"15: pedido creado"| API
                        API -->|"16: 201 Created"| UI
                        UI -->|"17: confirmaci√≥n"| Cliente
                    
                        style Cliente fill:#e1f5ff
                        style DB fill:#fff4e1
                        style NotifService fill:#ffe1f5

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgQ2xpZW50ZSgoXCJcdWQ4M2RcdWRjNjQ8YnIvPjpDbGllbnRlXCIpKVxuICAgIFVJW1wiXHVkODNkXHVkY2YxPGJyLz46RnJvbnRlbmRcIl1cbiAgICBBUElbXCJcdWQ4M2RcdWRkMGM8YnIvPjpBUEkgQ29udHJvbGxlclwiXVxuICAgIE9yZGVyU2VydmljZVtcIlx1MjY5OVx1ZmUwZjxici8+Ok9yZGVyU2VydmljZVwiXVxuICAgIFN0b2NrU2VydmljZVtcIlx1ZDgzZFx1ZGNlNjxici8+OlN0b2NrU2VydmljZVwiXVxuICAgIFBheW1lbnRTZXJ2aWNlW1wiXHVkODNkXHVkY2IzPGJyLz46UGF5bWVudFNlcnZpY2VcIl1cbiAgICBEQlsoXCJcdWQ4M2RcdWRjYmU8YnIvPjpEYXRhYmFzZVwiKV1cbiAgICBOb3RpZlNlcnZpY2VbXCJcdWQ4M2RcdWRjZTc8YnIvPjpOb3RpZlNlcnZpY2VcIl1cblxuICAgIENsaWVudGUgLS0+fFwiMTogc2VsZWNjaW9uYVByb2R1Y3RvcygpXCJ8IFVJXG4gICAgVUkgLS0+fFwiMjogY3JlYXJQZWRpZG8oaXRlbXMpXCJ8IEFQSVxuICAgIEFQSSAtLT58XCIzOiB2YWxpZGFyU3RvY2soaXRlbXMpXCJ8IFN0b2NrU2VydmljZVxuICAgIFN0b2NrU2VydmljZSAtLT58XCI0OiBTRUxFQ1Qgc3RvY2tcInwgREJcbiAgICBEQiAtLT58XCI1OiBzdG9jayBkYXRhXCJ8IFN0b2NrU2VydmljZVxuICAgIFN0b2NrU2VydmljZSAtLT58XCI2OiBzdG9jayBPS1wifCBBUElcbiAgICBBUEkgLS0+fFwiNzogcHJvY2VzYXJQYWdvKG1vbnRvKVwifCBQYXltZW50U2VydmljZVxuICAgIFBheW1lbnRTZXJ2aWNlIC0tPnxcIjg6IHBhZ28gYXByb2JhZG9cInwgQVBJXG4gICAgQVBJIC0tPnxcIjk6IGNyZWFyUGVkaWRvKGRhdGEpXCJ8IE9yZGVyU2VydmljZVxuICAgIE9yZGVyU2VydmljZSAtLT58XCIxMDogSU5TRVJUIHBlZGlkb1wifCBEQlxuICAgIE9yZGVyU2VydmljZSAtLT58XCIxMTogcmVkdWNpclN0b2NrKGl0ZW1zKVwifCBTdG9ja1NlcnZpY2VcbiAgICBTdG9ja1NlcnZpY2UgLS0+fFwiMTI6IFVQREFURSBzdG9ja1wifCBEQlxuICAgIE9yZGVyU2VydmljZSAtLT58XCIxMzogZW52aWFyTm90aWYoKVwifCBOb3RpZlNlcnZpY2VcbiAgICBOb3RpZlNlcnZpY2UgLS0+fFwiMTQ6IGVtYWlscyBzZW50XCJ8IE9yZGVyU2VydmljZVxuICAgIE9yZGVyU2VydmljZSAtLT58XCIxNTogcGVkaWRvIGNyZWFkb1wifCBBUElcbiAgICBBUEkgLS0+fFwiMTY6IDIwMSBDcmVhdGVkXCJ8IFVJXG4gICAgVUkgLS0+fFwiMTc6IGNvbmZpcm1hY2lcdTAwZjNuXCJ8IENsaWVudGVcblxuICAgIHN0eWxlIENsaWVudGUgZmlsbDojZTFmNWZmXG4gICAgc3R5bGUgREIgZmlsbDojZmZmNGUxXG4gICAgc3R5bGUgTm90aWZTZXJ2aWNlIGZpbGw6I2ZmZTFmNSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgQ2xpZW50ZSgoXCJcdWQ4M2RcdWRjNjQ8YnIvPjpDbGllbnRlXCIpKVxuICAgIFVJW1wiXHVkODNkXHVkY2YxPGJyLz46RnJvbnRlbmRcIl1cbiAgICBBUElbXCJcdWQ4M2RcdWRkMGM8YnIvPjpBUEkgQ29udHJvbGxlclwiXVxuICAgIE9yZGVyU2VydmljZVtcIlx1MjY5OVx1ZmUwZjxici8+Ok9yZGVyU2VydmljZVwiXVxuICAgIFN0b2NrU2VydmljZVtcIlx1ZDgzZFx1ZGNlNjxici8+OlN0b2NrU2VydmljZVwiXVxuICAgIFBheW1lbnRTZXJ2aWNlW1wiXHVkODNkXHVkY2IzPGJyLz46UGF5bWVudFNlcnZpY2VcIl1cbiAgICBEQlsoXCJcdWQ4M2RcdWRjYmU8YnIvPjpEYXRhYmFzZVwiKV1cbiAgICBOb3RpZlNlcnZpY2VbXCJcdWQ4M2RcdWRjZTc8YnIvPjpOb3RpZlNlcnZpY2VcIl1cblxuICAgIENsaWVudGUgLS0+fFwiMTogc2VsZWNjaW9uYVByb2R1Y3RvcygpXCJ8IFVJXG4gICAgVUkgLS0+fFwiMjogY3JlYXJQZWRpZG8oaXRlbXMpXCJ8IEFQSVxuICAgIEFQSSAtLT58XCIzOiB2YWxpZGFyU3RvY2soaXRlbXMpXCJ8IFN0b2NrU2VydmljZVxuICAgIFN0b2NrU2VydmljZSAtLT58XCI0OiBTRUxFQ1Qgc3RvY2tcInwgREJcbiAgICBEQiAtLT58XCI1OiBzdG9jayBkYXRhXCJ8IFN0b2NrU2VydmljZVxuICAgIFN0b2NrU2VydmljZSAtLT58XCI2OiBzdG9jayBPS1wifCBBUElcbiAgICBBUEkgLS0+fFwiNzogcHJvY2VzYXJQYWdvKG1vbnRvKVwifCBQYXltZW50U2VydmljZVxuICAgIFBheW1lbnRTZXJ2aWNlIC0tPnxcIjg6IHBhZ28gYXByb2JhZG9cInwgQVBJXG4gICAgQVBJIC0tPnxcIjk6IGNyZWFyUGVkaWRvKGRhdGEpXCJ8IE9yZGVyU2VydmljZVxuICAgIE9yZGVyU2VydmljZSAtLT58XCIxMDogSU5TRVJUIHBlZGlkb1wifCBEQlxuICAgIE9yZGVyU2VydmljZSAtLT58XCIxMTogcmVkdWNpclN0b2NrKGl0ZW1zKVwifCBTdG9ja1NlcnZpY2VcbiAgICBTdG9ja1NlcnZpY2UgLS0+fFwiMTI6IFVQREFURSBzdG9ja1wifCBEQlxuICAgIE9yZGVyU2VydmljZSAtLT58XCIxMzogZW52aWFyTm90aWYoKVwifCBOb3RpZlNlcnZpY2VcbiAgICBOb3RpZlNlcnZpY2UgLS0+fFwiMTQ6IGVtYWlscyBzZW50XCJ8IE9yZGVyU2VydmljZVxuICAgIE9yZGVyU2VydmljZSAtLT58XCIxNTogcGVkaWRvIGNyZWFkb1wifCBBUElcbiAgICBBUEkgLS0+fFwiMTY6IDIwMSBDcmVhdGVkXCJ8IFVJXG4gICAgVUkgLS0+fFwiMTc6IGNvbmZpcm1hY2lcdTAwZjNuXCJ8IENsaWVudGVcblxuICAgIHN0eWxlIENsaWVudGUgZmlsbDojZTFmNWZmXG4gICAgc3R5bGUgREIgZmlsbDojZmZmNGUxXG4gICAgc3R5bGUgTm90aWZTZXJ2aWNlIGZpbGw6I2ZmZTFmNSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart LR
                        Cliente(("üë§<br/>:Cliente"))
                        UI["""""üì±<br/>:Frontend"""""]
                        API["""""üîå<br/>:API Controller"""""]
                        OrderService["""""‚öôÔ∏è<br/>:OrderService"""""]
                        StockService["""""üì¶<br/>:StockService"""""]
                        PaymentService["""""üí≥<br/>:PaymentService"""""]
                        DB[""""("üíæ<br/>:Database")""""]
                        NotifService["""""üìß<br/>:NotifService"""""]
                    
                        Cliente -->|"1: seleccionaProductos()"| UI
                        UI -->|"2: crearPedido(items)"| API
                        API -->|"3: validarStock(items)"| StockService
                        StockService -->|"4: SELECT stock"| DB
                        DB -->|"5: stock data"| StockService
                        StockService -->|"6: stock OK"| API
                        API -->|"7: procesarPago(monto)"| PaymentService
                        PaymentService -->|"8: pago aprobado"| API
                        API -->|"9: crearPedido(data)"| OrderService
                        OrderService -->|"10: INSERT pedido"| DB
                        OrderService -->|"11: reducirStock(items)"| StockService
                        StockService -->|"12: UPDATE stock"| DB
                        OrderService -->|"13: enviarNotif()"| NotifService
                        NotifService -->|"14: emails sent"| OrderService
                        OrderService -->|"15: pedido creado"| API
                        API -->|"16: 201 Created"| UI
                        UI -->|"17: confirmaci√≥n"| Cliente
                    
                        style Cliente fill:#e1f5ff
                        style DB fill:#fff4e1
                        style NotifService fill:#ffe1f5

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TB
                        Cliente(("üë§<br/>:Cliente"))
                        UI["""""üì±<br/>:Frontend"""""]
                        PaymentCtrl["""""üîå<br/>:PaymentController"""""]
                        PaymentSvc["""""‚öôÔ∏è<br/>:PaymentService"""""]
                        Gateway["""""üåê<br/>:PaymentGateway"""""]
                        DB[""""("üíæ<br/>:Database")""""]
                        OrderSvc["""""üì¶<br/>:OrderService"""""]
                        NotifSvc["""""üìß<br/>:NotifService"""""]
                    
                        Cliente -->|"1: ingresaDatosPago()"| UI
                        UI -->|"2: procesarPago(datos)"| PaymentCtrl
                        PaymentCtrl -->|"3: validarDatos()"| PaymentSvc
                        PaymentSvc -->|"4: getPedido(id)"| DB
                        DB -->|"5: pedido"| PaymentSvc
                        PaymentSvc -->|"6: chargeCard(amount, card)"| Gateway
                        Gateway -->|"7: [si aprobado] approved"| PaymentSvc
                        PaymentSvc -->|"8: INSERT pago"| DB
                        PaymentSvc -->|"9: INSERT transaccion"| DB
                        PaymentSvc -->|"10: updatePedido()"| OrderSvc
                        OrderSvc -->|"11: UPDATE estado"| DB
                        PaymentSvc -->|"12: notificarPago()"| NotifSvc
                        NotifSvc -->|"13: email sent"| PaymentSvc
                        PaymentSvc -->|"14: pagoExitoso"| PaymentCtrl
                        PaymentCtrl -->|"15: 200 OK"| UI
                        UI -->|"16: mostrarConfirmacion()"| Cliente
                    
                        Gateway -.->|"7a: [si rechazado] declined"| PaymentSvc
                        PaymentSvc -.->|"8a: registrarRechazo()"| DB
                        PaymentSvc -.->|"14a: pagoRechazado"| PaymentCtrl
                        PaymentCtrl -.->|"15a: 402 Payment Required"| UI
                    
                        style Cliente fill:#e1f5ff
                        style Gateway fill:#ffe1e1
                        style DB fill:#fff4e1

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgQ2xpZW50ZSgoXCJcdWQ4M2RcdWRjNjQ8YnIvPjpDbGllbnRlXCIpKVxuICAgIFVJW1wiXHVkODNkXHVkY2YxPGJyLz46RnJvbnRlbmRcIl1cbiAgICBQYXltZW50Q3RybFtcIlx1ZDgzZFx1ZGQwYzxici8+OlBheW1lbnRDb250cm9sbGVyXCJdXG4gICAgUGF5bWVudFN2Y1tcIlx1MjY5OVx1ZmUwZjxici8+OlBheW1lbnRTZXJ2aWNlXCJdXG4gICAgR2F0ZXdheVtcIlx1ZDgzY1x1ZGYxMDxici8+OlBheW1lbnRHYXRld2F5XCJdXG4gICAgREJbKFwiXHVkODNkXHVkY2JlPGJyLz46RGF0YWJhc2VcIildXG4gICAgT3JkZXJTdmNbXCJcdWQ4M2RcdWRjZTY8YnIvPjpPcmRlclNlcnZpY2VcIl1cbiAgICBOb3RpZlN2Y1tcIlx1ZDgzZFx1ZGNlNzxici8+Ok5vdGlmU2VydmljZVwiXVxuXG4gICAgQ2xpZW50ZSAtLT58XCIxOiBpbmdyZXNhRGF0b3NQYWdvKClcInwgVUlcbiAgICBVSSAtLT58XCIyOiBwcm9jZXNhclBhZ28oZGF0b3MpXCJ8IFBheW1lbnRDdHJsXG4gICAgUGF5bWVudEN0cmwgLS0+fFwiMzogdmFsaWRhckRhdG9zKClcInwgUGF5bWVudFN2Y1xuICAgIFBheW1lbnRTdmMgLS0+fFwiNDogZ2V0UGVkaWRvKGlkKVwifCBEQlxuICAgIERCIC0tPnxcIjU6IHBlZGlkb1wifCBQYXltZW50U3ZjXG4gICAgUGF5bWVudFN2YyAtLT58XCI2OiBjaGFyZ2VDYXJkKGFtb3VudCwgY2FyZClcInwgR2F0ZXdheVxuICAgIEdhdGV3YXkgLS0+fFwiNzogW3NpIGFwcm9iYWRvXSBhcHByb3ZlZFwifCBQYXltZW50U3ZjXG4gICAgUGF5bWVudFN2YyAtLT58XCI4OiBJTlNFUlQgcGFnb1wifCBEQlxuICAgIFBheW1lbnRTdmMgLS0+fFwiOTogSU5TRVJUIHRyYW5zYWNjaW9uXCJ8IERCXG4gICAgUGF5bWVudFN2YyAtLT58XCIxMDogdXBkYXRlUGVkaWRvKClcInwgT3JkZXJTdmNcbiAgICBPcmRlclN2YyAtLT58XCIxMTogVVBEQVRFIGVzdGFkb1wifCBEQlxuICAgIFBheW1lbnRTdmMgLS0+fFwiMTI6IG5vdGlmaWNhclBhZ28oKVwifCBOb3RpZlN2Y1xuICAgIE5vdGlmU3ZjIC0tPnxcIjEzOiBlbWFpbCBzZW50XCJ8IFBheW1lbnRTdmNcbiAgICBQYXltZW50U3ZjIC0tPnxcIjE0OiBwYWdvRXhpdG9zb1wifCBQYXltZW50Q3RybFxuICAgIFBheW1lbnRDdHJsIC0tPnxcIjE1OiAyMDAgT0tcInwgVUlcbiAgICBVSSAtLT58XCIxNjogbW9zdHJhckNvbmZpcm1hY2lvbigpXCJ8IENsaWVudGVcblxuICAgIEdhdGV3YXkgLS4tPnxcIjdhOiBbc2kgcmVjaGF6YWRvXSBkZWNsaW5lZFwifCBQYXltZW50U3ZjXG4gICAgUGF5bWVudFN2YyAtLi0+fFwiOGE6IHJlZ2lzdHJhclJlY2hhem8oKVwifCBEQlxuICAgIFBheW1lbnRTdmMgLS4tPnxcIjE0YTogcGFnb1JlY2hhemFkb1wifCBQYXltZW50Q3RybFxuICAgIFBheW1lbnRDdHJsIC0uLT58XCIxNWE6IDQwMiBQYXltZW50IFJlcXVpcmVkXCJ8IFVJXG5cbiAgICBzdHlsZSBDbGllbnRlIGZpbGw6I2UxZjVmZlxuICAgIHN0eWxlIEdhdGV3YXkgZmlsbDojZmZlMWUxXG4gICAgc3R5bGUgREIgZmlsbDojZmZmNGUxIiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgQ2xpZW50ZSgoXCJcdWQ4M2RcdWRjNjQ8YnIvPjpDbGllbnRlXCIpKVxuICAgIFVJW1wiXHVkODNkXHVkY2YxPGJyLz46RnJvbnRlbmRcIl1cbiAgICBQYXltZW50Q3RybFtcIlx1ZDgzZFx1ZGQwYzxici8+OlBheW1lbnRDb250cm9sbGVyXCJdXG4gICAgUGF5bWVudFN2Y1tcIlx1MjY5OVx1ZmUwZjxici8+OlBheW1lbnRTZXJ2aWNlXCJdXG4gICAgR2F0ZXdheVtcIlx1ZDgzY1x1ZGYxMDxici8+OlBheW1lbnRHYXRld2F5XCJdXG4gICAgREJbKFwiXHVkODNkXHVkY2JlPGJyLz46RGF0YWJhc2VcIildXG4gICAgT3JkZXJTdmNbXCJcdWQ4M2RcdWRjZTY8YnIvPjpPcmRlclNlcnZpY2VcIl1cbiAgICBOb3RpZlN2Y1tcIlx1ZDgzZFx1ZGNlNzxici8+Ok5vdGlmU2VydmljZVwiXVxuXG4gICAgQ2xpZW50ZSAtLT58XCIxOiBpbmdyZXNhRGF0b3NQYWdvKClcInwgVUlcbiAgICBVSSAtLT58XCIyOiBwcm9jZXNhclBhZ28oZGF0b3MpXCJ8IFBheW1lbnRDdHJsXG4gICAgUGF5bWVudEN0cmwgLS0+fFwiMzogdmFsaWRhckRhdG9zKClcInwgUGF5bWVudFN2Y1xuICAgIFBheW1lbnRTdmMgLS0+fFwiNDogZ2V0UGVkaWRvKGlkKVwifCBEQlxuICAgIERCIC0tPnxcIjU6IHBlZGlkb1wifCBQYXltZW50U3ZjXG4gICAgUGF5bWVudFN2YyAtLT58XCI2OiBjaGFyZ2VDYXJkKGFtb3VudCwgY2FyZClcInwgR2F0ZXdheVxuICAgIEdhdGV3YXkgLS0+fFwiNzogW3NpIGFwcm9iYWRvXSBhcHByb3ZlZFwifCBQYXltZW50U3ZjXG4gICAgUGF5bWVudFN2YyAtLT58XCI4OiBJTlNFUlQgcGFnb1wifCBEQlxuICAgIFBheW1lbnRTdmMgLS0+fFwiOTogSU5TRVJUIHRyYW5zYWNjaW9uXCJ8IERCXG4gICAgUGF5bWVudFN2YyAtLT58XCIxMDogdXBkYXRlUGVkaWRvKClcInwgT3JkZXJTdmNcbiAgICBPcmRlclN2YyAtLT58XCIxMTogVVBEQVRFIGVzdGFkb1wifCBEQlxuICAgIFBheW1lbnRTdmMgLS0+fFwiMTI6IG5vdGlmaWNhclBhZ28oKVwifCBOb3RpZlN2Y1xuICAgIE5vdGlmU3ZjIC0tPnxcIjEzOiBlbWFpbCBzZW50XCJ8IFBheW1lbnRTdmNcbiAgICBQYXltZW50U3ZjIC0tPnxcIjE0OiBwYWdvRXhpdG9zb1wifCBQYXltZW50Q3RybFxuICAgIFBheW1lbnRDdHJsIC0tPnxcIjE1OiAyMDAgT0tcInwgVUlcbiAgICBVSSAtLT58XCIxNjogbW9zdHJhckNvbmZpcm1hY2lvbigpXCJ8IENsaWVudGVcblxuICAgIEdhdGV3YXkgLS4tPnxcIjdhOiBbc2kgcmVjaGF6YWRvXSBkZWNsaW5lZFwifCBQYXltZW50U3ZjXG4gICAgUGF5bWVudFN2YyAtLi0+fFwiOGE6IHJlZ2lzdHJhclJlY2hhem8oKVwifCBEQlxuICAgIFBheW1lbnRTdmMgLS4tPnxcIjE0YTogcGFnb1JlY2hhemFkb1wifCBQYXltZW50Q3RybFxuICAgIFBheW1lbnRDdHJsIC0uLT58XCIxNWE6IDQwMiBQYXltZW50IFJlcXVpcmVkXCJ8IFVJXG5cbiAgICBzdHlsZSBDbGllbnRlIGZpbGw6I2UxZjVmZlxuICAgIHN0eWxlIEdhdGV3YXkgZmlsbDojZmZlMWUxXG4gICAgc3R5bGUgREIgZmlsbDojZmZmNGUxIiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TB
                        Cliente(("üë§<br/>:Cliente"))
                        UI["""""üì±<br/>:Frontend"""""]
                        PaymentCtrl["""""üîå<br/>:PaymentController"""""]
                        PaymentSvc["""""‚öôÔ∏è<br/>:PaymentService"""""]
                        Gateway["""""üåê<br/>:PaymentGateway"""""]
                        DB[""""("üíæ<br/>:Database")""""]
                        OrderSvc["""""üì¶<br/>:OrderService"""""]
                        NotifSvc["""""üìß<br/>:NotifService"""""]
                    
                        Cliente -->|"1: ingresaDatosPago()"| UI
                        UI -->|"2: procesarPago(datos)"| PaymentCtrl
                        PaymentCtrl -->|"3: validarDatos()"| PaymentSvc
                        PaymentSvc -->|"4: getPedido(id)"| DB
                        DB -->|"5: pedido"| PaymentSvc
                        PaymentSvc -->|"6: chargeCard(amount, card)"| Gateway
                        Gateway -->|"7: [si aprobado] approved"| PaymentSvc
                        PaymentSvc -->|"8: INSERT pago"| DB
                        PaymentSvc -->|"9: INSERT transaccion"| DB
                        PaymentSvc -->|"10: updatePedido()"| OrderSvc
                        OrderSvc -->|"11: UPDATE estado"| DB
                        PaymentSvc -->|"12: notificarPago()"| NotifSvc
                        NotifSvc -->|"13: email sent"| PaymentSvc
                        PaymentSvc -->|"14: pagoExitoso"| PaymentCtrl
                        PaymentCtrl -->|"15: 200 OK"| UI
                        UI -->|"16: mostrarConfirmacion()"| Cliente
                    
                        Gateway -.->|"7a: [si rechazado] declined"| PaymentSvc
                        PaymentSvc -.->|"8a: registrarRechazo()"| DB
                        PaymentSvc -.->|"14a: pagoRechazado"| PaymentCtrl
                        PaymentCtrl -.->|"15a: 402 Payment Required"| UI
                    
                        style Cliente fill:#e1f5ff
                        style Gateway fill:#ffe1e1
                        style DB fill:#fff4e1

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TB
                        Beat["""""‚è∞<br/>:CeleryBeat"""""]
                        Worker["""""‚öôÔ∏è<br/>:CeleryWorker"""""]
                        StockMonitor["""""üîç<br/>:StockMonitor"""""]
                        DB[""""("üíæ<br/>:Database")""""]
                        StockSvc["""""üì¶<br/>:StockService"""""]
                        NotifSvc["""""üìß<br/>:NotifService"""""]
                        Proveedor(("üë®‚Äçüíº<br/>:Proveedor"))
                    
                        Beat -->|"1: [cada 1h] trigger()"| Worker
                        Worker -->|"2: checkStockLevels()"| StockMonitor
                        StockMonitor -->|"3: getProductosConRecarga()"| DB
                        DB -->|"4: productos[]"| StockMonitor
                        
                        StockMonitor -->|"5: [loop] necesitaRecarga(p)"| StockSvc
                        StockSvc -->|"6: stock <= minimo?"| StockSvc
                        StockSvc -->|"7: [si] ejecutarRecarga(p)"| DB
                        DB -->|"8: BEGIN TRANSACTION"| DB
                        StockSvc -->|"9: UPDATE stock"| DB
                        StockSvc -->|"10: INSERT historial"| DB
                        StockSvc -->|"11: UPDATE config"| DB
                        DB -->|"12: COMMIT"| DB
                        
                        StockSvc -->|"13: notificarProveedor(p)"| NotifSvc
                        NotifSvc -->|"14: enviarEmail()"| Proveedor
                        Proveedor -->|"15: recibe alerta"| Proveedor
                        
                        StockSvc -->|"16: recarga completada"| StockMonitor
                        StockMonitor -->|"17: siguiente producto"| StockMonitor
                        
                        StockMonitor -->|"18: [fin loop] reporte"| Worker
                        Worker -->|"19: task completed"| Beat
                    
                        style Beat fill:#e1ffe1
                        style Proveedor fill:#e1f5ff
                        style DB fill:#fff4e1

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgQmVhdFtcIlx1MjNmMDxici8+OkNlbGVyeUJlYXRcIl1cbiAgICBXb3JrZXJbXCJcdTI2OTlcdWZlMGY8YnIvPjpDZWxlcnlXb3JrZXJcIl1cbiAgICBTdG9ja01vbml0b3JbXCJcdWQ4M2RcdWRkMGQ8YnIvPjpTdG9ja01vbml0b3JcIl1cbiAgICBEQlsoXCJcdWQ4M2RcdWRjYmU8YnIvPjpEYXRhYmFzZVwiKV1cbiAgICBTdG9ja1N2Y1tcIlx1ZDgzZFx1ZGNlNjxici8+OlN0b2NrU2VydmljZVwiXVxuICAgIE5vdGlmU3ZjW1wiXHVkODNkXHVkY2U3PGJyLz46Tm90aWZTZXJ2aWNlXCJdXG4gICAgUHJvdmVlZG9yKChcIlx1ZDgzZFx1ZGM2OFx1MjAwZFx1ZDgzZFx1ZGNiYzxici8+OlByb3ZlZWRvclwiKSlcblxuICAgIEJlYXQgLS0+fFwiMTogW2NhZGEgMWhdIHRyaWdnZXIoKVwifCBXb3JrZXJcbiAgICBXb3JrZXIgLS0+fFwiMjogY2hlY2tTdG9ja0xldmVscygpXCJ8IFN0b2NrTW9uaXRvclxuICAgIFN0b2NrTW9uaXRvciAtLT58XCIzOiBnZXRQcm9kdWN0b3NDb25SZWNhcmdhKClcInwgREJcbiAgICBEQiAtLT58XCI0OiBwcm9kdWN0b3NbXVwifCBTdG9ja01vbml0b3JcbiAgICBcbiAgICBTdG9ja01vbml0b3IgLS0+fFwiNTogW2xvb3BdIG5lY2VzaXRhUmVjYXJnYShwKVwifCBTdG9ja1N2Y1xuICAgIFN0b2NrU3ZjIC0tPnxcIjY6IHN0b2NrIDw9IG1pbmltbz9cInwgU3RvY2tTdmNcbiAgICBTdG9ja1N2YyAtLT58XCI3OiBbc2ldIGVqZWN1dGFyUmVjYXJnYShwKVwifCBEQlxuICAgIERCIC0tPnxcIjg6IEJFR0lOIFRSQU5TQUNUSU9OXCJ8IERCXG4gICAgU3RvY2tTdmMgLS0+fFwiOTogVVBEQVRFIHN0b2NrXCJ8IERCXG4gICAgU3RvY2tTdmMgLS0+fFwiMTA6IElOU0VSVCBoaXN0b3JpYWxcInwgREJcbiAgICBTdG9ja1N2YyAtLT58XCIxMTogVVBEQVRFIGNvbmZpZ1wifCBEQlxuICAgIERCIC0tPnxcIjEyOiBDT01NSVRcInwgREJcbiAgICBcbiAgICBTdG9ja1N2YyAtLT58XCIxMzogbm90aWZpY2FyUHJvdmVlZG9yKHApXCJ8IE5vdGlmU3ZjXG4gICAgTm90aWZTdmMgLS0+fFwiMTQ6IGVudmlhckVtYWlsKClcInwgUHJvdmVlZG9yXG4gICAgUHJvdmVlZG9yIC0tPnxcIjE1OiByZWNpYmUgYWxlcnRhXCJ8IFByb3ZlZWRvclxuICAgIFxuICAgIFN0b2NrU3ZjIC0tPnxcIjE2OiByZWNhcmdhIGNvbXBsZXRhZGFcInwgU3RvY2tNb25pdG9yXG4gICAgU3RvY2tNb25pdG9yIC0tPnxcIjE3OiBzaWd1aWVudGUgcHJvZHVjdG9cInwgU3RvY2tNb25pdG9yXG4gICAgXG4gICAgU3RvY2tNb25pdG9yIC0tPnxcIjE4OiBbZmluIGxvb3BdIHJlcG9ydGVcInwgV29ya2VyXG4gICAgV29ya2VyIC0tPnxcIjE5OiB0YXNrIGNvbXBsZXRlZFwifCBCZWF0XG5cbiAgICBzdHlsZSBCZWF0IGZpbGw6I2UxZmZlMVxuICAgIHN0eWxlIFByb3ZlZWRvciBmaWxsOiNlMWY1ZmZcbiAgICBzdHlsZSBEQiBmaWxsOiNmZmY0ZTEiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgQmVhdFtcIlx1MjNmMDxici8+OkNlbGVyeUJlYXRcIl1cbiAgICBXb3JrZXJbXCJcdTI2OTlcdWZlMGY8YnIvPjpDZWxlcnlXb3JrZXJcIl1cbiAgICBTdG9ja01vbml0b3JbXCJcdWQ4M2RcdWRkMGQ8YnIvPjpTdG9ja01vbml0b3JcIl1cbiAgICBEQlsoXCJcdWQ4M2RcdWRjYmU8YnIvPjpEYXRhYmFzZVwiKV1cbiAgICBTdG9ja1N2Y1tcIlx1ZDgzZFx1ZGNlNjxici8+OlN0b2NrU2VydmljZVwiXVxuICAgIE5vdGlmU3ZjW1wiXHVkODNkXHVkY2U3PGJyLz46Tm90aWZTZXJ2aWNlXCJdXG4gICAgUHJvdmVlZG9yKChcIlx1ZDgzZFx1ZGM2OFx1MjAwZFx1ZDgzZFx1ZGNiYzxici8+OlByb3ZlZWRvclwiKSlcblxuICAgIEJlYXQgLS0+fFwiMTogW2NhZGEgMWhdIHRyaWdnZXIoKVwifCBXb3JrZXJcbiAgICBXb3JrZXIgLS0+fFwiMjogY2hlY2tTdG9ja0xldmVscygpXCJ8IFN0b2NrTW9uaXRvclxuICAgIFN0b2NrTW9uaXRvciAtLT58XCIzOiBnZXRQcm9kdWN0b3NDb25SZWNhcmdhKClcInwgREJcbiAgICBEQiAtLT58XCI0OiBwcm9kdWN0b3NbXVwifCBTdG9ja01vbml0b3JcbiAgICBcbiAgICBTdG9ja01vbml0b3IgLS0+fFwiNTogW2xvb3BdIG5lY2VzaXRhUmVjYXJnYShwKVwifCBTdG9ja1N2Y1xuICAgIFN0b2NrU3ZjIC0tPnxcIjY6IHN0b2NrIDw9IG1pbmltbz9cInwgU3RvY2tTdmNcbiAgICBTdG9ja1N2YyAtLT58XCI3OiBbc2ldIGVqZWN1dGFyUmVjYXJnYShwKVwifCBEQlxuICAgIERCIC0tPnxcIjg6IEJFR0lOIFRSQU5TQUNUSU9OXCJ8IERCXG4gICAgU3RvY2tTdmMgLS0+fFwiOTogVVBEQVRFIHN0b2NrXCJ8IERCXG4gICAgU3RvY2tTdmMgLS0+fFwiMTA6IElOU0VSVCBoaXN0b3JpYWxcInwgREJcbiAgICBTdG9ja1N2YyAtLT58XCIxMTogVVBEQVRFIGNvbmZpZ1wifCBEQlxuICAgIERCIC0tPnxcIjEyOiBDT01NSVRcInwgREJcbiAgICBcbiAgICBTdG9ja1N2YyAtLT58XCIxMzogbm90aWZpY2FyUHJvdmVlZG9yKHApXCJ8IE5vdGlmU3ZjXG4gICAgTm90aWZTdmMgLS0+fFwiMTQ6IGVudmlhckVtYWlsKClcInwgUHJvdmVlZG9yXG4gICAgUHJvdmVlZG9yIC0tPnxcIjE1OiByZWNpYmUgYWxlcnRhXCJ8IFByb3ZlZWRvclxuICAgIFxuICAgIFN0b2NrU3ZjIC0tPnxcIjE2OiByZWNhcmdhIGNvbXBsZXRhZGFcInwgU3RvY2tNb25pdG9yXG4gICAgU3RvY2tNb25pdG9yIC0tPnxcIjE3OiBzaWd1aWVudGUgcHJvZHVjdG9cInwgU3RvY2tNb25pdG9yXG4gICAgXG4gICAgU3RvY2tNb25pdG9yIC0tPnxcIjE4OiBbZmluIGxvb3BdIHJlcG9ydGVcInwgV29ya2VyXG4gICAgV29ya2VyIC0tPnxcIjE5OiB0YXNrIGNvbXBsZXRlZFwifCBCZWF0XG5cbiAgICBzdHlsZSBCZWF0IGZpbGw6I2UxZmZlMVxuICAgIHN0eWxlIFByb3ZlZWRvciBmaWxsOiNlMWY1ZmZcbiAgICBzdHlsZSBEQiBmaWxsOiNmZmY0ZTEiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TB
                        Beat["""""‚è∞<br/>:CeleryBeat"""""]
                        Worker["""""‚öôÔ∏è<br/>:CeleryWorker"""""]
                        StockMonitor["""""üîç<br/>:StockMonitor"""""]
                        DB[""""("üíæ<br/>:Database")""""]
                        StockSvc["""""üì¶<br/>:StockService"""""]
                        NotifSvc["""""üìß<br/>:NotifService"""""]
                        Proveedor(("üë®‚Äçüíº<br/>:Proveedor"))
                    
                        Beat -->|"1: [cada 1h] trigger()"| Worker
                        Worker -->|"2: checkStockLevels()"| StockMonitor
                        StockMonitor -->|"3: getProductosConRecarga()"| DB
                        DB -->|"4: productos[]"| StockMonitor
                        
                        StockMonitor -->|"5: [loop] necesitaRecarga(p)"| StockSvc
                        StockSvc -->|"6: stock <= minimo?"| StockSvc
                        StockSvc -->|"7: [si] ejecutarRecarga(p)"| DB
                        DB -->|"8: BEGIN TRANSACTION"| DB
                        StockSvc -->|"9: UPDATE stock"| DB
                        StockSvc -->|"10: INSERT historial"| DB
                        StockSvc -->|"11: UPDATE config"| DB
                        DB -->|"12: COMMIT"| DB
                        
                        StockSvc -->|"13: notificarProveedor(p)"| NotifSvc
                        NotifSvc -->|"14: enviarEmail()"| Proveedor
                        Proveedor -->|"15: recibe alerta"| Proveedor
                        
                        StockSvc -->|"16: recarga completada"| StockMonitor
                        StockMonitor -->|"17: siguiente producto"| StockMonitor
                        
                        StockMonitor -->|"18: [fin loop] reporte"| Worker
                        Worker -->|"19: task completed"| Beat
                    
                        style Beat fill:#e1ffe1
                        style Proveedor fill:#e1f5ff
                        style DB fill:#fff4e1

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart LR
                        Logistica(("üöö<br/>:Logistica"))
                        UI["""""üì±<br/>:Frontend"""""]
                        OrderCtrl["""""üîå<br/>:OrderController"""""]
                        OrderSvc["""""‚öôÔ∏è<br/>:OrderService"""""]
                        DB[""""("üíæ<br/>:Database")""""]
                        VentaSvc["""""üí∞<br/>:VentaService"""""]
                        NotifSvc["""""üìß<br/>:NotifService"""""]
                        Cliente(("üë§<br/>:Cliente"))
                    
                        Logistica -->|"1: seleccionaPedido(id)"| UI
                        UI -->|"2: cambiarEstado(id, nuevo)"| OrderCtrl
                        OrderCtrl -->|"3: getPedido(id)"| DB
                        DB -->|"4: pedido actual"| OrderCtrl
                        OrderCtrl -->|"5: validarTransicion()"| OrderSvc
                        OrderSvc -->|"6: [si v√°lido] ok"| OrderCtrl
                        OrderCtrl -->|"7: updateEstado()"| DB
                        DB -->|"8: estado updated"| OrderCtrl
                        
                        OrderCtrl -->|"9: [si entregado] generarVenta()"| VentaSvc
                        VentaSvc -->|"10: INSERT venta"| DB
                        VentaSvc -->|"11: INSERT detalles"| DB
                        VentaSvc -->|"12: venta creada"| OrderCtrl
                        
                        OrderCtrl -->|"13: notificarCambio()"| NotifSvc
                        NotifSvc -->|"14: enviarEmail()"| Cliente
                        Cliente -->|"15: recibe notif"| Cliente
                        
                        OrderCtrl -->|"16: 200 OK (pedido)"| UI
                        UI -->|"17: mostrarConfirm()"| Logistica
                    
                        OrderSvc -.->|"6a: [inv√°lido] error"| OrderCtrl
                        OrderCtrl -.->|"16a: 400 Bad Request"| UI
                    
                        style Logistica fill:#ffe1f5
                        style Cliente fill:#e1f5ff
                        style DB fill:#fff4e1

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgTG9naXN0aWNhKChcIlx1ZDgzZFx1ZGU5YTxici8+OkxvZ2lzdGljYVwiKSlcbiAgICBVSVtcIlx1ZDgzZFx1ZGNmMTxici8+OkZyb250ZW5kXCJdXG4gICAgT3JkZXJDdHJsW1wiXHVkODNkXHVkZDBjPGJyLz46T3JkZXJDb250cm9sbGVyXCJdXG4gICAgT3JkZXJTdmNbXCJcdTI2OTlcdWZlMGY8YnIvPjpPcmRlclNlcnZpY2VcIl1cbiAgICBEQlsoXCJcdWQ4M2RcdWRjYmU8YnIvPjpEYXRhYmFzZVwiKV1cbiAgICBWZW50YVN2Y1tcIlx1ZDgzZFx1ZGNiMDxici8+OlZlbnRhU2VydmljZVwiXVxuICAgIE5vdGlmU3ZjW1wiXHVkODNkXHVkY2U3PGJyLz46Tm90aWZTZXJ2aWNlXCJdXG4gICAgQ2xpZW50ZSgoXCJcdWQ4M2RcdWRjNjQ8YnIvPjpDbGllbnRlXCIpKVxuXG4gICAgTG9naXN0aWNhIC0tPnxcIjE6IHNlbGVjY2lvbmFQZWRpZG8oaWQpXCJ8IFVJXG4gICAgVUkgLS0+fFwiMjogY2FtYmlhckVzdGFkbyhpZCwgbnVldm8pXCJ8IE9yZGVyQ3RybFxuICAgIE9yZGVyQ3RybCAtLT58XCIzOiBnZXRQZWRpZG8oaWQpXCJ8IERCXG4gICAgREIgLS0+fFwiNDogcGVkaWRvIGFjdHVhbFwifCBPcmRlckN0cmxcbiAgICBPcmRlckN0cmwgLS0+fFwiNTogdmFsaWRhclRyYW5zaWNpb24oKVwifCBPcmRlclN2Y1xuICAgIE9yZGVyU3ZjIC0tPnxcIjY6IFtzaSB2XHUwMGUxbGlkb10gb2tcInwgT3JkZXJDdHJsXG4gICAgT3JkZXJDdHJsIC0tPnxcIjc6IHVwZGF0ZUVzdGFkbygpXCJ8IERCXG4gICAgREIgLS0+fFwiODogZXN0YWRvIHVwZGF0ZWRcInwgT3JkZXJDdHJsXG4gICAgXG4gICAgT3JkZXJDdHJsIC0tPnxcIjk6IFtzaSBlbnRyZWdhZG9dIGdlbmVyYXJWZW50YSgpXCJ8IFZlbnRhU3ZjXG4gICAgVmVudGFTdmMgLS0+fFwiMTA6IElOU0VSVCB2ZW50YVwifCBEQlxuICAgIFZlbnRhU3ZjIC0tPnxcIjExOiBJTlNFUlQgZGV0YWxsZXNcInwgREJcbiAgICBWZW50YVN2YyAtLT58XCIxMjogdmVudGEgY3JlYWRhXCJ8IE9yZGVyQ3RybFxuICAgIFxuICAgIE9yZGVyQ3RybCAtLT58XCIxMzogbm90aWZpY2FyQ2FtYmlvKClcInwgTm90aWZTdmNcbiAgICBOb3RpZlN2YyAtLT58XCIxNDogZW52aWFyRW1haWwoKVwifCBDbGllbnRlXG4gICAgQ2xpZW50ZSAtLT58XCIxNTogcmVjaWJlIG5vdGlmXCJ8IENsaWVudGVcbiAgICBcbiAgICBPcmRlckN0cmwgLS0+fFwiMTY6IDIwMCBPSyAocGVkaWRvKVwifCBVSVxuICAgIFVJIC0tPnxcIjE3OiBtb3N0cmFyQ29uZmlybSgpXCJ8IExvZ2lzdGljYVxuXG4gICAgT3JkZXJTdmMgLS4tPnxcIjZhOiBbaW52XHUwMGUxbGlkb10gZXJyb3JcInwgT3JkZXJDdHJsXG4gICAgT3JkZXJDdHJsIC0uLT58XCIxNmE6IDQwMCBCYWQgUmVxdWVzdFwifCBVSVxuXG4gICAgc3R5bGUgTG9naXN0aWNhIGZpbGw6I2ZmZTFmNVxuICAgIHN0eWxlIENsaWVudGUgZmlsbDojZTFmNWZmXG4gICAgc3R5bGUgREIgZmlsbDojZmZmNGUxIiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgTG9naXN0aWNhKChcIlx1ZDgzZFx1ZGU5YTxici8+OkxvZ2lzdGljYVwiKSlcbiAgICBVSVtcIlx1ZDgzZFx1ZGNmMTxici8+OkZyb250ZW5kXCJdXG4gICAgT3JkZXJDdHJsW1wiXHVkODNkXHVkZDBjPGJyLz46T3JkZXJDb250cm9sbGVyXCJdXG4gICAgT3JkZXJTdmNbXCJcdTI2OTlcdWZlMGY8YnIvPjpPcmRlclNlcnZpY2VcIl1cbiAgICBEQlsoXCJcdWQ4M2RcdWRjYmU8YnIvPjpEYXRhYmFzZVwiKV1cbiAgICBWZW50YVN2Y1tcIlx1ZDgzZFx1ZGNiMDxici8+OlZlbnRhU2VydmljZVwiXVxuICAgIE5vdGlmU3ZjW1wiXHVkODNkXHVkY2U3PGJyLz46Tm90aWZTZXJ2aWNlXCJdXG4gICAgQ2xpZW50ZSgoXCJcdWQ4M2RcdWRjNjQ8YnIvPjpDbGllbnRlXCIpKVxuXG4gICAgTG9naXN0aWNhIC0tPnxcIjE6IHNlbGVjY2lvbmFQZWRpZG8oaWQpXCJ8IFVJXG4gICAgVUkgLS0+fFwiMjogY2FtYmlhckVzdGFkbyhpZCwgbnVldm8pXCJ8IE9yZGVyQ3RybFxuICAgIE9yZGVyQ3RybCAtLT58XCIzOiBnZXRQZWRpZG8oaWQpXCJ8IERCXG4gICAgREIgLS0+fFwiNDogcGVkaWRvIGFjdHVhbFwifCBPcmRlckN0cmxcbiAgICBPcmRlckN0cmwgLS0+fFwiNTogdmFsaWRhclRyYW5zaWNpb24oKVwifCBPcmRlclN2Y1xuICAgIE9yZGVyU3ZjIC0tPnxcIjY6IFtzaSB2XHUwMGUxbGlkb10gb2tcInwgT3JkZXJDdHJsXG4gICAgT3JkZXJDdHJsIC0tPnxcIjc6IHVwZGF0ZUVzdGFkbygpXCJ8IERCXG4gICAgREIgLS0+fFwiODogZXN0YWRvIHVwZGF0ZWRcInwgT3JkZXJDdHJsXG4gICAgXG4gICAgT3JkZXJDdHJsIC0tPnxcIjk6IFtzaSBlbnRyZWdhZG9dIGdlbmVyYXJWZW50YSgpXCJ8IFZlbnRhU3ZjXG4gICAgVmVudGFTdmMgLS0+fFwiMTA6IElOU0VSVCB2ZW50YVwifCBEQlxuICAgIFZlbnRhU3ZjIC0tPnxcIjExOiBJTlNFUlQgZGV0YWxsZXNcInwgREJcbiAgICBWZW50YVN2YyAtLT58XCIxMjogdmVudGEgY3JlYWRhXCJ8IE9yZGVyQ3RybFxuICAgIFxuICAgIE9yZGVyQ3RybCAtLT58XCIxMzogbm90aWZpY2FyQ2FtYmlvKClcInwgTm90aWZTdmNcbiAgICBOb3RpZlN2YyAtLT58XCIxNDogZW52aWFyRW1haWwoKVwifCBDbGllbnRlXG4gICAgQ2xpZW50ZSAtLT58XCIxNTogcmVjaWJlIG5vdGlmXCJ8IENsaWVudGVcbiAgICBcbiAgICBPcmRlckN0cmwgLS0+fFwiMTY6IDIwMCBPSyAocGVkaWRvKVwifCBVSVxuICAgIFVJIC0tPnxcIjE3OiBtb3N0cmFyQ29uZmlybSgpXCJ8IExvZ2lzdGljYVxuXG4gICAgT3JkZXJTdmMgLS4tPnxcIjZhOiBbaW52XHUwMGUxbGlkb10gZXJyb3JcInwgT3JkZXJDdHJsXG4gICAgT3JkZXJDdHJsIC0uLT58XCIxNmE6IDQwMCBCYWQgUmVxdWVzdFwifCBVSVxuXG4gICAgc3R5bGUgTG9naXN0aWNhIGZpbGw6I2ZmZTFmNVxuICAgIHN0eWxlIENsaWVudGUgZmlsbDojZTFmNWZmXG4gICAgc3R5bGUgREIgZmlsbDojZmZmNGUxIiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart LR
                        Logistica(("üöö<br/>:Logistica"))
                        UI["""""üì±<br/>:Frontend"""""]
                        OrderCtrl["""""üîå<br/>:OrderController"""""]
                        OrderSvc["""""‚öôÔ∏è<br/>:OrderService"""""]
                        DB[""""("üíæ<br/>:Database")""""]
                        VentaSvc["""""üí∞<br/>:VentaService"""""]
                        NotifSvc["""""üìß<br/>:NotifService"""""]
                        Cliente(("üë§<br/>:Cliente"))
                    
                        Logistica -->|"1: seleccionaPedido(id)"| UI
                        UI -->|"2: cambiarEstado(id, nuevo)"| OrderCtrl
                        OrderCtrl -->|"3: getPedido(id)"| DB
                        DB -->|"4: pedido actual"| OrderCtrl
                        OrderCtrl -->|"5: validarTransicion()"| OrderSvc
                        OrderSvc -->|"6: [si v√°lido] ok"| OrderCtrl
                        OrderCtrl -->|"7: updateEstado()"| DB
                        DB -->|"8: estado updated"| OrderCtrl
                        
                        OrderCtrl -->|"9: [si entregado] generarVenta()"| VentaSvc
                        VentaSvc -->|"10: INSERT venta"| DB
                        VentaSvc -->|"11: INSERT detalles"| DB
                        VentaSvc -->|"12: venta creada"| OrderCtrl
                        
                        OrderCtrl -->|"13: notificarCambio()"| NotifSvc
                        NotifSvc -->|"14: enviarEmail()"| Cliente
                        Cliente -->|"15: recibe notif"| Cliente
                        
                        OrderCtrl -->|"16: 200 OK (pedido)"| UI
                        UI -->|"17: mostrarConfirm()"| Logistica
                    
                        OrderSvc -.->|"6a: [inv√°lido] error"| OrderCtrl
                        OrderCtrl -.->|"16a: 400 Bad Request"| UI
                    
                        style Logistica fill:#ffe1f5
                        style Cliente fill:#e1f5ff
                        style DB fill:#fff4e1

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TB
                        Usuario(("üë§<br/>:Usuario"))
                        UI["""""üì±<br/>:Frontend"""""]
                        AuthCtrl["""""üîå<br/>:AuthController"""""]
                        AuthSvc["""""‚öôÔ∏è<br/>:AuthService"""""]
                        TokenGen["""""üîë<br/>:JWTGenerator"""""]
                        PassValidator["""""üîí<br/>:PasswordValidator"""""]
                        DB[""""("üíæ<br/>:Database")""""]
                    
                        Usuario -->|"1: ingresaCredenciales()"| UI
                        UI -->|"2: login(email, pass)"| AuthCtrl
                        AuthCtrl -->|"3: getUserByEmail()"| DB
                        DB -->|"4: usuario"| AuthCtrl
                        AuthCtrl -->|"5: checkPassword()"| PassValidator
                        PassValidator -->|"6: [si correcto] ok"| AuthCtrl
                        AuthCtrl -->|"7: verifyAccountStatus()"| AuthSvc
                        AuthSvc -->|"8: [si activo] ok"| AuthCtrl
                        AuthCtrl -->|"9: generateTokens(user)"| TokenGen
                        TokenGen -->|"10: create access (15min)"| TokenGen
                        TokenGen -->|"11: create refresh (7d)"| TokenGen
                        TokenGen -->|"12: {access, refresh}"| AuthCtrl
                        AuthCtrl -->|"13: UPDATE ultimo_ingreso"| DB
                        AuthCtrl -->|"14: 200 OK (tokens, user)"| UI
                        UI -->|"15: storeTokens()"| UI
                        UI -->|"16: redirectDashboard()"| Usuario
                    
                        PassValidator -.->|"6a: [incorrecto] error"| AuthCtrl
                        AuthCtrl -.->|"14a: 401 Unauthorized"| UI
                        
                        AuthSvc -.->|"8a: [suspendido] error"| AuthCtrl
                        AuthCtrl -.->|"14b: 403 Forbidden"| UI
                    
                        style Usuario fill:#e1f5ff
                        style TokenGen fill:#fff4e1
                        style DB fill:#fff4e1

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgVXN1YXJpbygoXCJcdWQ4M2RcdWRjNjQ8YnIvPjpVc3VhcmlvXCIpKVxuICAgIFVJW1wiXHVkODNkXHVkY2YxPGJyLz46RnJvbnRlbmRcIl1cbiAgICBBdXRoQ3RybFtcIlx1ZDgzZFx1ZGQwYzxici8+OkF1dGhDb250cm9sbGVyXCJdXG4gICAgQXV0aFN2Y1tcIlx1MjY5OVx1ZmUwZjxici8+OkF1dGhTZXJ2aWNlXCJdXG4gICAgVG9rZW5HZW5bXCJcdWQ4M2RcdWRkMTE8YnIvPjpKV1RHZW5lcmF0b3JcIl1cbiAgICBQYXNzVmFsaWRhdG9yW1wiXHVkODNkXHVkZDEyPGJyLz46UGFzc3dvcmRWYWxpZGF0b3JcIl1cbiAgICBEQlsoXCJcdWQ4M2RcdWRjYmU8YnIvPjpEYXRhYmFzZVwiKV1cblxuICAgIFVzdWFyaW8gLS0+fFwiMTogaW5ncmVzYUNyZWRlbmNpYWxlcygpXCJ8IFVJXG4gICAgVUkgLS0+fFwiMjogbG9naW4oZW1haWwsIHBhc3MpXCJ8IEF1dGhDdHJsXG4gICAgQXV0aEN0cmwgLS0+fFwiMzogZ2V0VXNlckJ5RW1haWwoKVwifCBEQlxuICAgIERCIC0tPnxcIjQ6IHVzdWFyaW9cInwgQXV0aEN0cmxcbiAgICBBdXRoQ3RybCAtLT58XCI1OiBjaGVja1Bhc3N3b3JkKClcInwgUGFzc1ZhbGlkYXRvclxuICAgIFBhc3NWYWxpZGF0b3IgLS0+fFwiNjogW3NpIGNvcnJlY3RvXSBva1wifCBBdXRoQ3RybFxuICAgIEF1dGhDdHJsIC0tPnxcIjc6IHZlcmlmeUFjY291bnRTdGF0dXMoKVwifCBBdXRoU3ZjXG4gICAgQXV0aFN2YyAtLT58XCI4OiBbc2kgYWN0aXZvXSBva1wifCBBdXRoQ3RybFxuICAgIEF1dGhDdHJsIC0tPnxcIjk6IGdlbmVyYXRlVG9rZW5zKHVzZXIpXCJ8IFRva2VuR2VuXG4gICAgVG9rZW5HZW4gLS0+fFwiMTA6IGNyZWF0ZSBhY2Nlc3MgKDE1bWluKVwifCBUb2tlbkdlblxuICAgIFRva2VuR2VuIC0tPnxcIjExOiBjcmVhdGUgcmVmcmVzaCAoN2QpXCJ8IFRva2VuR2VuXG4gICAgVG9rZW5HZW4gLS0+fFwiMTI6IHthY2Nlc3MsIHJlZnJlc2h9XCJ8IEF1dGhDdHJsXG4gICAgQXV0aEN0cmwgLS0+fFwiMTM6IFVQREFURSB1bHRpbW9faW5ncmVzb1wifCBEQlxuICAgIEF1dGhDdHJsIC0tPnxcIjE0OiAyMDAgT0sgKHRva2VucywgdXNlcilcInwgVUlcbiAgICBVSSAtLT58XCIxNTogc3RvcmVUb2tlbnMoKVwifCBVSVxuICAgIFVJIC0tPnxcIjE2OiByZWRpcmVjdERhc2hib2FyZCgpXCJ8IFVzdWFyaW9cblxuICAgIFBhc3NWYWxpZGF0b3IgLS4tPnxcIjZhOiBbaW5jb3JyZWN0b10gZXJyb3JcInwgQXV0aEN0cmxcbiAgICBBdXRoQ3RybCAtLi0+fFwiMTRhOiA0MDEgVW5hdXRob3JpemVkXCJ8IFVJXG4gICAgXG4gICAgQXV0aFN2YyAtLi0+fFwiOGE6IFtzdXNwZW5kaWRvXSBlcnJvclwifCBBdXRoQ3RybFxuICAgIEF1dGhDdHJsIC0uLT58XCIxNGI6IDQwMyBGb3JiaWRkZW5cInwgVUlcblxuICAgIHN0eWxlIFVzdWFyaW8gZmlsbDojZTFmNWZmXG4gICAgc3R5bGUgVG9rZW5HZW4gZmlsbDojZmZmNGUxXG4gICAgc3R5bGUgREIgZmlsbDojZmZmNGUxIiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgVXN1YXJpbygoXCJcdWQ4M2RcdWRjNjQ8YnIvPjpVc3VhcmlvXCIpKVxuICAgIFVJW1wiXHVkODNkXHVkY2YxPGJyLz46RnJvbnRlbmRcIl1cbiAgICBBdXRoQ3RybFtcIlx1ZDgzZFx1ZGQwYzxici8+OkF1dGhDb250cm9sbGVyXCJdXG4gICAgQXV0aFN2Y1tcIlx1MjY5OVx1ZmUwZjxici8+OkF1dGhTZXJ2aWNlXCJdXG4gICAgVG9rZW5HZW5bXCJcdWQ4M2RcdWRkMTE8YnIvPjpKV1RHZW5lcmF0b3JcIl1cbiAgICBQYXNzVmFsaWRhdG9yW1wiXHVkODNkXHVkZDEyPGJyLz46UGFzc3dvcmRWYWxpZGF0b3JcIl1cbiAgICBEQlsoXCJcdWQ4M2RcdWRjYmU8YnIvPjpEYXRhYmFzZVwiKV1cblxuICAgIFVzdWFyaW8gLS0+fFwiMTogaW5ncmVzYUNyZWRlbmNpYWxlcygpXCJ8IFVJXG4gICAgVUkgLS0+fFwiMjogbG9naW4oZW1haWwsIHBhc3MpXCJ8IEF1dGhDdHJsXG4gICAgQXV0aEN0cmwgLS0+fFwiMzogZ2V0VXNlckJ5RW1haWwoKVwifCBEQlxuICAgIERCIC0tPnxcIjQ6IHVzdWFyaW9cInwgQXV0aEN0cmxcbiAgICBBdXRoQ3RybCAtLT58XCI1OiBjaGVja1Bhc3N3b3JkKClcInwgUGFzc1ZhbGlkYXRvclxuICAgIFBhc3NWYWxpZGF0b3IgLS0+fFwiNjogW3NpIGNvcnJlY3RvXSBva1wifCBBdXRoQ3RybFxuICAgIEF1dGhDdHJsIC0tPnxcIjc6IHZlcmlmeUFjY291bnRTdGF0dXMoKVwifCBBdXRoU3ZjXG4gICAgQXV0aFN2YyAtLT58XCI4OiBbc2kgYWN0aXZvXSBva1wifCBBdXRoQ3RybFxuICAgIEF1dGhDdHJsIC0tPnxcIjk6IGdlbmVyYXRlVG9rZW5zKHVzZXIpXCJ8IFRva2VuR2VuXG4gICAgVG9rZW5HZW4gLS0+fFwiMTA6IGNyZWF0ZSBhY2Nlc3MgKDE1bWluKVwifCBUb2tlbkdlblxuICAgIFRva2VuR2VuIC0tPnxcIjExOiBjcmVhdGUgcmVmcmVzaCAoN2QpXCJ8IFRva2VuR2VuXG4gICAgVG9rZW5HZW4gLS0+fFwiMTI6IHthY2Nlc3MsIHJlZnJlc2h9XCJ8IEF1dGhDdHJsXG4gICAgQXV0aEN0cmwgLS0+fFwiMTM6IFVQREFURSB1bHRpbW9faW5ncmVzb1wifCBEQlxuICAgIEF1dGhDdHJsIC0tPnxcIjE0OiAyMDAgT0sgKHRva2VucywgdXNlcilcInwgVUlcbiAgICBVSSAtLT58XCIxNTogc3RvcmVUb2tlbnMoKVwifCBVSVxuICAgIFVJIC0tPnxcIjE2OiByZWRpcmVjdERhc2hib2FyZCgpXCJ8IFVzdWFyaW9cblxuICAgIFBhc3NWYWxpZGF0b3IgLS4tPnxcIjZhOiBbaW5jb3JyZWN0b10gZXJyb3JcInwgQXV0aEN0cmxcbiAgICBBdXRoQ3RybCAtLi0+fFwiMTRhOiA0MDEgVW5hdXRob3JpemVkXCJ8IFVJXG4gICAgXG4gICAgQXV0aFN2YyAtLi0+fFwiOGE6IFtzdXNwZW5kaWRvXSBlcnJvclwifCBBdXRoQ3RybFxuICAgIEF1dGhDdHJsIC0uLT58XCIxNGI6IDQwMyBGb3JiaWRkZW5cInwgVUlcblxuICAgIHN0eWxlIFVzdWFyaW8gZmlsbDojZTFmNWZmXG4gICAgc3R5bGUgVG9rZW5HZW4gZmlsbDojZmZmNGUxXG4gICAgc3R5bGUgREIgZmlsbDojZmZmNGUxIiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TB
                        Usuario(("üë§<br/>:Usuario"))
                        UI["""""üì±<br/>:Frontend"""""]
                        AuthCtrl["""""üîå<br/>:AuthController"""""]
                        AuthSvc["""""‚öôÔ∏è<br/>:AuthService"""""]
                        TokenGen["""""üîë<br/>:JWTGenerator"""""]
                        PassValidator["""""üîí<br/>:PasswordValidator"""""]
                        DB[""""("üíæ<br/>:Database")""""]
                    
                        Usuario -->|"1: ingresaCredenciales()"| UI
                        UI -->|"2: login(email, pass)"| AuthCtrl
                        AuthCtrl -->|"3: getUserByEmail()"| DB
                        DB -->|"4: usuario"| AuthCtrl
                        AuthCtrl -->|"5: checkPassword()"| PassValidator
                        PassValidator -->|"6: [si correcto] ok"| AuthCtrl
                        AuthCtrl -->|"7: verifyAccountStatus()"| AuthSvc
                        AuthSvc -->|"8: [si activo] ok"| AuthCtrl
                        AuthCtrl -->|"9: generateTokens(user)"| TokenGen
                        TokenGen -->|"10: create access (15min)"| TokenGen
                        TokenGen -->|"11: create refresh (7d)"| TokenGen
                        TokenGen -->|"12: {access, refresh}"| AuthCtrl
                        AuthCtrl -->|"13: UPDATE ultimo_ingreso"| DB
                        AuthCtrl -->|"14: 200 OK (tokens, user)"| UI
                        UI -->|"15: storeTokens()"| UI
                        UI -->|"16: redirectDashboard()"| Usuario
                    
                        PassValidator -.->|"6a: [incorrecto] error"| AuthCtrl
                        AuthCtrl -.->|"14a: 401 Unauthorized"| UI
                        
                        AuthSvc -.->|"8a: [suspendido] error"| AuthCtrl
                        AuthCtrl -.->|"14b: 403 Forbidden"| UI
                    
                        style Usuario fill:#e1f5ff
                        style TokenGen fill:#fff4e1
                        style DB fill:#fff4e1


.. dropdown:: üìä Diagrama Componentes Paquetes (7 diagramas)
    :open:
    :class-container: sd-mb-4

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TB
                        subgraph "Cliente (Navegador)"
                            UI[React UI]
                            Router[React Router]
                            State[State Management]
                        end
                    
                        subgraph "API Gateway"
                            NGINX[NGINX Reverse Proxy]
                        end
                    
                        subgraph "Backend Application Server"
                            DRF[Django REST Framework]
                            Auth[Auth Service]
                            Business[Business Logic]
                            ORM[Django ORM]
                        end
                    
                        subgraph "Task Queue"
                            Celery[Celery Workers]
                            Beat[Celery Beat]
                        end
                    
                        subgraph "Data Layer"
                            DB[""""(Database<br/>PostgreSQL/SQLite)""""]
                            Redis[(Redis Cache)]
                            Media[Media Storage]
                        end
                    
                        subgraph "External Services"
                            Email[""""Email Service<br/>SMTP""""]
                            Payment[""""Payment Gateway<br/>PayU/PSE""""]
                            SMS[""""SMS Service<br/>Twilio""""]
                        end
                    
                        UI --> Router
                        UI --> State
                        Router --> NGINX
                        State --> NGINX
                    
                        NGINX --> DRF
                        DRF --> Auth
                        DRF --> Business
                        Business --> ORM
                        ORM --> DB
                    
                        DRF --> Redis
                        Business --> Celery
                        Celery --> Beat
                        Celery --> Redis
                    
                        Celery --> Email
                        Celery --> SMS
                        Business --> Payment
                        ORM --> Media

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJDbGllbnRlIChOYXZlZ2Fkb3IpXCJcbiAgICAgICAgVUlbUmVhY3QgVUldXG4gICAgICAgIFJvdXRlcltSZWFjdCBSb3V0ZXJdXG4gICAgICAgIFN0YXRlW1N0YXRlIE1hbmFnZW1lbnRdXG4gICAgZW5kXG5cbiAgICBzdWJncmFwaCBcIkFQSSBHYXRld2F5XCJcbiAgICAgICAgTkdJTlhbTkdJTlggUmV2ZXJzZSBQcm94eV1cbiAgICBlbmRcblxuICAgIHN1YmdyYXBoIFwiQmFja2VuZCBBcHBsaWNhdGlvbiBTZXJ2ZXJcIlxuICAgICAgICBEUkZbRGphbmdvIFJFU1QgRnJhbWV3b3JrXVxuICAgICAgICBBdXRoW0F1dGggU2VydmljZV1cbiAgICAgICAgQnVzaW5lc3NbQnVzaW5lc3MgTG9naWNdXG4gICAgICAgIE9STVtEamFuZ28gT1JNXVxuICAgIGVuZFxuXG4gICAgc3ViZ3JhcGggXCJUYXNrIFF1ZXVlXCJcbiAgICAgICAgQ2VsZXJ5W0NlbGVyeSBXb3JrZXJzXVxuICAgICAgICBCZWF0W0NlbGVyeSBCZWF0XVxuICAgIGVuZFxuXG4gICAgc3ViZ3JhcGggXCJEYXRhIExheWVyXCJcbiAgICAgICAgREJbKERhdGFiYXNlPGJyLz5Qb3N0Z3JlU1FML1NRTGl0ZSldXG4gICAgICAgIFJlZGlzWyhSZWRpcyBDYWNoZSldXG4gICAgICAgIE1lZGlhW01lZGlhIFN0b3JhZ2VdXG4gICAgZW5kXG5cbiAgICBzdWJncmFwaCBcIkV4dGVybmFsIFNlcnZpY2VzXCJcbiAgICAgICAgRW1haWxbRW1haWwgU2VydmljZTxici8+U01UUF1cbiAgICAgICAgUGF5bWVudFtQYXltZW50IEdhdGV3YXk8YnIvPlBheVUvUFNFXVxuICAgICAgICBTTVNbU01TIFNlcnZpY2U8YnIvPlR3aWxpb11cbiAgICBlbmRcblxuICAgIFVJIC0tPiBSb3V0ZXJcbiAgICBVSSAtLT4gU3RhdGVcbiAgICBSb3V0ZXIgLS0+IE5HSU5YXG4gICAgU3RhdGUgLS0+IE5HSU5YXG5cbiAgICBOR0lOWCAtLT4gRFJGXG4gICAgRFJGIC0tPiBBdXRoXG4gICAgRFJGIC0tPiBCdXNpbmVzc1xuICAgIEJ1c2luZXNzIC0tPiBPUk1cbiAgICBPUk0gLS0+IERCXG5cbiAgICBEUkYgLS0+IFJlZGlzXG4gICAgQnVzaW5lc3MgLS0+IENlbGVyeVxuICAgIENlbGVyeSAtLT4gQmVhdFxuICAgIENlbGVyeSAtLT4gUmVkaXNcblxuICAgIENlbGVyeSAtLT4gRW1haWxcbiAgICBDZWxlcnkgLS0+IFNNU1xuICAgIEJ1c2luZXNzIC0tPiBQYXltZW50XG4gICAgT1JNIC0tPiBNZWRpYSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJDbGllbnRlIChOYXZlZ2Fkb3IpXCJcbiAgICAgICAgVUlbUmVhY3QgVUldXG4gICAgICAgIFJvdXRlcltSZWFjdCBSb3V0ZXJdXG4gICAgICAgIFN0YXRlW1N0YXRlIE1hbmFnZW1lbnRdXG4gICAgZW5kXG5cbiAgICBzdWJncmFwaCBcIkFQSSBHYXRld2F5XCJcbiAgICAgICAgTkdJTlhbTkdJTlggUmV2ZXJzZSBQcm94eV1cbiAgICBlbmRcblxuICAgIHN1YmdyYXBoIFwiQmFja2VuZCBBcHBsaWNhdGlvbiBTZXJ2ZXJcIlxuICAgICAgICBEUkZbRGphbmdvIFJFU1QgRnJhbWV3b3JrXVxuICAgICAgICBBdXRoW0F1dGggU2VydmljZV1cbiAgICAgICAgQnVzaW5lc3NbQnVzaW5lc3MgTG9naWNdXG4gICAgICAgIE9STVtEamFuZ28gT1JNXVxuICAgIGVuZFxuXG4gICAgc3ViZ3JhcGggXCJUYXNrIFF1ZXVlXCJcbiAgICAgICAgQ2VsZXJ5W0NlbGVyeSBXb3JrZXJzXVxuICAgICAgICBCZWF0W0NlbGVyeSBCZWF0XVxuICAgIGVuZFxuXG4gICAgc3ViZ3JhcGggXCJEYXRhIExheWVyXCJcbiAgICAgICAgREJbKERhdGFiYXNlPGJyLz5Qb3N0Z3JlU1FML1NRTGl0ZSldXG4gICAgICAgIFJlZGlzWyhSZWRpcyBDYWNoZSldXG4gICAgICAgIE1lZGlhW01lZGlhIFN0b3JhZ2VdXG4gICAgZW5kXG5cbiAgICBzdWJncmFwaCBcIkV4dGVybmFsIFNlcnZpY2VzXCJcbiAgICAgICAgRW1haWxbRW1haWwgU2VydmljZTxici8+U01UUF1cbiAgICAgICAgUGF5bWVudFtQYXltZW50IEdhdGV3YXk8YnIvPlBheVUvUFNFXVxuICAgICAgICBTTVNbU01TIFNlcnZpY2U8YnIvPlR3aWxpb11cbiAgICBlbmRcblxuICAgIFVJIC0tPiBSb3V0ZXJcbiAgICBVSSAtLT4gU3RhdGVcbiAgICBSb3V0ZXIgLS0+IE5HSU5YXG4gICAgU3RhdGUgLS0+IE5HSU5YXG5cbiAgICBOR0lOWCAtLT4gRFJGXG4gICAgRFJGIC0tPiBBdXRoXG4gICAgRFJGIC0tPiBCdXNpbmVzc1xuICAgIEJ1c2luZXNzIC0tPiBPUk1cbiAgICBPUk0gLS0+IERCXG5cbiAgICBEUkYgLS0+IFJlZGlzXG4gICAgQnVzaW5lc3MgLS0+IENlbGVyeVxuICAgIENlbGVyeSAtLT4gQmVhdFxuICAgIENlbGVyeSAtLT4gUmVkaXNcblxuICAgIENlbGVyeSAtLT4gRW1haWxcbiAgICBDZWxlcnkgLS0+IFNNU1xuICAgIEJ1c2luZXNzIC0tPiBQYXltZW50XG4gICAgT1JNIC0tPiBNZWRpYSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TB
                        subgraph "Cliente (Navegador)"
                            UI[React UI]
                            Router[React Router]
                            State[State Management]
                        end
                    
                        subgraph "API Gateway"
                            NGINX[NGINX Reverse Proxy]
                        end
                    
                        subgraph "Backend Application Server"
                            DRF[Django REST Framework]
                            Auth[Auth Service]
                            Business[Business Logic]
                            ORM[Django ORM]
                        end
                    
                        subgraph "Task Queue"
                            Celery[Celery Workers]
                            Beat[Celery Beat]
                        end
                    
                        subgraph "Data Layer"
                            DB[""""(Database<br/>PostgreSQL/SQLite)""""]
                            Redis[(Redis Cache)]
                            Media[Media Storage]
                        end
                    
                        subgraph "External Services"
                            Email[""""Email Service<br/>SMTP""""]
                            Payment[""""Payment Gateway<br/>PayU/PSE""""]
                            SMS[""""SMS Service<br/>Twilio""""]
                        end
                    
                        UI --> Router
                        UI --> State
                        Router --> NGINX
                        State --> NGINX
                    
                        NGINX --> DRF
                        DRF --> Auth
                        DRF --> Business
                        Business --> ORM
                        ORM --> DB
                    
                        DRF --> Redis
                        Business --> Celery
                        Celery --> Beat
                        Celery --> Redis
                    
                        Celery --> Email
                        Celery --> SMS
                        Business --> Payment
                        ORM --> Media

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    graph TD
                        subgraph "Frontend Components"
                            App[App.jsx]
                            
                            subgraph "Pages"
                                Login[Login.jsx]
                                Register[Register.jsx]
                                Dashboard[Dashboard*.jsx]
                                Catalog[ProductCatalog.jsx]
                            end
                    
                            subgraph "Components"
                                Navbar[Navbar.jsx]
                                Footer[Footer.jsx]
                                ProductCard[ProductCard.jsx]
                                OrderCard[OrderCard.jsx]
                            end
                    
                            subgraph "Services"
                                API[api.js]
                                Auth_Service[authService.js]
                            end
                    
                            subgraph "Utils"
                                Constants[constants.js]
                                Helpers[helpers.js]
                            end
                    
                            subgraph "Styles"
                                CSS[*.css]
                            end
                        end
                    
                        App --> Pages
                        App --> Components
                        Pages --> Components
                        Pages --> Services
                        Services --> API
                        Services --> Auth_Service
                        Components --> Utils
                        Pages --> Styles
                        Components --> Styles

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIFREXG4gICAgc3ViZ3JhcGggXCJGcm9udGVuZCBDb21wb25lbnRzXCJcbiAgICAgICAgQXBwW0FwcC5qc3hdXG4gICAgICAgIFxuICAgICAgICBzdWJncmFwaCBcIlBhZ2VzXCJcbiAgICAgICAgICAgIExvZ2luW0xvZ2luLmpzeF1cbiAgICAgICAgICAgIFJlZ2lzdGVyW1JlZ2lzdGVyLmpzeF1cbiAgICAgICAgICAgIERhc2hib2FyZFtEYXNoYm9hcmQqLmpzeF1cbiAgICAgICAgICAgIENhdGFsb2dbUHJvZHVjdENhdGFsb2cuanN4XVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBcIkNvbXBvbmVudHNcIlxuICAgICAgICAgICAgTmF2YmFyW05hdmJhci5qc3hdXG4gICAgICAgICAgICBGb290ZXJbRm9vdGVyLmpzeF1cbiAgICAgICAgICAgIFByb2R1Y3RDYXJkW1Byb2R1Y3RDYXJkLmpzeF1cbiAgICAgICAgICAgIE9yZGVyQ2FyZFtPcmRlckNhcmQuanN4XVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBcIlNlcnZpY2VzXCJcbiAgICAgICAgICAgIEFQSVthcGkuanNdXG4gICAgICAgICAgICBBdXRoX1NlcnZpY2VbYXV0aFNlcnZpY2UuanNdXG4gICAgICAgIGVuZFxuXG4gICAgICAgIHN1YmdyYXBoIFwiVXRpbHNcIlxuICAgICAgICAgICAgQ29uc3RhbnRzW2NvbnN0YW50cy5qc11cbiAgICAgICAgICAgIEhlbHBlcnNbaGVscGVycy5qc11cbiAgICAgICAgZW5kXG5cbiAgICAgICAgc3ViZ3JhcGggXCJTdHlsZXNcIlxuICAgICAgICAgICAgQ1NTWyouY3NzXVxuICAgICAgICBlbmRcbiAgICBlbmRcblxuICAgIEFwcCAtLT4gUGFnZXNcbiAgICBBcHAgLS0+IENvbXBvbmVudHNcbiAgICBQYWdlcyAtLT4gQ29tcG9uZW50c1xuICAgIFBhZ2VzIC0tPiBTZXJ2aWNlc1xuICAgIFNlcnZpY2VzIC0tPiBBUElcbiAgICBTZXJ2aWNlcyAtLT4gQXV0aF9TZXJ2aWNlXG4gICAgQ29tcG9uZW50cyAtLT4gVXRpbHNcbiAgICBQYWdlcyAtLT4gU3R5bGVzXG4gICAgQ29tcG9uZW50cyAtLT4gU3R5bGVzIiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIFREXG4gICAgc3ViZ3JhcGggXCJGcm9udGVuZCBDb21wb25lbnRzXCJcbiAgICAgICAgQXBwW0FwcC5qc3hdXG4gICAgICAgIFxuICAgICAgICBzdWJncmFwaCBcIlBhZ2VzXCJcbiAgICAgICAgICAgIExvZ2luW0xvZ2luLmpzeF1cbiAgICAgICAgICAgIFJlZ2lzdGVyW1JlZ2lzdGVyLmpzeF1cbiAgICAgICAgICAgIERhc2hib2FyZFtEYXNoYm9hcmQqLmpzeF1cbiAgICAgICAgICAgIENhdGFsb2dbUHJvZHVjdENhdGFsb2cuanN4XVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBcIkNvbXBvbmVudHNcIlxuICAgICAgICAgICAgTmF2YmFyW05hdmJhci5qc3hdXG4gICAgICAgICAgICBGb290ZXJbRm9vdGVyLmpzeF1cbiAgICAgICAgICAgIFByb2R1Y3RDYXJkW1Byb2R1Y3RDYXJkLmpzeF1cbiAgICAgICAgICAgIE9yZGVyQ2FyZFtPcmRlckNhcmQuanN4XVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBcIlNlcnZpY2VzXCJcbiAgICAgICAgICAgIEFQSVthcGkuanNdXG4gICAgICAgICAgICBBdXRoX1NlcnZpY2VbYXV0aFNlcnZpY2UuanNdXG4gICAgICAgIGVuZFxuXG4gICAgICAgIHN1YmdyYXBoIFwiVXRpbHNcIlxuICAgICAgICAgICAgQ29uc3RhbnRzW2NvbnN0YW50cy5qc11cbiAgICAgICAgICAgIEhlbHBlcnNbaGVscGVycy5qc11cbiAgICAgICAgZW5kXG5cbiAgICAgICAgc3ViZ3JhcGggXCJTdHlsZXNcIlxuICAgICAgICAgICAgQ1NTWyouY3NzXVxuICAgICAgICBlbmRcbiAgICBlbmRcblxuICAgIEFwcCAtLT4gUGFnZXNcbiAgICBBcHAgLS0+IENvbXBvbmVudHNcbiAgICBQYWdlcyAtLT4gQ29tcG9uZW50c1xuICAgIFBhZ2VzIC0tPiBTZXJ2aWNlc1xuICAgIFNlcnZpY2VzIC0tPiBBUElcbiAgICBTZXJ2aWNlcyAtLT4gQXV0aF9TZXJ2aWNlXG4gICAgQ29tcG9uZW50cyAtLT4gVXRpbHNcbiAgICBQYWdlcyAtLT4gU3R5bGVzXG4gICAgQ29tcG9uZW50cyAtLT4gU3R5bGVzIiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    graph TD
                        subgraph "Frontend Components"
                            App[App.jsx]
                            
                            subgraph "Pages"
                                Login[Login.jsx]
                                Register[Register.jsx]
                                Dashboard[Dashboard*.jsx]
                                Catalog[ProductCatalog.jsx]
                            end
                    
                            subgraph "Components"
                                Navbar[Navbar.jsx]
                                Footer[Footer.jsx]
                                ProductCard[ProductCard.jsx]
                                OrderCard[OrderCard.jsx]
                            end
                    
                            subgraph "Services"
                                API[api.js]
                                Auth_Service[authService.js]
                            end
                    
                            subgraph "Utils"
                                Constants[constants.js]
                                Helpers[helpers.js]
                            end
                    
                            subgraph "Styles"
                                CSS[*.css]
                            end
                        end
                    
                        App --> Pages
                        App --> Components
                        Pages --> Components
                        Pages --> Services
                        Services --> API
                        Services --> Auth_Service
                        Components --> Utils
                        Pages --> Styles
                        Components --> Styles

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    graph TD
                        subgraph "Backend Components"
                            Settings[settings.py]
                            URLs[urls.py]
                    
                            subgraph "Apps"
                                Usuarios[usuarios/]
                                Productos[productos/]
                                Ventas[ventas/]
                                Pagos[pagos/]
                                Notific[notificaciones/]
                            end
                    
                            subgraph "Core"
                                Core_Views[core/views.py]
                                Core_Utils[core/utils.py]
                            end
                    
                            subgraph "Each App Structure"
                                Models[models.py]
                                Views[views.py]
                                Serializers[serializers.py]
                                Tests[tests/]
                            end
                        end
                    
                        Settings --> Apps
                        URLs --> Apps
                        Apps --> Models
                        Apps --> Views
                        Apps --> Serializers
                        Views --> Models
                        Views --> Serializers
                        Apps --> Core

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIFREXG4gICAgc3ViZ3JhcGggXCJCYWNrZW5kIENvbXBvbmVudHNcIlxuICAgICAgICBTZXR0aW5nc1tzZXR0aW5ncy5weV1cbiAgICAgICAgVVJMc1t1cmxzLnB5XVxuXG4gICAgICAgIHN1YmdyYXBoIFwiQXBwc1wiXG4gICAgICAgICAgICBVc3Vhcmlvc1t1c3Vhcmlvcy9dXG4gICAgICAgICAgICBQcm9kdWN0b3NbcHJvZHVjdG9zL11cbiAgICAgICAgICAgIFZlbnRhc1t2ZW50YXMvXVxuICAgICAgICAgICAgUGFnb3NbcGFnb3MvXVxuICAgICAgICAgICAgTm90aWZpY1tub3RpZmljYWNpb25lcy9dXG4gICAgICAgIGVuZFxuXG4gICAgICAgIHN1YmdyYXBoIFwiQ29yZVwiXG4gICAgICAgICAgICBDb3JlX1ZpZXdzW2NvcmUvdmlld3MucHldXG4gICAgICAgICAgICBDb3JlX1V0aWxzW2NvcmUvdXRpbHMucHldXG4gICAgICAgIGVuZFxuXG4gICAgICAgIHN1YmdyYXBoIFwiRWFjaCBBcHAgU3RydWN0dXJlXCJcbiAgICAgICAgICAgIE1vZGVsc1ttb2RlbHMucHldXG4gICAgICAgICAgICBWaWV3c1t2aWV3cy5weV1cbiAgICAgICAgICAgIFNlcmlhbGl6ZXJzW3NlcmlhbGl6ZXJzLnB5XVxuICAgICAgICAgICAgVGVzdHNbdGVzdHMvXVxuICAgICAgICBlbmRcbiAgICBlbmRcblxuICAgIFNldHRpbmdzIC0tPiBBcHBzXG4gICAgVVJMcyAtLT4gQXBwc1xuICAgIEFwcHMgLS0+IE1vZGVsc1xuICAgIEFwcHMgLS0+IFZpZXdzXG4gICAgQXBwcyAtLT4gU2VyaWFsaXplcnNcbiAgICBWaWV3cyAtLT4gTW9kZWxzXG4gICAgVmlld3MgLS0+IFNlcmlhbGl6ZXJzXG4gICAgQXBwcyAtLT4gQ29yZSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIFREXG4gICAgc3ViZ3JhcGggXCJCYWNrZW5kIENvbXBvbmVudHNcIlxuICAgICAgICBTZXR0aW5nc1tzZXR0aW5ncy5weV1cbiAgICAgICAgVVJMc1t1cmxzLnB5XVxuXG4gICAgICAgIHN1YmdyYXBoIFwiQXBwc1wiXG4gICAgICAgICAgICBVc3Vhcmlvc1t1c3Vhcmlvcy9dXG4gICAgICAgICAgICBQcm9kdWN0b3NbcHJvZHVjdG9zL11cbiAgICAgICAgICAgIFZlbnRhc1t2ZW50YXMvXVxuICAgICAgICAgICAgUGFnb3NbcGFnb3MvXVxuICAgICAgICAgICAgTm90aWZpY1tub3RpZmljYWNpb25lcy9dXG4gICAgICAgIGVuZFxuXG4gICAgICAgIHN1YmdyYXBoIFwiQ29yZVwiXG4gICAgICAgICAgICBDb3JlX1ZpZXdzW2NvcmUvdmlld3MucHldXG4gICAgICAgICAgICBDb3JlX1V0aWxzW2NvcmUvdXRpbHMucHldXG4gICAgICAgIGVuZFxuXG4gICAgICAgIHN1YmdyYXBoIFwiRWFjaCBBcHAgU3RydWN0dXJlXCJcbiAgICAgICAgICAgIE1vZGVsc1ttb2RlbHMucHldXG4gICAgICAgICAgICBWaWV3c1t2aWV3cy5weV1cbiAgICAgICAgICAgIFNlcmlhbGl6ZXJzW3NlcmlhbGl6ZXJzLnB5XVxuICAgICAgICAgICAgVGVzdHNbdGVzdHMvXVxuICAgICAgICBlbmRcbiAgICBlbmRcblxuICAgIFNldHRpbmdzIC0tPiBBcHBzXG4gICAgVVJMcyAtLT4gQXBwc1xuICAgIEFwcHMgLS0+IE1vZGVsc1xuICAgIEFwcHMgLS0+IFZpZXdzXG4gICAgQXBwcyAtLT4gU2VyaWFsaXplcnNcbiAgICBWaWV3cyAtLT4gTW9kZWxzXG4gICAgVmlld3MgLS0+IFNlcmlhbGl6ZXJzXG4gICAgQXBwcyAtLT4gQ29yZSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    graph TD
                        subgraph "Backend Components"
                            Settings[settings.py]
                            URLs[urls.py]
                    
                            subgraph "Apps"
                                Usuarios[usuarios/]
                                Productos[productos/]
                                Ventas[ventas/]
                                Pagos[pagos/]
                                Notific[notificaciones/]
                            end
                    
                            subgraph "Core"
                                Core_Views[core/views.py]
                                Core_Utils[core/utils.py]
                            end
                    
                            subgraph "Each App Structure"
                                Models[models.py]
                                Views[views.py]
                                Serializers[serializers.py]
                                Tests[tests/]
                            end
                        end
                    
                        Settings --> Apps
                        URLs --> Apps
                        Apps --> Models
                        Apps --> Views
                        Apps --> Serializers
                        Views --> Models
                        Views --> Serializers
                        Apps --> Core

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TB
                        subgraph "Orden Management System"
                            subgraph "Order Controller"
                                API_Order[REST API Endpoint]
                                Validator[Order Validator]
                                Calculator[Price Calculator]
                            end
                    
                            subgraph "Order Processing"
                                Creator[Order Creator]
                                StateManager[State Manager]
                                StockReducer[Stock Reducer]
                            end
                    
                            subgraph "Notification System"
                                NotifService[Notification Service]
                                EmailSender[Email Sender]
                                SMSSender[SMS Sender]
                            end
                    
                            subgraph "Payment Integration"
                                PaymentService[Payment Service]
                                GatewayAdapter[Gateway Adapter]
                            end
                        end
                    
                        API_Order --> Validator
                        Validator --> Calculator
                        Calculator --> Creator
                        Creator --> StockReducer
                        Creator --> StateManager
                        StateManager --> NotifService
                        NotifService --> EmailSender
                        NotifService --> SMSSender
                        Creator --> PaymentService
                        PaymentService --> GatewayAdapter

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJPcmRlbiBNYW5hZ2VtZW50IFN5c3RlbVwiXG4gICAgICAgIHN1YmdyYXBoIFwiT3JkZXIgQ29udHJvbGxlclwiXG4gICAgICAgICAgICBBUElfT3JkZXJbUkVTVCBBUEkgRW5kcG9pbnRdXG4gICAgICAgICAgICBWYWxpZGF0b3JbT3JkZXIgVmFsaWRhdG9yXVxuICAgICAgICAgICAgQ2FsY3VsYXRvcltQcmljZSBDYWxjdWxhdG9yXVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBcIk9yZGVyIFByb2Nlc3NpbmdcIlxuICAgICAgICAgICAgQ3JlYXRvcltPcmRlciBDcmVhdG9yXVxuICAgICAgICAgICAgU3RhdGVNYW5hZ2VyW1N0YXRlIE1hbmFnZXJdXG4gICAgICAgICAgICBTdG9ja1JlZHVjZXJbU3RvY2sgUmVkdWNlcl1cbiAgICAgICAgZW5kXG5cbiAgICAgICAgc3ViZ3JhcGggXCJOb3RpZmljYXRpb24gU3lzdGVtXCJcbiAgICAgICAgICAgIE5vdGlmU2VydmljZVtOb3RpZmljYXRpb24gU2VydmljZV1cbiAgICAgICAgICAgIEVtYWlsU2VuZGVyW0VtYWlsIFNlbmRlcl1cbiAgICAgICAgICAgIFNNU1NlbmRlcltTTVMgU2VuZGVyXVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBcIlBheW1lbnQgSW50ZWdyYXRpb25cIlxuICAgICAgICAgICAgUGF5bWVudFNlcnZpY2VbUGF5bWVudCBTZXJ2aWNlXVxuICAgICAgICAgICAgR2F0ZXdheUFkYXB0ZXJbR2F0ZXdheSBBZGFwdGVyXVxuICAgICAgICBlbmRcbiAgICBlbmRcblxuICAgIEFQSV9PcmRlciAtLT4gVmFsaWRhdG9yXG4gICAgVmFsaWRhdG9yIC0tPiBDYWxjdWxhdG9yXG4gICAgQ2FsY3VsYXRvciAtLT4gQ3JlYXRvclxuICAgIENyZWF0b3IgLS0+IFN0b2NrUmVkdWNlclxuICAgIENyZWF0b3IgLS0+IFN0YXRlTWFuYWdlclxuICAgIFN0YXRlTWFuYWdlciAtLT4gTm90aWZTZXJ2aWNlXG4gICAgTm90aWZTZXJ2aWNlIC0tPiBFbWFpbFNlbmRlclxuICAgIE5vdGlmU2VydmljZSAtLT4gU01TU2VuZGVyXG4gICAgQ3JlYXRvciAtLT4gUGF5bWVudFNlcnZpY2VcbiAgICBQYXltZW50U2VydmljZSAtLT4gR2F0ZXdheUFkYXB0ZXIiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJPcmRlbiBNYW5hZ2VtZW50IFN5c3RlbVwiXG4gICAgICAgIHN1YmdyYXBoIFwiT3JkZXIgQ29udHJvbGxlclwiXG4gICAgICAgICAgICBBUElfT3JkZXJbUkVTVCBBUEkgRW5kcG9pbnRdXG4gICAgICAgICAgICBWYWxpZGF0b3JbT3JkZXIgVmFsaWRhdG9yXVxuICAgICAgICAgICAgQ2FsY3VsYXRvcltQcmljZSBDYWxjdWxhdG9yXVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBcIk9yZGVyIFByb2Nlc3NpbmdcIlxuICAgICAgICAgICAgQ3JlYXRvcltPcmRlciBDcmVhdG9yXVxuICAgICAgICAgICAgU3RhdGVNYW5hZ2VyW1N0YXRlIE1hbmFnZXJdXG4gICAgICAgICAgICBTdG9ja1JlZHVjZXJbU3RvY2sgUmVkdWNlcl1cbiAgICAgICAgZW5kXG5cbiAgICAgICAgc3ViZ3JhcGggXCJOb3RpZmljYXRpb24gU3lzdGVtXCJcbiAgICAgICAgICAgIE5vdGlmU2VydmljZVtOb3RpZmljYXRpb24gU2VydmljZV1cbiAgICAgICAgICAgIEVtYWlsU2VuZGVyW0VtYWlsIFNlbmRlcl1cbiAgICAgICAgICAgIFNNU1NlbmRlcltTTVMgU2VuZGVyXVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBcIlBheW1lbnQgSW50ZWdyYXRpb25cIlxuICAgICAgICAgICAgUGF5bWVudFNlcnZpY2VbUGF5bWVudCBTZXJ2aWNlXVxuICAgICAgICAgICAgR2F0ZXdheUFkYXB0ZXJbR2F0ZXdheSBBZGFwdGVyXVxuICAgICAgICBlbmRcbiAgICBlbmRcblxuICAgIEFQSV9PcmRlciAtLT4gVmFsaWRhdG9yXG4gICAgVmFsaWRhdG9yIC0tPiBDYWxjdWxhdG9yXG4gICAgQ2FsY3VsYXRvciAtLT4gQ3JlYXRvclxuICAgIENyZWF0b3IgLS0+IFN0b2NrUmVkdWNlclxuICAgIENyZWF0b3IgLS0+IFN0YXRlTWFuYWdlclxuICAgIFN0YXRlTWFuYWdlciAtLT4gTm90aWZTZXJ2aWNlXG4gICAgTm90aWZTZXJ2aWNlIC0tPiBFbWFpbFNlbmRlclxuICAgIE5vdGlmU2VydmljZSAtLT4gU01TU2VuZGVyXG4gICAgQ3JlYXRvciAtLT4gUGF5bWVudFNlcnZpY2VcbiAgICBQYXltZW50U2VydmljZSAtLT4gR2F0ZXdheUFkYXB0ZXIiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TB
                        subgraph "Orden Management System"
                            subgraph "Order Controller"
                                API_Order[REST API Endpoint]
                                Validator[Order Validator]
                                Calculator[Price Calculator]
                            end
                    
                            subgraph "Order Processing"
                                Creator[Order Creator]
                                StateManager[State Manager]
                                StockReducer[Stock Reducer]
                            end
                    
                            subgraph "Notification System"
                                NotifService[Notification Service]
                                EmailSender[Email Sender]
                                SMSSender[SMS Sender]
                            end
                    
                            subgraph "Payment Integration"
                                PaymentService[Payment Service]
                                GatewayAdapter[Gateway Adapter]
                            end
                        end
                    
                        API_Order --> Validator
                        Validator --> Calculator
                        Calculator --> Creator
                        Creator --> StockReducer
                        Creator --> StateManager
                        StateManager --> NotifService
                        NotifService --> EmailSender
                        NotifService --> SMSSender
                        Creator --> PaymentService
                        PaymentService --> GatewayAdapter

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TB
                        subgraph "Authentication System"
                            subgraph "Auth API"
                                Login[Login Endpoint]
                                Register[Register Endpoint]
                                Refresh[Refresh Token Endpoint]
                                Reset[Password Reset Endpoint]
                            end
                    
                            subgraph "Auth Services"
                                TokenGen[JWT Token Generator]
                                PassValidator[Password Validator]
                                HistoryCheck[Password History Checker]
                            end
                    
                            subgraph "User Management"
                                UserRepo[User Repository]
                                RoleManager[Role Manager]
                                StateManager_Auth[Account State Manager]
                            end
                        end
                    
                        Login --> TokenGen
                        Login --> PassValidator
                        Register --> PassValidator
                        Register --> HistoryCheck
                        PassValidator --> HistoryCheck
                        TokenGen --> UserRepo
                        Register --> RoleManager
                        Login --> StateManager_Auth
                        StateManager_Auth --> UserRepo
                        RoleManager --> UserRepo

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJBdXRoZW50aWNhdGlvbiBTeXN0ZW1cIlxuICAgICAgICBzdWJncmFwaCBcIkF1dGggQVBJXCJcbiAgICAgICAgICAgIExvZ2luW0xvZ2luIEVuZHBvaW50XVxuICAgICAgICAgICAgUmVnaXN0ZXJbUmVnaXN0ZXIgRW5kcG9pbnRdXG4gICAgICAgICAgICBSZWZyZXNoW1JlZnJlc2ggVG9rZW4gRW5kcG9pbnRdXG4gICAgICAgICAgICBSZXNldFtQYXNzd29yZCBSZXNldCBFbmRwb2ludF1cbiAgICAgICAgZW5kXG5cbiAgICAgICAgc3ViZ3JhcGggXCJBdXRoIFNlcnZpY2VzXCJcbiAgICAgICAgICAgIFRva2VuR2VuW0pXVCBUb2tlbiBHZW5lcmF0b3JdXG4gICAgICAgICAgICBQYXNzVmFsaWRhdG9yW1Bhc3N3b3JkIFZhbGlkYXRvcl1cbiAgICAgICAgICAgIEhpc3RvcnlDaGVja1tQYXNzd29yZCBIaXN0b3J5IENoZWNrZXJdXG4gICAgICAgIGVuZFxuXG4gICAgICAgIHN1YmdyYXBoIFwiVXNlciBNYW5hZ2VtZW50XCJcbiAgICAgICAgICAgIFVzZXJSZXBvW1VzZXIgUmVwb3NpdG9yeV1cbiAgICAgICAgICAgIFJvbGVNYW5hZ2VyW1JvbGUgTWFuYWdlcl1cbiAgICAgICAgICAgIFN0YXRlTWFuYWdlcl9BdXRoW0FjY291bnQgU3RhdGUgTWFuYWdlcl1cbiAgICAgICAgZW5kXG4gICAgZW5kXG5cbiAgICBMb2dpbiAtLT4gVG9rZW5HZW5cbiAgICBMb2dpbiAtLT4gUGFzc1ZhbGlkYXRvclxuICAgIFJlZ2lzdGVyIC0tPiBQYXNzVmFsaWRhdG9yXG4gICAgUmVnaXN0ZXIgLS0+IEhpc3RvcnlDaGVja1xuICAgIFBhc3NWYWxpZGF0b3IgLS0+IEhpc3RvcnlDaGVja1xuICAgIFRva2VuR2VuIC0tPiBVc2VyUmVwb1xuICAgIFJlZ2lzdGVyIC0tPiBSb2xlTWFuYWdlclxuICAgIExvZ2luIC0tPiBTdGF0ZU1hbmFnZXJfQXV0aFxuICAgIFN0YXRlTWFuYWdlcl9BdXRoIC0tPiBVc2VyUmVwb1xuICAgIFJvbGVNYW5hZ2VyIC0tPiBVc2VyUmVwbyIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJBdXRoZW50aWNhdGlvbiBTeXN0ZW1cIlxuICAgICAgICBzdWJncmFwaCBcIkF1dGggQVBJXCJcbiAgICAgICAgICAgIExvZ2luW0xvZ2luIEVuZHBvaW50XVxuICAgICAgICAgICAgUmVnaXN0ZXJbUmVnaXN0ZXIgRW5kcG9pbnRdXG4gICAgICAgICAgICBSZWZyZXNoW1JlZnJlc2ggVG9rZW4gRW5kcG9pbnRdXG4gICAgICAgICAgICBSZXNldFtQYXNzd29yZCBSZXNldCBFbmRwb2ludF1cbiAgICAgICAgZW5kXG5cbiAgICAgICAgc3ViZ3JhcGggXCJBdXRoIFNlcnZpY2VzXCJcbiAgICAgICAgICAgIFRva2VuR2VuW0pXVCBUb2tlbiBHZW5lcmF0b3JdXG4gICAgICAgICAgICBQYXNzVmFsaWRhdG9yW1Bhc3N3b3JkIFZhbGlkYXRvcl1cbiAgICAgICAgICAgIEhpc3RvcnlDaGVja1tQYXNzd29yZCBIaXN0b3J5IENoZWNrZXJdXG4gICAgICAgIGVuZFxuXG4gICAgICAgIHN1YmdyYXBoIFwiVXNlciBNYW5hZ2VtZW50XCJcbiAgICAgICAgICAgIFVzZXJSZXBvW1VzZXIgUmVwb3NpdG9yeV1cbiAgICAgICAgICAgIFJvbGVNYW5hZ2VyW1JvbGUgTWFuYWdlcl1cbiAgICAgICAgICAgIFN0YXRlTWFuYWdlcl9BdXRoW0FjY291bnQgU3RhdGUgTWFuYWdlcl1cbiAgICAgICAgZW5kXG4gICAgZW5kXG5cbiAgICBMb2dpbiAtLT4gVG9rZW5HZW5cbiAgICBMb2dpbiAtLT4gUGFzc1ZhbGlkYXRvclxuICAgIFJlZ2lzdGVyIC0tPiBQYXNzVmFsaWRhdG9yXG4gICAgUmVnaXN0ZXIgLS0+IEhpc3RvcnlDaGVja1xuICAgIFBhc3NWYWxpZGF0b3IgLS0+IEhpc3RvcnlDaGVja1xuICAgIFRva2VuR2VuIC0tPiBVc2VyUmVwb1xuICAgIFJlZ2lzdGVyIC0tPiBSb2xlTWFuYWdlclxuICAgIExvZ2luIC0tPiBTdGF0ZU1hbmFnZXJfQXV0aFxuICAgIFN0YXRlTWFuYWdlcl9BdXRoIC0tPiBVc2VyUmVwb1xuICAgIFJvbGVNYW5hZ2VyIC0tPiBVc2VyUmVwbyIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TB
                        subgraph "Authentication System"
                            subgraph "Auth API"
                                Login[Login Endpoint]
                                Register[Register Endpoint]
                                Refresh[Refresh Token Endpoint]
                                Reset[Password Reset Endpoint]
                            end
                    
                            subgraph "Auth Services"
                                TokenGen[JWT Token Generator]
                                PassValidator[Password Validator]
                                HistoryCheck[Password History Checker]
                            end
                    
                            subgraph "User Management"
                                UserRepo[User Repository]
                                RoleManager[Role Manager]
                                StateManager_Auth[Account State Manager]
                            end
                        end
                    
                        Login --> TokenGen
                        Login --> PassValidator
                        Register --> PassValidator
                        Register --> HistoryCheck
                        PassValidator --> HistoryCheck
                        TokenGen --> UserRepo
                        Register --> RoleManager
                        Login --> StateManager_Auth
                        StateManager_Auth --> UserRepo
                        RoleManager --> UserRepo

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TB
                        subgraph "Stock Management System"
                            subgraph "Stock API"
                                Get[Get Stock Endpoint]
                                Update[Update Stock Endpoint]
                                Config[Configure Auto-Recharge]
                            end
                    
                            subgraph "Stock Services"
                                Monitor[Stock Monitor]
                                AutoRecharge[Auto Recharge Service]
                                HistoryLogger[History Logger]
                            end
                    
                            subgraph "Stock Repository"
                                ProductRepo[Product Repository]
                                ConfigRepo[Stock Config Repository]
                                HistoryRepo[Recharge History Repository]
                            end
                    
                            subgraph "Notification Integration"
                                LowStockNotif[Low Stock Notifier]
                            end
                        end
                    
                        Get --> ProductRepo
                        Update --> HistoryLogger
                        Update --> ProductRepo
                        Config --> ConfigRepo
                        Monitor --> ConfigRepo
                        Monitor --> ProductRepo
                        Monitor --> AutoRecharge
                        AutoRecharge --> ProductRepo
                        AutoRecharge --> HistoryLogger
                        AutoRecharge --> LowStockNotif
                        HistoryLogger --> HistoryRepo

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJTdG9jayBNYW5hZ2VtZW50IFN5c3RlbVwiXG4gICAgICAgIHN1YmdyYXBoIFwiU3RvY2sgQVBJXCJcbiAgICAgICAgICAgIEdldFtHZXQgU3RvY2sgRW5kcG9pbnRdXG4gICAgICAgICAgICBVcGRhdGVbVXBkYXRlIFN0b2NrIEVuZHBvaW50XVxuICAgICAgICAgICAgQ29uZmlnW0NvbmZpZ3VyZSBBdXRvLVJlY2hhcmdlXVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBcIlN0b2NrIFNlcnZpY2VzXCJcbiAgICAgICAgICAgIE1vbml0b3JbU3RvY2sgTW9uaXRvcl1cbiAgICAgICAgICAgIEF1dG9SZWNoYXJnZVtBdXRvIFJlY2hhcmdlIFNlcnZpY2VdXG4gICAgICAgICAgICBIaXN0b3J5TG9nZ2VyW0hpc3RvcnkgTG9nZ2VyXVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBcIlN0b2NrIFJlcG9zaXRvcnlcIlxuICAgICAgICAgICAgUHJvZHVjdFJlcG9bUHJvZHVjdCBSZXBvc2l0b3J5XVxuICAgICAgICAgICAgQ29uZmlnUmVwb1tTdG9jayBDb25maWcgUmVwb3NpdG9yeV1cbiAgICAgICAgICAgIEhpc3RvcnlSZXBvW1JlY2hhcmdlIEhpc3RvcnkgUmVwb3NpdG9yeV1cbiAgICAgICAgZW5kXG5cbiAgICAgICAgc3ViZ3JhcGggXCJOb3RpZmljYXRpb24gSW50ZWdyYXRpb25cIlxuICAgICAgICAgICAgTG93U3RvY2tOb3RpZltMb3cgU3RvY2sgTm90aWZpZXJdXG4gICAgICAgIGVuZFxuICAgIGVuZFxuXG4gICAgR2V0IC0tPiBQcm9kdWN0UmVwb1xuICAgIFVwZGF0ZSAtLT4gSGlzdG9yeUxvZ2dlclxuICAgIFVwZGF0ZSAtLT4gUHJvZHVjdFJlcG9cbiAgICBDb25maWcgLS0+IENvbmZpZ1JlcG9cbiAgICBNb25pdG9yIC0tPiBDb25maWdSZXBvXG4gICAgTW9uaXRvciAtLT4gUHJvZHVjdFJlcG9cbiAgICBNb25pdG9yIC0tPiBBdXRvUmVjaGFyZ2VcbiAgICBBdXRvUmVjaGFyZ2UgLS0+IFByb2R1Y3RSZXBvXG4gICAgQXV0b1JlY2hhcmdlIC0tPiBIaXN0b3J5TG9nZ2VyXG4gICAgQXV0b1JlY2hhcmdlIC0tPiBMb3dTdG9ja05vdGlmXG4gICAgSGlzdG9yeUxvZ2dlciAtLT4gSGlzdG9yeVJlcG8iLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJTdG9jayBNYW5hZ2VtZW50IFN5c3RlbVwiXG4gICAgICAgIHN1YmdyYXBoIFwiU3RvY2sgQVBJXCJcbiAgICAgICAgICAgIEdldFtHZXQgU3RvY2sgRW5kcG9pbnRdXG4gICAgICAgICAgICBVcGRhdGVbVXBkYXRlIFN0b2NrIEVuZHBvaW50XVxuICAgICAgICAgICAgQ29uZmlnW0NvbmZpZ3VyZSBBdXRvLVJlY2hhcmdlXVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBcIlN0b2NrIFNlcnZpY2VzXCJcbiAgICAgICAgICAgIE1vbml0b3JbU3RvY2sgTW9uaXRvcl1cbiAgICAgICAgICAgIEF1dG9SZWNoYXJnZVtBdXRvIFJlY2hhcmdlIFNlcnZpY2VdXG4gICAgICAgICAgICBIaXN0b3J5TG9nZ2VyW0hpc3RvcnkgTG9nZ2VyXVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBcIlN0b2NrIFJlcG9zaXRvcnlcIlxuICAgICAgICAgICAgUHJvZHVjdFJlcG9bUHJvZHVjdCBSZXBvc2l0b3J5XVxuICAgICAgICAgICAgQ29uZmlnUmVwb1tTdG9jayBDb25maWcgUmVwb3NpdG9yeV1cbiAgICAgICAgICAgIEhpc3RvcnlSZXBvW1JlY2hhcmdlIEhpc3RvcnkgUmVwb3NpdG9yeV1cbiAgICAgICAgZW5kXG5cbiAgICAgICAgc3ViZ3JhcGggXCJOb3RpZmljYXRpb24gSW50ZWdyYXRpb25cIlxuICAgICAgICAgICAgTG93U3RvY2tOb3RpZltMb3cgU3RvY2sgTm90aWZpZXJdXG4gICAgICAgIGVuZFxuICAgIGVuZFxuXG4gICAgR2V0IC0tPiBQcm9kdWN0UmVwb1xuICAgIFVwZGF0ZSAtLT4gSGlzdG9yeUxvZ2dlclxuICAgIFVwZGF0ZSAtLT4gUHJvZHVjdFJlcG9cbiAgICBDb25maWcgLS0+IENvbmZpZ1JlcG9cbiAgICBNb25pdG9yIC0tPiBDb25maWdSZXBvXG4gICAgTW9uaXRvciAtLT4gUHJvZHVjdFJlcG9cbiAgICBNb25pdG9yIC0tPiBBdXRvUmVjaGFyZ2VcbiAgICBBdXRvUmVjaGFyZ2UgLS0+IFByb2R1Y3RSZXBvXG4gICAgQXV0b1JlY2hhcmdlIC0tPiBIaXN0b3J5TG9nZ2VyXG4gICAgQXV0b1JlY2hhcmdlIC0tPiBMb3dTdG9ja05vdGlmXG4gICAgSGlzdG9yeUxvZ2dlciAtLT4gSGlzdG9yeVJlcG8iLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TB
                        subgraph "Stock Management System"
                            subgraph "Stock API"
                                Get[Get Stock Endpoint]
                                Update[Update Stock Endpoint]
                                Config[Configure Auto-Recharge]
                            end
                    
                            subgraph "Stock Services"
                                Monitor[Stock Monitor]
                                AutoRecharge[Auto Recharge Service]
                                HistoryLogger[History Logger]
                            end
                    
                            subgraph "Stock Repository"
                                ProductRepo[Product Repository]
                                ConfigRepo[Stock Config Repository]
                                HistoryRepo[Recharge History Repository]
                            end
                    
                            subgraph "Notification Integration"
                                LowStockNotif[Low Stock Notifier]
                            end
                        end
                    
                        Get --> ProductRepo
                        Update --> HistoryLogger
                        Update --> ProductRepo
                        Config --> ConfigRepo
                        Monitor --> ConfigRepo
                        Monitor --> ProductRepo
                        Monitor --> AutoRecharge
                        AutoRecharge --> ProductRepo
                        AutoRecharge --> HistoryLogger
                        AutoRecharge --> LowStockNotif
                        HistoryLogger --> HistoryRepo

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart LR
                        Frontend -->|HTTP/REST| Backend
                        Backend -->|SQL| Database
                        Backend -->|Cache| Redis
                        Backend -->|Tasks| Celery
                        Celery -->|Queue| Redis
                        Celery -->|Email| SMTP
                        Backend -->|HTTP| PaymentGateway
                        
                        subgraph "Backend Apps Dependencies"
                            Ventas -->|imports| Productos
                            Ventas -->|imports| Usuarios
                            Pagos -->|imports| Productos
                            Pagos -->|imports| Usuarios
                            Notificaciones -->|imports| Usuarios
                        end

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgRnJvbnRlbmQgLS0+fEhUVFAvUkVTVHwgQmFja2VuZFxuICAgIEJhY2tlbmQgLS0+fFNRTHwgRGF0YWJhc2VcbiAgICBCYWNrZW5kIC0tPnxDYWNoZXwgUmVkaXNcbiAgICBCYWNrZW5kIC0tPnxUYXNrc3wgQ2VsZXJ5XG4gICAgQ2VsZXJ5IC0tPnxRdWV1ZXwgUmVkaXNcbiAgICBDZWxlcnkgLS0+fEVtYWlsfCBTTVRQXG4gICAgQmFja2VuZCAtLT58SFRUUHwgUGF5bWVudEdhdGV3YXlcbiAgICBcbiAgICBzdWJncmFwaCBcIkJhY2tlbmQgQXBwcyBEZXBlbmRlbmNpZXNcIlxuICAgICAgICBWZW50YXMgLS0+fGltcG9ydHN8IFByb2R1Y3Rvc1xuICAgICAgICBWZW50YXMgLS0+fGltcG9ydHN8IFVzdWFyaW9zXG4gICAgICAgIFBhZ29zIC0tPnxpbXBvcnRzfCBQcm9kdWN0b3NcbiAgICAgICAgUGFnb3MgLS0+fGltcG9ydHN8IFVzdWFyaW9zXG4gICAgICAgIE5vdGlmaWNhY2lvbmVzIC0tPnxpbXBvcnRzfCBVc3Vhcmlvc1xuICAgIGVuZCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgRnJvbnRlbmQgLS0+fEhUVFAvUkVTVHwgQmFja2VuZFxuICAgIEJhY2tlbmQgLS0+fFNRTHwgRGF0YWJhc2VcbiAgICBCYWNrZW5kIC0tPnxDYWNoZXwgUmVkaXNcbiAgICBCYWNrZW5kIC0tPnxUYXNrc3wgQ2VsZXJ5XG4gICAgQ2VsZXJ5IC0tPnxRdWV1ZXwgUmVkaXNcbiAgICBDZWxlcnkgLS0+fEVtYWlsfCBTTVRQXG4gICAgQmFja2VuZCAtLT58SFRUUHwgUGF5bWVudEdhdGV3YXlcbiAgICBcbiAgICBzdWJncmFwaCBcIkJhY2tlbmQgQXBwcyBEZXBlbmRlbmNpZXNcIlxuICAgICAgICBWZW50YXMgLS0+fGltcG9ydHN8IFByb2R1Y3Rvc1xuICAgICAgICBWZW50YXMgLS0+fGltcG9ydHN8IFVzdWFyaW9zXG4gICAgICAgIFBhZ29zIC0tPnxpbXBvcnRzfCBQcm9kdWN0b3NcbiAgICAgICAgUGFnb3MgLS0+fGltcG9ydHN8IFVzdWFyaW9zXG4gICAgICAgIE5vdGlmaWNhY2lvbmVzIC0tPnxpbXBvcnRzfCBVc3Vhcmlvc1xuICAgIGVuZCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart LR
                        Frontend -->|HTTP/REST| Backend
                        Backend -->|SQL| Database
                        Backend -->|Cache| Redis
                        Backend -->|Tasks| Celery
                        Celery -->|Queue| Redis
                        Celery -->|Email| SMTP
                        Backend -->|HTTP| PaymentGateway
                        
                        subgraph "Backend Apps Dependencies"
                            Ventas -->|imports| Productos
                            Ventas -->|imports| Usuarios
                            Pagos -->|imports| Productos
                            Pagos -->|imports| Usuarios
                            Notificaciones -->|imports| Usuarios
                        end


.. dropdown:: üìä Diagrama Despliegue (3 diagramas)
    :open:
    :class-container: sd-mb-4

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TB
                        subgraph "Developer Workstation (localhost)"
                            subgraph "Frontend - Port 5175"
                                Vite[Vite Dev Server]
                                React[React App]
                            end
                    
                            subgraph "Backend - Port 8000"
                                Django[Django Dev Server]
                                DRF[Django REST Framework]
                            end
                    
                            subgraph "Database"
                                SQLite[""""(SQLite DB<br/>db.sqlite3)""""]
                            end
                    
                            subgraph "Task Queue - Port 6379"
                                Redis_Local[""""(Redis<br/>localhost)""""]
                                Celery_Worker[Celery Worker]
                                Celery_Beat[Celery Beat]
                            end
                    
                            subgraph "Media Files"
                                Media_Local[""""/media/<br/>Local Storage""""]
                            end
                        end
                    
                        subgraph "Development Tools"
                            Git[Git]
                            VSCode[VS Code]
                            Browser[Browser DevTools]
                        end
                    
                        React --> Vite
                        Vite -->|proxy :8000| Django
                        Django --> DRF
                        DRF --> SQLite
                        Django --> Media_Local
                        Django --> Celery_Worker
                        Celery_Worker --> Redis_Local
                        Celery_Beat --> Redis_Local
                        
                        Git --> VSCode
                        Browser --> Vite

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJEZXZlbG9wZXIgV29ya3N0YXRpb24gKGxvY2FsaG9zdClcIlxuICAgICAgICBzdWJncmFwaCBcIkZyb250ZW5kIC0gUG9ydCA1MTc1XCJcbiAgICAgICAgICAgIFZpdGVbVml0ZSBEZXYgU2VydmVyXVxuICAgICAgICAgICAgUmVhY3RbUmVhY3QgQXBwXVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBcIkJhY2tlbmQgLSBQb3J0IDgwMDBcIlxuICAgICAgICAgICAgRGphbmdvW0RqYW5nbyBEZXYgU2VydmVyXVxuICAgICAgICAgICAgRFJGW0RqYW5nbyBSRVNUIEZyYW1ld29ya11cbiAgICAgICAgZW5kXG5cbiAgICAgICAgc3ViZ3JhcGggXCJEYXRhYmFzZVwiXG4gICAgICAgICAgICBTUUxpdGVbKFNRTGl0ZSBEQjxici8+ZGIuc3FsaXRlMyldXG4gICAgICAgIGVuZFxuXG4gICAgICAgIHN1YmdyYXBoIFwiVGFzayBRdWV1ZSAtIFBvcnQgNjM3OVwiXG4gICAgICAgICAgICBSZWRpc19Mb2NhbFsoUmVkaXM8YnIvPmxvY2FsaG9zdCldXG4gICAgICAgICAgICBDZWxlcnlfV29ya2VyW0NlbGVyeSBXb3JrZXJdXG4gICAgICAgICAgICBDZWxlcnlfQmVhdFtDZWxlcnkgQmVhdF1cbiAgICAgICAgZW5kXG5cbiAgICAgICAgc3ViZ3JhcGggXCJNZWRpYSBGaWxlc1wiXG4gICAgICAgICAgICBNZWRpYV9Mb2NhbFsvbWVkaWEvPGJyLz5Mb2NhbCBTdG9yYWdlXVxuICAgICAgICBlbmRcbiAgICBlbmRcblxuICAgIHN1YmdyYXBoIFwiRGV2ZWxvcG1lbnQgVG9vbHNcIlxuICAgICAgICBHaXRbR2l0XVxuICAgICAgICBWU0NvZGVbVlMgQ29kZV1cbiAgICAgICAgQnJvd3NlcltCcm93c2VyIERldlRvb2xzXVxuICAgIGVuZFxuXG4gICAgUmVhY3QgLS0+IFZpdGVcbiAgICBWaXRlIC0tPnxwcm94eSA6ODAwMHwgRGphbmdvXG4gICAgRGphbmdvIC0tPiBEUkZcbiAgICBEUkYgLS0+IFNRTGl0ZVxuICAgIERqYW5nbyAtLT4gTWVkaWFfTG9jYWxcbiAgICBEamFuZ28gLS0+IENlbGVyeV9Xb3JrZXJcbiAgICBDZWxlcnlfV29ya2VyIC0tPiBSZWRpc19Mb2NhbFxuICAgIENlbGVyeV9CZWF0IC0tPiBSZWRpc19Mb2NhbFxuICAgIFxuICAgIEdpdCAtLT4gVlNDb2RlXG4gICAgQnJvd3NlciAtLT4gVml0ZSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJEZXZlbG9wZXIgV29ya3N0YXRpb24gKGxvY2FsaG9zdClcIlxuICAgICAgICBzdWJncmFwaCBcIkZyb250ZW5kIC0gUG9ydCA1MTc1XCJcbiAgICAgICAgICAgIFZpdGVbVml0ZSBEZXYgU2VydmVyXVxuICAgICAgICAgICAgUmVhY3RbUmVhY3QgQXBwXVxuICAgICAgICBlbmRcblxuICAgICAgICBzdWJncmFwaCBcIkJhY2tlbmQgLSBQb3J0IDgwMDBcIlxuICAgICAgICAgICAgRGphbmdvW0RqYW5nbyBEZXYgU2VydmVyXVxuICAgICAgICAgICAgRFJGW0RqYW5nbyBSRVNUIEZyYW1ld29ya11cbiAgICAgICAgZW5kXG5cbiAgICAgICAgc3ViZ3JhcGggXCJEYXRhYmFzZVwiXG4gICAgICAgICAgICBTUUxpdGVbKFNRTGl0ZSBEQjxici8+ZGIuc3FsaXRlMyldXG4gICAgICAgIGVuZFxuXG4gICAgICAgIHN1YmdyYXBoIFwiVGFzayBRdWV1ZSAtIFBvcnQgNjM3OVwiXG4gICAgICAgICAgICBSZWRpc19Mb2NhbFsoUmVkaXM8YnIvPmxvY2FsaG9zdCldXG4gICAgICAgICAgICBDZWxlcnlfV29ya2VyW0NlbGVyeSBXb3JrZXJdXG4gICAgICAgICAgICBDZWxlcnlfQmVhdFtDZWxlcnkgQmVhdF1cbiAgICAgICAgZW5kXG5cbiAgICAgICAgc3ViZ3JhcGggXCJNZWRpYSBGaWxlc1wiXG4gICAgICAgICAgICBNZWRpYV9Mb2NhbFsvbWVkaWEvPGJyLz5Mb2NhbCBTdG9yYWdlXVxuICAgICAgICBlbmRcbiAgICBlbmRcblxuICAgIHN1YmdyYXBoIFwiRGV2ZWxvcG1lbnQgVG9vbHNcIlxuICAgICAgICBHaXRbR2l0XVxuICAgICAgICBWU0NvZGVbVlMgQ29kZV1cbiAgICAgICAgQnJvd3NlcltCcm93c2VyIERldlRvb2xzXVxuICAgIGVuZFxuXG4gICAgUmVhY3QgLS0+IFZpdGVcbiAgICBWaXRlIC0tPnxwcm94eSA6ODAwMHwgRGphbmdvXG4gICAgRGphbmdvIC0tPiBEUkZcbiAgICBEUkYgLS0+IFNRTGl0ZVxuICAgIERqYW5nbyAtLT4gTWVkaWFfTG9jYWxcbiAgICBEamFuZ28gLS0+IENlbGVyeV9Xb3JrZXJcbiAgICBDZWxlcnlfV29ya2VyIC0tPiBSZWRpc19Mb2NhbFxuICAgIENlbGVyeV9CZWF0IC0tPiBSZWRpc19Mb2NhbFxuICAgIFxuICAgIEdpdCAtLT4gVlNDb2RlXG4gICAgQnJvd3NlciAtLT4gVml0ZSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TB
                        subgraph "Developer Workstation (localhost)"
                            subgraph "Frontend - Port 5175"
                                Vite[Vite Dev Server]
                                React[React App]
                            end
                    
                            subgraph "Backend - Port 8000"
                                Django[Django Dev Server]
                                DRF[Django REST Framework]
                            end
                    
                            subgraph "Database"
                                SQLite[""""(SQLite DB<br/>db.sqlite3)""""]
                            end
                    
                            subgraph "Task Queue - Port 6379"
                                Redis_Local[""""(Redis<br/>localhost)""""]
                                Celery_Worker[Celery Worker]
                                Celery_Beat[Celery Beat]
                            end
                    
                            subgraph "Media Files"
                                Media_Local[""""/media/<br/>Local Storage""""]
                            end
                        end
                    
                        subgraph "Development Tools"
                            Git[Git]
                            VSCode[VS Code]
                            Browser[Browser DevTools]
                        end
                    
                        React --> Vite
                        Vite -->|proxy :8000| Django
                        Django --> DRF
                        DRF --> SQLite
                        Django --> Media_Local
                        Django --> Celery_Worker
                        Celery_Worker --> Redis_Local
                        Celery_Beat --> Redis_Local
                        
                        Git --> VSCode
                        Browser --> Vite

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart LR
                        subgraph Users["User Devices"]
                            Desktop[üíª Desktop Browser]
                            Mobile[üì± Mobile Browser]
                        end
                    
                        subgraph CDN["CDN Layer"]
                            CF[Cloudflare CDN]
                        end
                    
                        subgraph Frontend["Frontend Hosting (Netlify)"]
                            Build[Build Process]
                            Static[Static Assets]
                            Edge[Edge Functions]
                        end
                    
                        subgraph Backend["Backend Hosting (Railway/Render)"]
                            LB[Load Balancer]
                            
                            subgraph Apps["Application Servers"]
                                App1[Django Instance 1]
                                App2[Django Instance 2]
                            end
                    
                            Static_Backend[Static Files Server]
                        end
                    
                        subgraph Data["Database Layer"]
                            PG[(PostgreSQL)]
                            PG_Backup[(Automated Backups)]
                        end
                    
                        subgraph Cache["Cache & Queue"]
                            Redis_Prod[(Redis Cloud)]
                        end
                    
                        subgraph Workers["Worker Layer"]
                            Worker1[Celery Worker 1]
                            Worker2[Celery Worker 2]
                            Beat[Celery Beat]
                        end
                    
                        subgraph Services["External Services"]
                            SMTP[SendGrid]
                            Gateway[Payment Gateway]
                            Monitoring[Sentry]
                            S3[AWS S3 / Media]
                        end
                    
                        %% Connections
                        Desktop --> CF
                        Mobile --> CF
                        
                        CF --> Static
                        CF --> LB
                        
                        Static --> Build
                        
                        LB --> App1
                        LB --> App2
                        
                        %% App Connections
                        App1 --> PG
                        App2 --> PG
                        App1 --> Redis_Prod
                        App2 --> Redis_Prod
                        
                        App1 --> S3
                        App2 --> S3
                        
                        App1 --> Gateway
                        App2 --> Gateway
                        App1 --> Monitoring
                        App2 --> Monitoring
                    
                        %% Database
                        PG --> PG_Backup
                        
                        %% Workers
                        Beat --> Redis_Prod
                        Worker1 --> Redis_Prod
                        Worker2 --> Redis_Prod
                        
                        Worker1 --> SMTP
                        Worker2 --> SMTP
                        Worker1 --> Monitoring
                        Worker2 --> Monitoring

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgc3ViZ3JhcGggVXNlcnNbXCJVc2VyIERldmljZXNcIl1cbiAgICAgICAgRGVza3RvcFtcdWQ4M2RcdWRjYmIgRGVza3RvcCBCcm93c2VyXVxuICAgICAgICBNb2JpbGVbXHVkODNkXHVkY2YxIE1vYmlsZSBCcm93c2VyXVxuICAgIGVuZFxuXG4gICAgc3ViZ3JhcGggQ0ROW1wiQ0ROIExheWVyXCJdXG4gICAgICAgIENGW0Nsb3VkZmxhcmUgQ0ROXVxuICAgIGVuZFxuXG4gICAgc3ViZ3JhcGggRnJvbnRlbmRbXCJGcm9udGVuZCBIb3N0aW5nIChOZXRsaWZ5KVwiXVxuICAgICAgICBCdWlsZFtCdWlsZCBQcm9jZXNzXVxuICAgICAgICBTdGF0aWNbU3RhdGljIEFzc2V0c11cbiAgICAgICAgRWRnZVtFZGdlIEZ1bmN0aW9uc11cbiAgICBlbmRcblxuICAgIHN1YmdyYXBoIEJhY2tlbmRbXCJCYWNrZW5kIEhvc3RpbmcgKFJhaWx3YXkvUmVuZGVyKVwiXVxuICAgICAgICBMQltMb2FkIEJhbGFuY2VyXVxuICAgICAgICBcbiAgICAgICAgc3ViZ3JhcGggQXBwc1tcIkFwcGxpY2F0aW9uIFNlcnZlcnNcIl1cbiAgICAgICAgICAgIEFwcDFbRGphbmdvIEluc3RhbmNlIDFdXG4gICAgICAgICAgICBBcHAyW0RqYW5nbyBJbnN0YW5jZSAyXVxuICAgICAgICBlbmRcblxuICAgICAgICBTdGF0aWNfQmFja2VuZFtTdGF0aWMgRmlsZXMgU2VydmVyXVxuICAgIGVuZFxuXG4gICAgc3ViZ3JhcGggRGF0YVtcIkRhdGFiYXNlIExheWVyXCJdXG4gICAgICAgIFBHWyhQb3N0Z3JlU1FMKV1cbiAgICAgICAgUEdfQmFja3VwWyhBdXRvbWF0ZWQgQmFja3VwcyldXG4gICAgZW5kXG5cbiAgICBzdWJncmFwaCBDYWNoZVtcIkNhY2hlICYgUXVldWVcIl1cbiAgICAgICAgUmVkaXNfUHJvZFsoUmVkaXMgQ2xvdWQpXVxuICAgIGVuZFxuXG4gICAgc3ViZ3JhcGggV29ya2Vyc1tcIldvcmtlciBMYXllclwiXVxuICAgICAgICBXb3JrZXIxW0NlbGVyeSBXb3JrZXIgMV1cbiAgICAgICAgV29ya2VyMltDZWxlcnkgV29ya2VyIDJdXG4gICAgICAgIEJlYXRbQ2VsZXJ5IEJlYXRdXG4gICAgZW5kXG5cbiAgICBzdWJncmFwaCBTZXJ2aWNlc1tcIkV4dGVybmFsIFNlcnZpY2VzXCJdXG4gICAgICAgIFNNVFBbU2VuZEdyaWRdXG4gICAgICAgIEdhdGV3YXlbUGF5bWVudCBHYXRld2F5XVxuICAgICAgICBNb25pdG9yaW5nW1NlbnRyeV1cbiAgICAgICAgUzNbQVdTIFMzIC8gTWVkaWFdXG4gICAgZW5kXG5cbiAgICAlJSBDb25uZWN0aW9uc1xuICAgIERlc2t0b3AgLS0+IENGXG4gICAgTW9iaWxlIC0tPiBDRlxuICAgIFxuICAgIENGIC0tPiBTdGF0aWNcbiAgICBDRiAtLT4gTEJcbiAgICBcbiAgICBTdGF0aWMgLS0+IEJ1aWxkXG4gICAgXG4gICAgTEIgLS0+IEFwcDFcbiAgICBMQiAtLT4gQXBwMlxuICAgIFxuICAgICUlIEFwcCBDb25uZWN0aW9uc1xuICAgIEFwcDEgLS0+IFBHXG4gICAgQXBwMiAtLT4gUEdcbiAgICBBcHAxIC0tPiBSZWRpc19Qcm9kXG4gICAgQXBwMiAtLT4gUmVkaXNfUHJvZFxuICAgIFxuICAgIEFwcDEgLS0+IFMzXG4gICAgQXBwMiAtLT4gUzNcbiAgICBcbiAgICBBcHAxIC0tPiBHYXRld2F5XG4gICAgQXBwMiAtLT4gR2F0ZXdheVxuICAgIEFwcDEgLS0+IE1vbml0b3JpbmdcbiAgICBBcHAyIC0tPiBNb25pdG9yaW5nXG5cbiAgICAlJSBEYXRhYmFzZVxuICAgIFBHIC0tPiBQR19CYWNrdXBcbiAgICBcbiAgICAlJSBXb3JrZXJzXG4gICAgQmVhdCAtLT4gUmVkaXNfUHJvZFxuICAgIFdvcmtlcjEgLS0+IFJlZGlzX1Byb2RcbiAgICBXb3JrZXIyIC0tPiBSZWRpc19Qcm9kXG4gICAgXG4gICAgV29ya2VyMSAtLT4gU01UUFxuICAgIFdvcmtlcjIgLS0+IFNNVFBcbiAgICBXb3JrZXIxIC0tPiBNb25pdG9yaW5nXG4gICAgV29ya2VyMiAtLT4gTW9uaXRvcmluZyIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgc3ViZ3JhcGggVXNlcnNbXCJVc2VyIERldmljZXNcIl1cbiAgICAgICAgRGVza3RvcFtcdWQ4M2RcdWRjYmIgRGVza3RvcCBCcm93c2VyXVxuICAgICAgICBNb2JpbGVbXHVkODNkXHVkY2YxIE1vYmlsZSBCcm93c2VyXVxuICAgIGVuZFxuXG4gICAgc3ViZ3JhcGggQ0ROW1wiQ0ROIExheWVyXCJdXG4gICAgICAgIENGW0Nsb3VkZmxhcmUgQ0ROXVxuICAgIGVuZFxuXG4gICAgc3ViZ3JhcGggRnJvbnRlbmRbXCJGcm9udGVuZCBIb3N0aW5nIChOZXRsaWZ5KVwiXVxuICAgICAgICBCdWlsZFtCdWlsZCBQcm9jZXNzXVxuICAgICAgICBTdGF0aWNbU3RhdGljIEFzc2V0c11cbiAgICAgICAgRWRnZVtFZGdlIEZ1bmN0aW9uc11cbiAgICBlbmRcblxuICAgIHN1YmdyYXBoIEJhY2tlbmRbXCJCYWNrZW5kIEhvc3RpbmcgKFJhaWx3YXkvUmVuZGVyKVwiXVxuICAgICAgICBMQltMb2FkIEJhbGFuY2VyXVxuICAgICAgICBcbiAgICAgICAgc3ViZ3JhcGggQXBwc1tcIkFwcGxpY2F0aW9uIFNlcnZlcnNcIl1cbiAgICAgICAgICAgIEFwcDFbRGphbmdvIEluc3RhbmNlIDFdXG4gICAgICAgICAgICBBcHAyW0RqYW5nbyBJbnN0YW5jZSAyXVxuICAgICAgICBlbmRcblxuICAgICAgICBTdGF0aWNfQmFja2VuZFtTdGF0aWMgRmlsZXMgU2VydmVyXVxuICAgIGVuZFxuXG4gICAgc3ViZ3JhcGggRGF0YVtcIkRhdGFiYXNlIExheWVyXCJdXG4gICAgICAgIFBHWyhQb3N0Z3JlU1FMKV1cbiAgICAgICAgUEdfQmFja3VwWyhBdXRvbWF0ZWQgQmFja3VwcyldXG4gICAgZW5kXG5cbiAgICBzdWJncmFwaCBDYWNoZVtcIkNhY2hlICYgUXVldWVcIl1cbiAgICAgICAgUmVkaXNfUHJvZFsoUmVkaXMgQ2xvdWQpXVxuICAgIGVuZFxuXG4gICAgc3ViZ3JhcGggV29ya2Vyc1tcIldvcmtlciBMYXllclwiXVxuICAgICAgICBXb3JrZXIxW0NlbGVyeSBXb3JrZXIgMV1cbiAgICAgICAgV29ya2VyMltDZWxlcnkgV29ya2VyIDJdXG4gICAgICAgIEJlYXRbQ2VsZXJ5IEJlYXRdXG4gICAgZW5kXG5cbiAgICBzdWJncmFwaCBTZXJ2aWNlc1tcIkV4dGVybmFsIFNlcnZpY2VzXCJdXG4gICAgICAgIFNNVFBbU2VuZEdyaWRdXG4gICAgICAgIEdhdGV3YXlbUGF5bWVudCBHYXRld2F5XVxuICAgICAgICBNb25pdG9yaW5nW1NlbnRyeV1cbiAgICAgICAgUzNbQVdTIFMzIC8gTWVkaWFdXG4gICAgZW5kXG5cbiAgICAlJSBDb25uZWN0aW9uc1xuICAgIERlc2t0b3AgLS0+IENGXG4gICAgTW9iaWxlIC0tPiBDRlxuICAgIFxuICAgIENGIC0tPiBTdGF0aWNcbiAgICBDRiAtLT4gTEJcbiAgICBcbiAgICBTdGF0aWMgLS0+IEJ1aWxkXG4gICAgXG4gICAgTEIgLS0+IEFwcDFcbiAgICBMQiAtLT4gQXBwMlxuICAgIFxuICAgICUlIEFwcCBDb25uZWN0aW9uc1xuICAgIEFwcDEgLS0+IFBHXG4gICAgQXBwMiAtLT4gUEdcbiAgICBBcHAxIC0tPiBSZWRpc19Qcm9kXG4gICAgQXBwMiAtLT4gUmVkaXNfUHJvZFxuICAgIFxuICAgIEFwcDEgLS0+IFMzXG4gICAgQXBwMiAtLT4gUzNcbiAgICBcbiAgICBBcHAxIC0tPiBHYXRld2F5XG4gICAgQXBwMiAtLT4gR2F0ZXdheVxuICAgIEFwcDEgLS0+IE1vbml0b3JpbmdcbiAgICBBcHAyIC0tPiBNb25pdG9yaW5nXG5cbiAgICAlJSBEYXRhYmFzZVxuICAgIFBHIC0tPiBQR19CYWNrdXBcbiAgICBcbiAgICAlJSBXb3JrZXJzXG4gICAgQmVhdCAtLT4gUmVkaXNfUHJvZFxuICAgIFdvcmtlcjEgLS0+IFJlZGlzX1Byb2RcbiAgICBXb3JrZXIyIC0tPiBSZWRpc19Qcm9kXG4gICAgXG4gICAgV29ya2VyMSAtLT4gU01UUFxuICAgIFdvcmtlcjIgLS0+IFNNVFBcbiAgICBXb3JrZXIxIC0tPiBNb25pdG9yaW5nXG4gICAgV29ya2VyMiAtLT4gTW9uaXRvcmluZyIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart LR
                        subgraph Users["User Devices"]
                            Desktop[üíª Desktop Browser]
                            Mobile[üì± Mobile Browser]
                        end
                    
                        subgraph CDN["CDN Layer"]
                            CF[Cloudflare CDN]
                        end
                    
                        subgraph Frontend["Frontend Hosting (Netlify)"]
                            Build[Build Process]
                            Static[Static Assets]
                            Edge[Edge Functions]
                        end
                    
                        subgraph Backend["Backend Hosting (Railway/Render)"]
                            LB[Load Balancer]
                            
                            subgraph Apps["Application Servers"]
                                App1[Django Instance 1]
                                App2[Django Instance 2]
                            end
                    
                            Static_Backend[Static Files Server]
                        end
                    
                        subgraph Data["Database Layer"]
                            PG[(PostgreSQL)]
                            PG_Backup[(Automated Backups)]
                        end
                    
                        subgraph Cache["Cache & Queue"]
                            Redis_Prod[(Redis Cloud)]
                        end
                    
                        subgraph Workers["Worker Layer"]
                            Worker1[Celery Worker 1]
                            Worker2[Celery Worker 2]
                            Beat[Celery Beat]
                        end
                    
                        subgraph Services["External Services"]
                            SMTP[SendGrid]
                            Gateway[Payment Gateway]
                            Monitoring[Sentry]
                            S3[AWS S3 / Media]
                        end
                    
                        %% Connections
                        Desktop --> CF
                        Mobile --> CF
                        
                        CF --> Static
                        CF --> LB
                        
                        Static --> Build
                        
                        LB --> App1
                        LB --> App2
                        
                        %% App Connections
                        App1 --> PG
                        App2 --> PG
                        App1 --> Redis_Prod
                        App2 --> Redis_Prod
                        
                        App1 --> S3
                        App2 --> S3
                        
                        App1 --> Gateway
                        App2 --> Gateway
                        App1 --> Monitoring
                        App2 --> Monitoring
                    
                        %% Database
                        PG --> PG_Backup
                        
                        %% Workers
                        Beat --> Redis_Prod
                        Worker1 --> Redis_Prod
                        Worker2 --> Redis_Prod
                        
                        Worker1 --> SMTP
                        Worker2 --> SMTP
                        Worker1 --> Monitoring
                        Worker2 --> Monitoring

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart LR
                        Dev[Developer] -->|git push| GitHub[GitHub Repo]
                        GitHub -->|webhook| Netlify_Build[Netlify Build]
                        GitHub -->|webhook| Railway_Build[Railway Build]
                        
                        Netlify_Build -->|success| Netlify_Deploy[Deploy Frontend]
                        Railway_Build -->|success| Railway_Deploy[Deploy Backend]
                        
                        Railway_Deploy --> Migrate[Run Migrations]
                        Migrate --> Collect[Collect Static]
                        Collect --> Health[Health Check]
                        Health -->|pass| Live[LIVE]
                        Health -->|fail| Rollback[Rollback]

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgRGV2W0RldmVsb3Blcl0gLS0+fGdpdCBwdXNofCBHaXRIdWJbR2l0SHViIFJlcG9dXG4gICAgR2l0SHViIC0tPnx3ZWJob29rfCBOZXRsaWZ5X0J1aWxkW05ldGxpZnkgQnVpbGRdXG4gICAgR2l0SHViIC0tPnx3ZWJob29rfCBSYWlsd2F5X0J1aWxkW1JhaWx3YXkgQnVpbGRdXG4gICAgXG4gICAgTmV0bGlmeV9CdWlsZCAtLT58c3VjY2Vzc3wgTmV0bGlmeV9EZXBsb3lbRGVwbG95IEZyb250ZW5kXVxuICAgIFJhaWx3YXlfQnVpbGQgLS0+fHN1Y2Nlc3N8IFJhaWx3YXlfRGVwbG95W0RlcGxveSBCYWNrZW5kXVxuICAgIFxuICAgIFJhaWx3YXlfRGVwbG95IC0tPiBNaWdyYXRlW1J1biBNaWdyYXRpb25zXVxuICAgIE1pZ3JhdGUgLS0+IENvbGxlY3RbQ29sbGVjdCBTdGF0aWNdXG4gICAgQ29sbGVjdCAtLT4gSGVhbHRoW0hlYWx0aCBDaGVja11cbiAgICBIZWFsdGggLS0+fHBhc3N8IExpdmVbTElWRV1cbiAgICBIZWFsdGggLS0+fGZhaWx8IFJvbGxiYWNrW1JvbGxiYWNrXSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIExSXG4gICAgRGV2W0RldmVsb3Blcl0gLS0+fGdpdCBwdXNofCBHaXRIdWJbR2l0SHViIFJlcG9dXG4gICAgR2l0SHViIC0tPnx3ZWJob29rfCBOZXRsaWZ5X0J1aWxkW05ldGxpZnkgQnVpbGRdXG4gICAgR2l0SHViIC0tPnx3ZWJob29rfCBSYWlsd2F5X0J1aWxkW1JhaWx3YXkgQnVpbGRdXG4gICAgXG4gICAgTmV0bGlmeV9CdWlsZCAtLT58c3VjY2Vzc3wgTmV0bGlmeV9EZXBsb3lbRGVwbG95IEZyb250ZW5kXVxuICAgIFJhaWx3YXlfQnVpbGQgLS0+fHN1Y2Nlc3N8IFJhaWx3YXlfRGVwbG95W0RlcGxveSBCYWNrZW5kXVxuICAgIFxuICAgIFJhaWx3YXlfRGVwbG95IC0tPiBNaWdyYXRlW1J1biBNaWdyYXRpb25zXVxuICAgIE1pZ3JhdGUgLS0+IENvbGxlY3RbQ29sbGVjdCBTdGF0aWNdXG4gICAgQ29sbGVjdCAtLT4gSGVhbHRoW0hlYWx0aCBDaGVja11cbiAgICBIZWFsdGggLS0+fHBhc3N8IExpdmVbTElWRV1cbiAgICBIZWFsdGggLS0+fGZhaWx8IFJvbGxiYWNrW1JvbGxiYWNrXSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart LR
                        Dev[Developer] -->|git push| GitHub[GitHub Repo]
                        GitHub -->|webhook| Netlify_Build[Netlify Build]
                        GitHub -->|webhook| Railway_Build[Railway Build]
                        
                        Netlify_Build -->|success| Netlify_Deploy[Deploy Frontend]
                        Railway_Build -->|success| Railway_Deploy[Deploy Backend]
                        
                        Railway_Deploy --> Migrate[Run Migrations]
                        Migrate --> Collect[Collect Static]
                        Collect --> Health[Health Check]
                        Health -->|pass| Live[LIVE]
                        Health -->|fail| Rollback[Rollback]


.. dropdown:: üìä Diagrama Estados (5 diagramas)
    :open:
    :class-container: sd-mb-4

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    stateDiagram-v2
                        [*] --> Pendiente: Cliente confirma compra<br/>& pago exitoso
                    
                        Pendiente --> Preparando: Log√≠stica inicia<br/>preparaci√≥n
                        Pendiente --> Cancelado: Cliente cancela<br/>o Admin cancela
                    
                        Preparando --> En_Transito: Log√≠stica marca<br/>como enviado
                        Preparando --> Cancelado: Problema en<br/>preparaci√≥n
                    
                        En_Transito --> Entregado: Confirmaci√≥n<br/>de entrega
                        En_Transito --> Problema_Entrega: Error en<br/>entrega
                    
                        Problema_Entrega --> En_Transito: Reintento de<br/>entrega
                        Problema_Entrega --> Cancelado: Entrega<br/>imposible
                    
                        Entregado --> [*]: Venta generada
                    
                        Cancelado --> [*]: Stock devuelto
                    
                        state Pendiente {
                            [*] --> Esperando_Preparacion
                            Esperando_Preparacion --> Validando_Stock: Auto-check
                            Validando_Stock --> Esperando_Preparacion: Stock OK
                        }
                    
                        state Preparando {
                            [*] --> Recolectando
                            Recolectando --> Empacando
                            Empacando --> Etiquetando
                            Etiquetando --> Listo_para_Envio
                        }
                    
                        state En_Transito {
                            [*] --> Asignado_Transportista
                            Asignado_Transportista --> En_Ruta
                            En_Ruta --> En_Destino
                        }
                    
                        note right of Pendiente
                            ‚Ä¢ Pago confirmado
                            ‚Ä¢ Stock reservado
                            ‚Ä¢ Cliente notificado
                        end note
                    
                        note right of Entregado
                            ‚Ä¢ Genera Venta
                            ‚Ä¢ Actualiza m√©tricas
                            ‚Ä¢ Notifica cliente
                        end note
                    
                        note right of Cancelado
                            ‚Ä¢ Devuelve stock
                            ‚Ä¢ Procesa reembolso
                            ‚Ä¢ Notifica cliente
                        end note

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogInN0YXRlRGlhZ3JhbS12MlxuICAgIFsqXSAtLT4gUGVuZGllbnRlOiBDbGllbnRlIGNvbmZpcm1hIGNvbXByYTxici8+JiBwYWdvIGV4aXRvc29cblxuICAgIFBlbmRpZW50ZSAtLT4gUHJlcGFyYW5kbzogTG9nXHUwMGVkc3RpY2EgaW5pY2lhPGJyLz5wcmVwYXJhY2lcdTAwZjNuXG4gICAgUGVuZGllbnRlIC0tPiBDYW5jZWxhZG86IENsaWVudGUgY2FuY2VsYTxici8+byBBZG1pbiBjYW5jZWxhXG5cbiAgICBQcmVwYXJhbmRvIC0tPiBFbl9UcmFuc2l0bzogTG9nXHUwMGVkc3RpY2EgbWFyY2E8YnIvPmNvbW8gZW52aWFkb1xuICAgIFByZXBhcmFuZG8gLS0+IENhbmNlbGFkbzogUHJvYmxlbWEgZW48YnIvPnByZXBhcmFjaVx1MDBmM25cblxuICAgIEVuX1RyYW5zaXRvIC0tPiBFbnRyZWdhZG86IENvbmZpcm1hY2lcdTAwZjNuPGJyLz5kZSBlbnRyZWdhXG4gICAgRW5fVHJhbnNpdG8gLS0+IFByb2JsZW1hX0VudHJlZ2E6IEVycm9yIGVuPGJyLz5lbnRyZWdhXG5cbiAgICBQcm9ibGVtYV9FbnRyZWdhIC0tPiBFbl9UcmFuc2l0bzogUmVpbnRlbnRvIGRlPGJyLz5lbnRyZWdhXG4gICAgUHJvYmxlbWFfRW50cmVnYSAtLT4gQ2FuY2VsYWRvOiBFbnRyZWdhPGJyLz5pbXBvc2libGVcblxuICAgIEVudHJlZ2FkbyAtLT4gWypdOiBWZW50YSBnZW5lcmFkYVxuXG4gICAgQ2FuY2VsYWRvIC0tPiBbKl06IFN0b2NrIGRldnVlbHRvXG5cbiAgICBzdGF0ZSBQZW5kaWVudGUge1xuICAgICAgICBbKl0gLS0+IEVzcGVyYW5kb19QcmVwYXJhY2lvblxuICAgICAgICBFc3BlcmFuZG9fUHJlcGFyYWNpb24gLS0+IFZhbGlkYW5kb19TdG9jazogQXV0by1jaGVja1xuICAgICAgICBWYWxpZGFuZG9fU3RvY2sgLS0+IEVzcGVyYW5kb19QcmVwYXJhY2lvbjogU3RvY2sgT0tcbiAgICB9XG5cbiAgICBzdGF0ZSBQcmVwYXJhbmRvIHtcbiAgICAgICAgWypdIC0tPiBSZWNvbGVjdGFuZG9cbiAgICAgICAgUmVjb2xlY3RhbmRvIC0tPiBFbXBhY2FuZG9cbiAgICAgICAgRW1wYWNhbmRvIC0tPiBFdGlxdWV0YW5kb1xuICAgICAgICBFdGlxdWV0YW5kbyAtLT4gTGlzdG9fcGFyYV9FbnZpb1xuICAgIH1cblxuICAgIHN0YXRlIEVuX1RyYW5zaXRvIHtcbiAgICAgICAgWypdIC0tPiBBc2lnbmFkb19UcmFuc3BvcnRpc3RhXG4gICAgICAgIEFzaWduYWRvX1RyYW5zcG9ydGlzdGEgLS0+IEVuX1J1dGFcbiAgICAgICAgRW5fUnV0YSAtLT4gRW5fRGVzdGlub1xuICAgIH1cblxuICAgIG5vdGUgcmlnaHQgb2YgUGVuZGllbnRlXG4gICAgICAgIFx1MjAyMiBQYWdvIGNvbmZpcm1hZG9cbiAgICAgICAgXHUyMDIyIFN0b2NrIHJlc2VydmFkb1xuICAgICAgICBcdTIwMjIgQ2xpZW50ZSBub3RpZmljYWRvXG4gICAgZW5kIG5vdGVcblxuICAgIG5vdGUgcmlnaHQgb2YgRW50cmVnYWRvXG4gICAgICAgIFx1MjAyMiBHZW5lcmEgVmVudGFcbiAgICAgICAgXHUyMDIyIEFjdHVhbGl6YSBtXHUwMGU5dHJpY2FzXG4gICAgICAgIFx1MjAyMiBOb3RpZmljYSBjbGllbnRlXG4gICAgZW5kIG5vdGVcblxuICAgIG5vdGUgcmlnaHQgb2YgQ2FuY2VsYWRvXG4gICAgICAgIFx1MjAyMiBEZXZ1ZWx2ZSBzdG9ja1xuICAgICAgICBcdTIwMjIgUHJvY2VzYSByZWVtYm9sc29cbiAgICAgICAgXHUyMDIyIE5vdGlmaWNhIGNsaWVudGVcbiAgICBlbmQgbm90ZSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogInN0YXRlRGlhZ3JhbS12MlxuICAgIFsqXSAtLT4gUGVuZGllbnRlOiBDbGllbnRlIGNvbmZpcm1hIGNvbXByYTxici8+JiBwYWdvIGV4aXRvc29cblxuICAgIFBlbmRpZW50ZSAtLT4gUHJlcGFyYW5kbzogTG9nXHUwMGVkc3RpY2EgaW5pY2lhPGJyLz5wcmVwYXJhY2lcdTAwZjNuXG4gICAgUGVuZGllbnRlIC0tPiBDYW5jZWxhZG86IENsaWVudGUgY2FuY2VsYTxici8+byBBZG1pbiBjYW5jZWxhXG5cbiAgICBQcmVwYXJhbmRvIC0tPiBFbl9UcmFuc2l0bzogTG9nXHUwMGVkc3RpY2EgbWFyY2E8YnIvPmNvbW8gZW52aWFkb1xuICAgIFByZXBhcmFuZG8gLS0+IENhbmNlbGFkbzogUHJvYmxlbWEgZW48YnIvPnByZXBhcmFjaVx1MDBmM25cblxuICAgIEVuX1RyYW5zaXRvIC0tPiBFbnRyZWdhZG86IENvbmZpcm1hY2lcdTAwZjNuPGJyLz5kZSBlbnRyZWdhXG4gICAgRW5fVHJhbnNpdG8gLS0+IFByb2JsZW1hX0VudHJlZ2E6IEVycm9yIGVuPGJyLz5lbnRyZWdhXG5cbiAgICBQcm9ibGVtYV9FbnRyZWdhIC0tPiBFbl9UcmFuc2l0bzogUmVpbnRlbnRvIGRlPGJyLz5lbnRyZWdhXG4gICAgUHJvYmxlbWFfRW50cmVnYSAtLT4gQ2FuY2VsYWRvOiBFbnRyZWdhPGJyLz5pbXBvc2libGVcblxuICAgIEVudHJlZ2FkbyAtLT4gWypdOiBWZW50YSBnZW5lcmFkYVxuXG4gICAgQ2FuY2VsYWRvIC0tPiBbKl06IFN0b2NrIGRldnVlbHRvXG5cbiAgICBzdGF0ZSBQZW5kaWVudGUge1xuICAgICAgICBbKl0gLS0+IEVzcGVyYW5kb19QcmVwYXJhY2lvblxuICAgICAgICBFc3BlcmFuZG9fUHJlcGFyYWNpb24gLS0+IFZhbGlkYW5kb19TdG9jazogQXV0by1jaGVja1xuICAgICAgICBWYWxpZGFuZG9fU3RvY2sgLS0+IEVzcGVyYW5kb19QcmVwYXJhY2lvbjogU3RvY2sgT0tcbiAgICB9XG5cbiAgICBzdGF0ZSBQcmVwYXJhbmRvIHtcbiAgICAgICAgWypdIC0tPiBSZWNvbGVjdGFuZG9cbiAgICAgICAgUmVjb2xlY3RhbmRvIC0tPiBFbXBhY2FuZG9cbiAgICAgICAgRW1wYWNhbmRvIC0tPiBFdGlxdWV0YW5kb1xuICAgICAgICBFdGlxdWV0YW5kbyAtLT4gTGlzdG9fcGFyYV9FbnZpb1xuICAgIH1cblxuICAgIHN0YXRlIEVuX1RyYW5zaXRvIHtcbiAgICAgICAgWypdIC0tPiBBc2lnbmFkb19UcmFuc3BvcnRpc3RhXG4gICAgICAgIEFzaWduYWRvX1RyYW5zcG9ydGlzdGEgLS0+IEVuX1J1dGFcbiAgICAgICAgRW5fUnV0YSAtLT4gRW5fRGVzdGlub1xuICAgIH1cblxuICAgIG5vdGUgcmlnaHQgb2YgUGVuZGllbnRlXG4gICAgICAgIFx1MjAyMiBQYWdvIGNvbmZpcm1hZG9cbiAgICAgICAgXHUyMDIyIFN0b2NrIHJlc2VydmFkb1xuICAgICAgICBcdTIwMjIgQ2xpZW50ZSBub3RpZmljYWRvXG4gICAgZW5kIG5vdGVcblxuICAgIG5vdGUgcmlnaHQgb2YgRW50cmVnYWRvXG4gICAgICAgIFx1MjAyMiBHZW5lcmEgVmVudGFcbiAgICAgICAgXHUyMDIyIEFjdHVhbGl6YSBtXHUwMGU5dHJpY2FzXG4gICAgICAgIFx1MjAyMiBOb3RpZmljYSBjbGllbnRlXG4gICAgZW5kIG5vdGVcblxuICAgIG5vdGUgcmlnaHQgb2YgQ2FuY2VsYWRvXG4gICAgICAgIFx1MjAyMiBEZXZ1ZWx2ZSBzdG9ja1xuICAgICAgICBcdTIwMjIgUHJvY2VzYSByZWVtYm9sc29cbiAgICAgICAgXHUyMDIyIE5vdGlmaWNhIGNsaWVudGVcbiAgICBlbmQgbm90ZSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    stateDiagram-v2
                        [*] --> Pendiente: Cliente confirma compra<br/>& pago exitoso
                    
                        Pendiente --> Preparando: Log√≠stica inicia<br/>preparaci√≥n
                        Pendiente --> Cancelado: Cliente cancela<br/>o Admin cancela
                    
                        Preparando --> En_Transito: Log√≠stica marca<br/>como enviado
                        Preparando --> Cancelado: Problema en<br/>preparaci√≥n
                    
                        En_Transito --> Entregado: Confirmaci√≥n<br/>de entrega
                        En_Transito --> Problema_Entrega: Error en<br/>entrega
                    
                        Problema_Entrega --> En_Transito: Reintento de<br/>entrega
                        Problema_Entrega --> Cancelado: Entrega<br/>imposible
                    
                        Entregado --> [*]: Venta generada
                    
                        Cancelado --> [*]: Stock devuelto
                    
                        state Pendiente {
                            [*] --> Esperando_Preparacion
                            Esperando_Preparacion --> Validando_Stock: Auto-check
                            Validando_Stock --> Esperando_Preparacion: Stock OK
                        }
                    
                        state Preparando {
                            [*] --> Recolectando
                            Recolectando --> Empacando
                            Empacando --> Etiquetando
                            Etiquetando --> Listo_para_Envio
                        }
                    
                        state En_Transito {
                            [*] --> Asignado_Transportista
                            Asignado_Transportista --> En_Ruta
                            En_Ruta --> En_Destino
                        }
                    
                        note right of Pendiente
                            ‚Ä¢ Pago confirmado
                            ‚Ä¢ Stock reservado
                            ‚Ä¢ Cliente notificado
                        end note
                    
                        note right of Entregado
                            ‚Ä¢ Genera Venta
                            ‚Ä¢ Actualiza m√©tricas
                            ‚Ä¢ Notifica cliente
                        end note
                    
                        note right of Cancelado
                            ‚Ä¢ Devuelve stock
                            ‚Ä¢ Procesa reembolso
                            ‚Ä¢ Notifica cliente
                        end note

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    stateDiagram-v2
                        [*] --> Activa: Registro exitoso
                    
                        Activa --> Auto_Desactivada: Usuario<br/>desactiva cuenta
                        Activa --> Suspendida_Admin: Admin<br/>suspende
                        Activa --> Inactiva: Sin actividad<br/>por 180 d√≠as
                    
                        Auto_Desactivada --> Activa: Usuario<br/>reactiva
                        Auto_Desactivada --> Eliminada: 30 d√≠as sin<br/>reactivar
                    
                        Suspendida_Admin --> Activa: Admin<br/>reactiva
                        Suspendida_Admin --> Eliminada: Solicitud usuario<br/>& aprobaci√≥n admin
                    
                        Inactiva --> Activa: Usuario<br/>inicia sesi√≥n
                        Inactiva --> Eliminada: Sin actividad<br/>por 365 d√≠as
                    
                        Eliminada --> [*]: Datos anonimizados
                    
                        state Activa {
                            [*] --> Normal
                            Normal --> Cambiando_Password: Solicitud cambio
                            Cambiando_Password --> Normal: Password actualizado
                            Normal --> Editando_Perfil: Solicitud edici√≥n
                            Editando_Perfil --> Normal: Perfil actualizado
                        }
                    
                        state Suspendida_Admin {
                            [*] --> Bloqueada
                            note right of Bloqueada
                                ‚Ä¢ No puede iniciar sesi√≥n
                                ‚Ä¢ Debe contactar soporte
                                ‚Ä¢ Raz√≥n registrada
                            end note
                        }
                    
                        note right of Auto_Desactivada
                            ‚Ä¢ Puede reactivar solo
                            ‚Ä¢ Datos preservados
                            ‚Ä¢ Sesiones cerradas
                        end note
                    
                        note right of Eliminada
                            ‚Ä¢ Irreversible
                            ‚Ä¢ Datos anonimizados
                            ‚Ä¢ Cumple GPDR
                        end note

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogInN0YXRlRGlhZ3JhbS12MlxuICAgIFsqXSAtLT4gQWN0aXZhOiBSZWdpc3RybyBleGl0b3NvXG5cbiAgICBBY3RpdmEgLS0+IEF1dG9fRGVzYWN0aXZhZGE6IFVzdWFyaW88YnIvPmRlc2FjdGl2YSBjdWVudGFcbiAgICBBY3RpdmEgLS0+IFN1c3BlbmRpZGFfQWRtaW46IEFkbWluPGJyLz5zdXNwZW5kZVxuICAgIEFjdGl2YSAtLT4gSW5hY3RpdmE6IFNpbiBhY3RpdmlkYWQ8YnIvPnBvciAxODAgZFx1MDBlZGFzXG5cbiAgICBBdXRvX0Rlc2FjdGl2YWRhIC0tPiBBY3RpdmE6IFVzdWFyaW88YnIvPnJlYWN0aXZhXG4gICAgQXV0b19EZXNhY3RpdmFkYSAtLT4gRWxpbWluYWRhOiAzMCBkXHUwMGVkYXMgc2luPGJyLz5yZWFjdGl2YXJcblxuICAgIFN1c3BlbmRpZGFfQWRtaW4gLS0+IEFjdGl2YTogQWRtaW48YnIvPnJlYWN0aXZhXG4gICAgU3VzcGVuZGlkYV9BZG1pbiAtLT4gRWxpbWluYWRhOiBTb2xpY2l0dWQgdXN1YXJpbzxici8+JiBhcHJvYmFjaVx1MDBmM24gYWRtaW5cblxuICAgIEluYWN0aXZhIC0tPiBBY3RpdmE6IFVzdWFyaW88YnIvPmluaWNpYSBzZXNpXHUwMGYzblxuICAgIEluYWN0aXZhIC0tPiBFbGltaW5hZGE6IFNpbiBhY3RpdmlkYWQ8YnIvPnBvciAzNjUgZFx1MDBlZGFzXG5cbiAgICBFbGltaW5hZGEgLS0+IFsqXTogRGF0b3MgYW5vbmltaXphZG9zXG5cbiAgICBzdGF0ZSBBY3RpdmEge1xuICAgICAgICBbKl0gLS0+IE5vcm1hbFxuICAgICAgICBOb3JtYWwgLS0+IENhbWJpYW5kb19QYXNzd29yZDogU29saWNpdHVkIGNhbWJpb1xuICAgICAgICBDYW1iaWFuZG9fUGFzc3dvcmQgLS0+IE5vcm1hbDogUGFzc3dvcmQgYWN0dWFsaXphZG9cbiAgICAgICAgTm9ybWFsIC0tPiBFZGl0YW5kb19QZXJmaWw6IFNvbGljaXR1ZCBlZGljaVx1MDBmM25cbiAgICAgICAgRWRpdGFuZG9fUGVyZmlsIC0tPiBOb3JtYWw6IFBlcmZpbCBhY3R1YWxpemFkb1xuICAgIH1cblxuICAgIHN0YXRlIFN1c3BlbmRpZGFfQWRtaW4ge1xuICAgICAgICBbKl0gLS0+IEJsb3F1ZWFkYVxuICAgICAgICBub3RlIHJpZ2h0IG9mIEJsb3F1ZWFkYVxuICAgICAgICAgICAgXHUyMDIyIE5vIHB1ZWRlIGluaWNpYXIgc2VzaVx1MDBmM25cbiAgICAgICAgICAgIFx1MjAyMiBEZWJlIGNvbnRhY3RhciBzb3BvcnRlXG4gICAgICAgICAgICBcdTIwMjIgUmF6XHUwMGYzbiByZWdpc3RyYWRhXG4gICAgICAgIGVuZCBub3RlXG4gICAgfVxuXG4gICAgbm90ZSByaWdodCBvZiBBdXRvX0Rlc2FjdGl2YWRhXG4gICAgICAgIFx1MjAyMiBQdWVkZSByZWFjdGl2YXIgc29sb1xuICAgICAgICBcdTIwMjIgRGF0b3MgcHJlc2VydmFkb3NcbiAgICAgICAgXHUyMDIyIFNlc2lvbmVzIGNlcnJhZGFzXG4gICAgZW5kIG5vdGVcblxuICAgIG5vdGUgcmlnaHQgb2YgRWxpbWluYWRhXG4gICAgICAgIFx1MjAyMiBJcnJldmVyc2libGVcbiAgICAgICAgXHUyMDIyIERhdG9zIGFub25pbWl6YWRvc1xuICAgICAgICBcdTIwMjIgQ3VtcGxlIEdQRFJcbiAgICBlbmQgbm90ZSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogInN0YXRlRGlhZ3JhbS12MlxuICAgIFsqXSAtLT4gQWN0aXZhOiBSZWdpc3RybyBleGl0b3NvXG5cbiAgICBBY3RpdmEgLS0+IEF1dG9fRGVzYWN0aXZhZGE6IFVzdWFyaW88YnIvPmRlc2FjdGl2YSBjdWVudGFcbiAgICBBY3RpdmEgLS0+IFN1c3BlbmRpZGFfQWRtaW46IEFkbWluPGJyLz5zdXNwZW5kZVxuICAgIEFjdGl2YSAtLT4gSW5hY3RpdmE6IFNpbiBhY3RpdmlkYWQ8YnIvPnBvciAxODAgZFx1MDBlZGFzXG5cbiAgICBBdXRvX0Rlc2FjdGl2YWRhIC0tPiBBY3RpdmE6IFVzdWFyaW88YnIvPnJlYWN0aXZhXG4gICAgQXV0b19EZXNhY3RpdmFkYSAtLT4gRWxpbWluYWRhOiAzMCBkXHUwMGVkYXMgc2luPGJyLz5yZWFjdGl2YXJcblxuICAgIFN1c3BlbmRpZGFfQWRtaW4gLS0+IEFjdGl2YTogQWRtaW48YnIvPnJlYWN0aXZhXG4gICAgU3VzcGVuZGlkYV9BZG1pbiAtLT4gRWxpbWluYWRhOiBTb2xpY2l0dWQgdXN1YXJpbzxici8+JiBhcHJvYmFjaVx1MDBmM24gYWRtaW5cblxuICAgIEluYWN0aXZhIC0tPiBBY3RpdmE6IFVzdWFyaW88YnIvPmluaWNpYSBzZXNpXHUwMGYzblxuICAgIEluYWN0aXZhIC0tPiBFbGltaW5hZGE6IFNpbiBhY3RpdmlkYWQ8YnIvPnBvciAzNjUgZFx1MDBlZGFzXG5cbiAgICBFbGltaW5hZGEgLS0+IFsqXTogRGF0b3MgYW5vbmltaXphZG9zXG5cbiAgICBzdGF0ZSBBY3RpdmEge1xuICAgICAgICBbKl0gLS0+IE5vcm1hbFxuICAgICAgICBOb3JtYWwgLS0+IENhbWJpYW5kb19QYXNzd29yZDogU29saWNpdHVkIGNhbWJpb1xuICAgICAgICBDYW1iaWFuZG9fUGFzc3dvcmQgLS0+IE5vcm1hbDogUGFzc3dvcmQgYWN0dWFsaXphZG9cbiAgICAgICAgTm9ybWFsIC0tPiBFZGl0YW5kb19QZXJmaWw6IFNvbGljaXR1ZCBlZGljaVx1MDBmM25cbiAgICAgICAgRWRpdGFuZG9fUGVyZmlsIC0tPiBOb3JtYWw6IFBlcmZpbCBhY3R1YWxpemFkb1xuICAgIH1cblxuICAgIHN0YXRlIFN1c3BlbmRpZGFfQWRtaW4ge1xuICAgICAgICBbKl0gLS0+IEJsb3F1ZWFkYVxuICAgICAgICBub3RlIHJpZ2h0IG9mIEJsb3F1ZWFkYVxuICAgICAgICAgICAgXHUyMDIyIE5vIHB1ZWRlIGluaWNpYXIgc2VzaVx1MDBmM25cbiAgICAgICAgICAgIFx1MjAyMiBEZWJlIGNvbnRhY3RhciBzb3BvcnRlXG4gICAgICAgICAgICBcdTIwMjIgUmF6XHUwMGYzbiByZWdpc3RyYWRhXG4gICAgICAgIGVuZCBub3RlXG4gICAgfVxuXG4gICAgbm90ZSByaWdodCBvZiBBdXRvX0Rlc2FjdGl2YWRhXG4gICAgICAgIFx1MjAyMiBQdWVkZSByZWFjdGl2YXIgc29sb1xuICAgICAgICBcdTIwMjIgRGF0b3MgcHJlc2VydmFkb3NcbiAgICAgICAgXHUyMDIyIFNlc2lvbmVzIGNlcnJhZGFzXG4gICAgZW5kIG5vdGVcblxuICAgIG5vdGUgcmlnaHQgb2YgRWxpbWluYWRhXG4gICAgICAgIFx1MjAyMiBJcnJldmVyc2libGVcbiAgICAgICAgXHUyMDIyIERhdG9zIGFub25pbWl6YWRvc1xuICAgICAgICBcdTIwMjIgQ3VtcGxlIEdQRFJcbiAgICBlbmQgbm90ZSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    stateDiagram-v2
                        [*] --> Activa: Registro exitoso
                    
                        Activa --> Auto_Desactivada: Usuario<br/>desactiva cuenta
                        Activa --> Suspendida_Admin: Admin<br/>suspende
                        Activa --> Inactiva: Sin actividad<br/>por 180 d√≠as
                    
                        Auto_Desactivada --> Activa: Usuario<br/>reactiva
                        Auto_Desactivada --> Eliminada: 30 d√≠as sin<br/>reactivar
                    
                        Suspendida_Admin --> Activa: Admin<br/>reactiva
                        Suspendida_Admin --> Eliminada: Solicitud usuario<br/>& aprobaci√≥n admin
                    
                        Inactiva --> Activa: Usuario<br/>inicia sesi√≥n
                        Inactiva --> Eliminada: Sin actividad<br/>por 365 d√≠as
                    
                        Eliminada --> [*]: Datos anonimizados
                    
                        state Activa {
                            [*] --> Normal
                            Normal --> Cambiando_Password: Solicitud cambio
                            Cambiando_Password --> Normal: Password actualizado
                            Normal --> Editando_Perfil: Solicitud edici√≥n
                            Editando_Perfil --> Normal: Perfil actualizado
                        }
                    
                        state Suspendida_Admin {
                            [*] --> Bloqueada
                            note right of Bloqueada
                                ‚Ä¢ No puede iniciar sesi√≥n
                                ‚Ä¢ Debe contactar soporte
                                ‚Ä¢ Raz√≥n registrada
                            end note
                        }
                    
                        note right of Auto_Desactivada
                            ‚Ä¢ Puede reactivar solo
                            ‚Ä¢ Datos preservados
                            ‚Ä¢ Sesiones cerradas
                        end note
                    
                        note right of Eliminada
                            ‚Ä¢ Irreversible
                            ‚Ä¢ Datos anonimizados
                            ‚Ä¢ Cumple GPDR
                        end note

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    stateDiagram-v2
                        [*] --> Pendiente: Cliente inicia<br/>proceso de pago
                    
                        Pendiente --> Procesando: Gateway<br/>recibe solicitud
                    
                        Procesando --> Aprobado: Autorizaci√≥n<br/>exitosa
                        Procesando --> Rechazado: Fondos insuficientes<br/>o tarjeta inv√°lida
                        Procesando --> Error: Error t√©cnico<br/>del gateway
                    
                        Rechazado --> Pendiente: Cliente<br/>reintenta
                        Error --> Pendiente: Administrador<br/>autoriza reintento
                    
                        Aprobado --> Confirmado: Verificaci√≥n<br/>exitosa
                    
                        Confirmado --> Completado: Pedido<br/>entregado
                    
                        Completado --> Reembolsado: Solicitud de<br/>reembolso aprobada
                    
                        Rechazado --> [*]: Pago no procesado
                        Error --> [*]: Pago no procesado
                        Reembolsado --> [*]: Monto devuelto
                    
                        state Procesando {
                            [*] --> Validando_Datos
                            Validando_Datos --> Autorizando
                            Autorizando --> Capturando
                        }
                    
                        state Aprobado {
                            [*] --> Verificando_Fondos
                            Verificando_Fondos --> Reservado
                        }
                    
                        note right of Pendiente
                            ‚Ä¢ Esperando acci√≥n
                            ‚Ä¢ No afecta inventario
                            ‚Ä¢ Timeout: 15 minutos
                        end note
                    
                        note right of Completado
                            ‚Ä¢ Pago finalizado
                            ‚Ä¢ No reversible
                            ‚Ä¢ Venta confirmada
                        end note
                    
                        note right of Reembolsado
                            ‚Ä¢ Dinero devuelto
                            ‚Ä¢ Pedido cancelado
                            ‚Ä¢ Stock restaurado
                        end note

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogInN0YXRlRGlhZ3JhbS12MlxuICAgIFsqXSAtLT4gUGVuZGllbnRlOiBDbGllbnRlIGluaWNpYTxici8+cHJvY2VzbyBkZSBwYWdvXG5cbiAgICBQZW5kaWVudGUgLS0+IFByb2Nlc2FuZG86IEdhdGV3YXk8YnIvPnJlY2liZSBzb2xpY2l0dWRcblxuICAgIFByb2Nlc2FuZG8gLS0+IEFwcm9iYWRvOiBBdXRvcml6YWNpXHUwMGYzbjxici8+ZXhpdG9zYVxuICAgIFByb2Nlc2FuZG8gLS0+IFJlY2hhemFkbzogRm9uZG9zIGluc3VmaWNpZW50ZXM8YnIvPm8gdGFyamV0YSBpbnZcdTAwZTFsaWRhXG4gICAgUHJvY2VzYW5kbyAtLT4gRXJyb3I6IEVycm9yIHRcdTAwZTljbmljbzxici8+ZGVsIGdhdGV3YXlcblxuICAgIFJlY2hhemFkbyAtLT4gUGVuZGllbnRlOiBDbGllbnRlPGJyLz5yZWludGVudGFcbiAgICBFcnJvciAtLT4gUGVuZGllbnRlOiBBZG1pbmlzdHJhZG9yPGJyLz5hdXRvcml6YSByZWludGVudG9cblxuICAgIEFwcm9iYWRvIC0tPiBDb25maXJtYWRvOiBWZXJpZmljYWNpXHUwMGYzbjxici8+ZXhpdG9zYVxuXG4gICAgQ29uZmlybWFkbyAtLT4gQ29tcGxldGFkbzogUGVkaWRvPGJyLz5lbnRyZWdhZG9cblxuICAgIENvbXBsZXRhZG8gLS0+IFJlZW1ib2xzYWRvOiBTb2xpY2l0dWQgZGU8YnIvPnJlZW1ib2xzbyBhcHJvYmFkYVxuXG4gICAgUmVjaGF6YWRvIC0tPiBbKl06IFBhZ28gbm8gcHJvY2VzYWRvXG4gICAgRXJyb3IgLS0+IFsqXTogUGFnbyBubyBwcm9jZXNhZG9cbiAgICBSZWVtYm9sc2FkbyAtLT4gWypdOiBNb250byBkZXZ1ZWx0b1xuXG4gICAgc3RhdGUgUHJvY2VzYW5kbyB7XG4gICAgICAgIFsqXSAtLT4gVmFsaWRhbmRvX0RhdG9zXG4gICAgICAgIFZhbGlkYW5kb19EYXRvcyAtLT4gQXV0b3JpemFuZG9cbiAgICAgICAgQXV0b3JpemFuZG8gLS0+IENhcHR1cmFuZG9cbiAgICB9XG5cbiAgICBzdGF0ZSBBcHJvYmFkbyB7XG4gICAgICAgIFsqXSAtLT4gVmVyaWZpY2FuZG9fRm9uZG9zXG4gICAgICAgIFZlcmlmaWNhbmRvX0ZvbmRvcyAtLT4gUmVzZXJ2YWRvXG4gICAgfVxuXG4gICAgbm90ZSByaWdodCBvZiBQZW5kaWVudGVcbiAgICAgICAgXHUyMDIyIEVzcGVyYW5kbyBhY2NpXHUwMGYzblxuICAgICAgICBcdTIwMjIgTm8gYWZlY3RhIGludmVudGFyaW9cbiAgICAgICAgXHUyMDIyIFRpbWVvdXQ6IDE1IG1pbnV0b3NcbiAgICBlbmQgbm90ZVxuXG4gICAgbm90ZSByaWdodCBvZiBDb21wbGV0YWRvXG4gICAgICAgIFx1MjAyMiBQYWdvIGZpbmFsaXphZG9cbiAgICAgICAgXHUyMDIyIE5vIHJldmVyc2libGVcbiAgICAgICAgXHUyMDIyIFZlbnRhIGNvbmZpcm1hZGFcbiAgICBlbmQgbm90ZVxuXG4gICAgbm90ZSByaWdodCBvZiBSZWVtYm9sc2Fkb1xuICAgICAgICBcdTIwMjIgRGluZXJvIGRldnVlbHRvXG4gICAgICAgIFx1MjAyMiBQZWRpZG8gY2FuY2VsYWRvXG4gICAgICAgIFx1MjAyMiBTdG9jayByZXN0YXVyYWRvXG4gICAgZW5kIG5vdGUiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogInN0YXRlRGlhZ3JhbS12MlxuICAgIFsqXSAtLT4gUGVuZGllbnRlOiBDbGllbnRlIGluaWNpYTxici8+cHJvY2VzbyBkZSBwYWdvXG5cbiAgICBQZW5kaWVudGUgLS0+IFByb2Nlc2FuZG86IEdhdGV3YXk8YnIvPnJlY2liZSBzb2xpY2l0dWRcblxuICAgIFByb2Nlc2FuZG8gLS0+IEFwcm9iYWRvOiBBdXRvcml6YWNpXHUwMGYzbjxici8+ZXhpdG9zYVxuICAgIFByb2Nlc2FuZG8gLS0+IFJlY2hhemFkbzogRm9uZG9zIGluc3VmaWNpZW50ZXM8YnIvPm8gdGFyamV0YSBpbnZcdTAwZTFsaWRhXG4gICAgUHJvY2VzYW5kbyAtLT4gRXJyb3I6IEVycm9yIHRcdTAwZTljbmljbzxici8+ZGVsIGdhdGV3YXlcblxuICAgIFJlY2hhemFkbyAtLT4gUGVuZGllbnRlOiBDbGllbnRlPGJyLz5yZWludGVudGFcbiAgICBFcnJvciAtLT4gUGVuZGllbnRlOiBBZG1pbmlzdHJhZG9yPGJyLz5hdXRvcml6YSByZWludGVudG9cblxuICAgIEFwcm9iYWRvIC0tPiBDb25maXJtYWRvOiBWZXJpZmljYWNpXHUwMGYzbjxici8+ZXhpdG9zYVxuXG4gICAgQ29uZmlybWFkbyAtLT4gQ29tcGxldGFkbzogUGVkaWRvPGJyLz5lbnRyZWdhZG9cblxuICAgIENvbXBsZXRhZG8gLS0+IFJlZW1ib2xzYWRvOiBTb2xpY2l0dWQgZGU8YnIvPnJlZW1ib2xzbyBhcHJvYmFkYVxuXG4gICAgUmVjaGF6YWRvIC0tPiBbKl06IFBhZ28gbm8gcHJvY2VzYWRvXG4gICAgRXJyb3IgLS0+IFsqXTogUGFnbyBubyBwcm9jZXNhZG9cbiAgICBSZWVtYm9sc2FkbyAtLT4gWypdOiBNb250byBkZXZ1ZWx0b1xuXG4gICAgc3RhdGUgUHJvY2VzYW5kbyB7XG4gICAgICAgIFsqXSAtLT4gVmFsaWRhbmRvX0RhdG9zXG4gICAgICAgIFZhbGlkYW5kb19EYXRvcyAtLT4gQXV0b3JpemFuZG9cbiAgICAgICAgQXV0b3JpemFuZG8gLS0+IENhcHR1cmFuZG9cbiAgICB9XG5cbiAgICBzdGF0ZSBBcHJvYmFkbyB7XG4gICAgICAgIFsqXSAtLT4gVmVyaWZpY2FuZG9fRm9uZG9zXG4gICAgICAgIFZlcmlmaWNhbmRvX0ZvbmRvcyAtLT4gUmVzZXJ2YWRvXG4gICAgfVxuXG4gICAgbm90ZSByaWdodCBvZiBQZW5kaWVudGVcbiAgICAgICAgXHUyMDIyIEVzcGVyYW5kbyBhY2NpXHUwMGYzblxuICAgICAgICBcdTIwMjIgTm8gYWZlY3RhIGludmVudGFyaW9cbiAgICAgICAgXHUyMDIyIFRpbWVvdXQ6IDE1IG1pbnV0b3NcbiAgICBlbmQgbm90ZVxuXG4gICAgbm90ZSByaWdodCBvZiBDb21wbGV0YWRvXG4gICAgICAgIFx1MjAyMiBQYWdvIGZpbmFsaXphZG9cbiAgICAgICAgXHUyMDIyIE5vIHJldmVyc2libGVcbiAgICAgICAgXHUyMDIyIFZlbnRhIGNvbmZpcm1hZGFcbiAgICBlbmQgbm90ZVxuXG4gICAgbm90ZSByaWdodCBvZiBSZWVtYm9sc2Fkb1xuICAgICAgICBcdTIwMjIgRGluZXJvIGRldnVlbHRvXG4gICAgICAgIFx1MjAyMiBQZWRpZG8gY2FuY2VsYWRvXG4gICAgICAgIFx1MjAyMiBTdG9jayByZXN0YXVyYWRvXG4gICAgZW5kIG5vdGUiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    stateDiagram-v2
                        [*] --> Pendiente: Cliente inicia<br/>proceso de pago
                    
                        Pendiente --> Procesando: Gateway<br/>recibe solicitud
                    
                        Procesando --> Aprobado: Autorizaci√≥n<br/>exitosa
                        Procesando --> Rechazado: Fondos insuficientes<br/>o tarjeta inv√°lida
                        Procesando --> Error: Error t√©cnico<br/>del gateway
                    
                        Rechazado --> Pendiente: Cliente<br/>reintenta
                        Error --> Pendiente: Administrador<br/>autoriza reintento
                    
                        Aprobado --> Confirmado: Verificaci√≥n<br/>exitosa
                    
                        Confirmado --> Completado: Pedido<br/>entregado
                    
                        Completado --> Reembolsado: Solicitud de<br/>reembolso aprobada
                    
                        Rechazado --> [*]: Pago no procesado
                        Error --> [*]: Pago no procesado
                        Reembolsado --> [*]: Monto devuelto
                    
                        state Procesando {
                            [*] --> Validando_Datos
                            Validando_Datos --> Autorizando
                            Autorizando --> Capturando
                        }
                    
                        state Aprobado {
                            [*] --> Verificando_Fondos
                            Verificando_Fondos --> Reservado
                        }
                    
                        note right of Pendiente
                            ‚Ä¢ Esperando acci√≥n
                            ‚Ä¢ No afecta inventario
                            ‚Ä¢ Timeout: 15 minutos
                        end note
                    
                        note right of Completado
                            ‚Ä¢ Pago finalizado
                            ‚Ä¢ No reversible
                            ‚Ä¢ Venta confirmada
                        end note
                    
                        note right of Reembolsado
                            ‚Ä¢ Dinero devuelto
                            ‚Ä¢ Pedido cancelado
                            ‚Ä¢ Stock restaurado
                        end note

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    stateDiagram-v2
                        [*] --> Pendiente: Evento trigger
                    
                        Pendiente --> Encolada: Agregada a<br/>cola Celery
                    
                        Encolada --> Enviando: Worker procesa
                    
                        Enviando --> Enviada: Env√≠o exitoso<br/>(SMTP/SMS OK)
                        Enviando --> Fallida: Error al enviar
                    
                        Enviada --> Leida: Usuario abre<br/>notificaci√≥n
                    
                        Fallida --> Reintentando: Auto-retry<br/>(max 3 intentos)
                    
                        Reintentando --> Enviando: Intentando<br/>nuevamente
                        Reintentando --> Fallida_Final: 3 intentos<br/>fallidos
                    
                        Leida --> [*]: Notificaci√≥n procesada
                        Fallida_Final --> [*]: Notificaci√≥n<br/>no entregada
                    
                        state Enviando {
                            [*] --> Conectando_Servidor
                            Conectando_Servidor --> Enviando_Mensaje
                            Enviando_Mensaje --> Esperando_Confirmacion
                        }
                    
                        note right of Pendiente
                            ‚Ä¢ Creada en DB
                            ‚Ä¢ leida = false
                            ‚Ä¢ estado = pendiente
                        end note
                    
                        note right of Enviada
                            ‚Ä¢ Entregada exitosamente
                            ‚Ä¢ fecha_envio registrada
                            ‚Ä¢ Visible para usuario
                        end note
                    
                        note right of Leida
                            ‚Ä¢ Usuario la vio
                            ‚Ä¢ fecha_lectura registrada
                            ‚Ä¢ Puede archivarse
                        end note

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogInN0YXRlRGlhZ3JhbS12MlxuICAgIFsqXSAtLT4gUGVuZGllbnRlOiBFdmVudG8gdHJpZ2dlclxuXG4gICAgUGVuZGllbnRlIC0tPiBFbmNvbGFkYTogQWdyZWdhZGEgYTxici8+Y29sYSBDZWxlcnlcblxuICAgIEVuY29sYWRhIC0tPiBFbnZpYW5kbzogV29ya2VyIHByb2Nlc2FcblxuICAgIEVudmlhbmRvIC0tPiBFbnZpYWRhOiBFbnZcdTAwZWRvIGV4aXRvc288YnIvPihTTVRQL1NNUyBPSylcbiAgICBFbnZpYW5kbyAtLT4gRmFsbGlkYTogRXJyb3IgYWwgZW52aWFyXG5cbiAgICBFbnZpYWRhIC0tPiBMZWlkYTogVXN1YXJpbyBhYnJlPGJyLz5ub3RpZmljYWNpXHUwMGYzblxuXG4gICAgRmFsbGlkYSAtLT4gUmVpbnRlbnRhbmRvOiBBdXRvLXJldHJ5PGJyLz4obWF4IDMgaW50ZW50b3MpXG5cbiAgICBSZWludGVudGFuZG8gLS0+IEVudmlhbmRvOiBJbnRlbnRhbmRvPGJyLz5udWV2YW1lbnRlXG4gICAgUmVpbnRlbnRhbmRvIC0tPiBGYWxsaWRhX0ZpbmFsOiAzIGludGVudG9zPGJyLz5mYWxsaWRvc1xuXG4gICAgTGVpZGEgLS0+IFsqXTogTm90aWZpY2FjaVx1MDBmM24gcHJvY2VzYWRhXG4gICAgRmFsbGlkYV9GaW5hbCAtLT4gWypdOiBOb3RpZmljYWNpXHUwMGYzbjxici8+bm8gZW50cmVnYWRhXG5cbiAgICBzdGF0ZSBFbnZpYW5kbyB7XG4gICAgICAgIFsqXSAtLT4gQ29uZWN0YW5kb19TZXJ2aWRvclxuICAgICAgICBDb25lY3RhbmRvX1NlcnZpZG9yIC0tPiBFbnZpYW5kb19NZW5zYWplXG4gICAgICAgIEVudmlhbmRvX01lbnNhamUgLS0+IEVzcGVyYW5kb19Db25maXJtYWNpb25cbiAgICB9XG5cbiAgICBub3RlIHJpZ2h0IG9mIFBlbmRpZW50ZVxuICAgICAgICBcdTIwMjIgQ3JlYWRhIGVuIERCXG4gICAgICAgIFx1MjAyMiBsZWlkYSA9IGZhbHNlXG4gICAgICAgIFx1MjAyMiBlc3RhZG8gPSBwZW5kaWVudGVcbiAgICBlbmQgbm90ZVxuXG4gICAgbm90ZSByaWdodCBvZiBFbnZpYWRhXG4gICAgICAgIFx1MjAyMiBFbnRyZWdhZGEgZXhpdG9zYW1lbnRlXG4gICAgICAgIFx1MjAyMiBmZWNoYV9lbnZpbyByZWdpc3RyYWRhXG4gICAgICAgIFx1MjAyMiBWaXNpYmxlIHBhcmEgdXN1YXJpb1xuICAgIGVuZCBub3RlXG5cbiAgICBub3RlIHJpZ2h0IG9mIExlaWRhXG4gICAgICAgIFx1MjAyMiBVc3VhcmlvIGxhIHZpb1xuICAgICAgICBcdTIwMjIgZmVjaGFfbGVjdHVyYSByZWdpc3RyYWRhXG4gICAgICAgIFx1MjAyMiBQdWVkZSBhcmNoaXZhcnNlXG4gICAgZW5kIG5vdGUiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogInN0YXRlRGlhZ3JhbS12MlxuICAgIFsqXSAtLT4gUGVuZGllbnRlOiBFdmVudG8gdHJpZ2dlclxuXG4gICAgUGVuZGllbnRlIC0tPiBFbmNvbGFkYTogQWdyZWdhZGEgYTxici8+Y29sYSBDZWxlcnlcblxuICAgIEVuY29sYWRhIC0tPiBFbnZpYW5kbzogV29ya2VyIHByb2Nlc2FcblxuICAgIEVudmlhbmRvIC0tPiBFbnZpYWRhOiBFbnZcdTAwZWRvIGV4aXRvc288YnIvPihTTVRQL1NNUyBPSylcbiAgICBFbnZpYW5kbyAtLT4gRmFsbGlkYTogRXJyb3IgYWwgZW52aWFyXG5cbiAgICBFbnZpYWRhIC0tPiBMZWlkYTogVXN1YXJpbyBhYnJlPGJyLz5ub3RpZmljYWNpXHUwMGYzblxuXG4gICAgRmFsbGlkYSAtLT4gUmVpbnRlbnRhbmRvOiBBdXRvLXJldHJ5PGJyLz4obWF4IDMgaW50ZW50b3MpXG5cbiAgICBSZWludGVudGFuZG8gLS0+IEVudmlhbmRvOiBJbnRlbnRhbmRvPGJyLz5udWV2YW1lbnRlXG4gICAgUmVpbnRlbnRhbmRvIC0tPiBGYWxsaWRhX0ZpbmFsOiAzIGludGVudG9zPGJyLz5mYWxsaWRvc1xuXG4gICAgTGVpZGEgLS0+IFsqXTogTm90aWZpY2FjaVx1MDBmM24gcHJvY2VzYWRhXG4gICAgRmFsbGlkYV9GaW5hbCAtLT4gWypdOiBOb3RpZmljYWNpXHUwMGYzbjxici8+bm8gZW50cmVnYWRhXG5cbiAgICBzdGF0ZSBFbnZpYW5kbyB7XG4gICAgICAgIFsqXSAtLT4gQ29uZWN0YW5kb19TZXJ2aWRvclxuICAgICAgICBDb25lY3RhbmRvX1NlcnZpZG9yIC0tPiBFbnZpYW5kb19NZW5zYWplXG4gICAgICAgIEVudmlhbmRvX01lbnNhamUgLS0+IEVzcGVyYW5kb19Db25maXJtYWNpb25cbiAgICB9XG5cbiAgICBub3RlIHJpZ2h0IG9mIFBlbmRpZW50ZVxuICAgICAgICBcdTIwMjIgQ3JlYWRhIGVuIERCXG4gICAgICAgIFx1MjAyMiBsZWlkYSA9IGZhbHNlXG4gICAgICAgIFx1MjAyMiBlc3RhZG8gPSBwZW5kaWVudGVcbiAgICBlbmQgbm90ZVxuXG4gICAgbm90ZSByaWdodCBvZiBFbnZpYWRhXG4gICAgICAgIFx1MjAyMiBFbnRyZWdhZGEgZXhpdG9zYW1lbnRlXG4gICAgICAgIFx1MjAyMiBmZWNoYV9lbnZpbyByZWdpc3RyYWRhXG4gICAgICAgIFx1MjAyMiBWaXNpYmxlIHBhcmEgdXN1YXJpb1xuICAgIGVuZCBub3RlXG5cbiAgICBub3RlIHJpZ2h0IG9mIExlaWRhXG4gICAgICAgIFx1MjAyMiBVc3VhcmlvIGxhIHZpb1xuICAgICAgICBcdTIwMjIgZmVjaGFfbGVjdHVyYSByZWdpc3RyYWRhXG4gICAgICAgIFx1MjAyMiBQdWVkZSBhcmNoaXZhcnNlXG4gICAgZW5kIG5vdGUiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    stateDiagram-v2
                        [*] --> Pendiente: Evento trigger
                    
                        Pendiente --> Encolada: Agregada a<br/>cola Celery
                    
                        Encolada --> Enviando: Worker procesa
                    
                        Enviando --> Enviada: Env√≠o exitoso<br/>(SMTP/SMS OK)
                        Enviando --> Fallida: Error al enviar
                    
                        Enviada --> Leida: Usuario abre<br/>notificaci√≥n
                    
                        Fallida --> Reintentando: Auto-retry<br/>(max 3 intentos)
                    
                        Reintentando --> Enviando: Intentando<br/>nuevamente
                        Reintentando --> Fallida_Final: 3 intentos<br/>fallidos
                    
                        Leida --> [*]: Notificaci√≥n procesada
                        Fallida_Final --> [*]: Notificaci√≥n<br/>no entregada
                    
                        state Enviando {
                            [*] --> Conectando_Servidor
                            Conectando_Servidor --> Enviando_Mensaje
                            Enviando_Mensaje --> Esperando_Confirmacion
                        }
                    
                        note right of Pendiente
                            ‚Ä¢ Creada en DB
                            ‚Ä¢ leida = false
                            ‚Ä¢ estado = pendiente
                        end note
                    
                        note right of Enviada
                            ‚Ä¢ Entregada exitosamente
                            ‚Ä¢ fecha_envio registrada
                            ‚Ä¢ Visible para usuario
                        end note
                    
                        note right of Leida
                            ‚Ä¢ Usuario la vio
                            ‚Ä¢ fecha_lectura registrada
                            ‚Ä¢ Puede archivarse
                        end note

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    stateDiagram-v2
                        [*] --> Normal: Stock >= stock_minimo<br/>+ margen
                    
                        Normal --> Bajo: Stock <= stock_minimo
                    
                        Bajo --> Muy_Bajo: Stock < (stock_minimo / 2)
                    
                        Muy_Bajo --> Critico: Stock <= 5
                    
                        Critico --> Agotado: Stock = 0
                    
                        Bajo --> Normal: Recarga manual<br/>o autom√°tica
                        Muy_Bajo --> Normal: Recarga manual<br/>o autom√°tica
                        Critico --> Normal: Recarga manual<br/>o autom√°tica
                        Agotado --> Normal: Recarga manual<br/>o autom√°tica
                    
                        state Normal {
                            [*] --> Disponible
                            Disponible --> Vendiendo: Pedidos activos
                            Vendiendo --> Disponible: Stock OK
                        }
                    
                        state Bajo {
                            [*] --> Alerta_Proveedor
                            note right of Alerta_Proveedor
                                ‚Ä¢ Notificaci√≥n al proveedor
                                ‚Ä¢ Recarga auto trigger
                            end note
                        }
                    
                        state Critico {
                            [*] --> Alerta_Admin
                            note right of Alerta_Admin
                                ‚Ä¢ Notificaci√≥n urgente
                                ‚Ä¢ Visible en dashboard
                                ‚Ä¢ Icono de advertencia
                            end note
                        }
                    
                        state Agotado {
                            [*] --> No_Disponible
                            note right of No_Disponible
                                ‚Ä¢ No se puede agregar al carrito
                                ‚Ä¢ Mensaje "Agotado"
                                ‚Ä¢ No visible en b√∫squedas
                            end note
                        }
                    
                        note right of Normal
                            ‚Ä¢ Stock saludable
                            ‚Ä¢ Ventas normales
                            ‚Ä¢ Sin alertas
                        end note
                    
                        note right of Muy_Bajo
                            ‚Ä¢ Requiere atenci√≥n
                            ‚Ä¢ Prioridad alta
                            ‚Ä¢ Limitar compras grandes
                        end note

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogInN0YXRlRGlhZ3JhbS12MlxuICAgIFsqXSAtLT4gTm9ybWFsOiBTdG9jayA+PSBzdG9ja19taW5pbW88YnIvPisgbWFyZ2VuXG5cbiAgICBOb3JtYWwgLS0+IEJham86IFN0b2NrIDw9IHN0b2NrX21pbmltb1xuXG4gICAgQmFqbyAtLT4gTXV5X0Jham86IFN0b2NrIDwgKHN0b2NrX21pbmltbyAvIDIpXG5cbiAgICBNdXlfQmFqbyAtLT4gQ3JpdGljbzogU3RvY2sgPD0gNVxuXG4gICAgQ3JpdGljbyAtLT4gQWdvdGFkbzogU3RvY2sgPSAwXG5cbiAgICBCYWpvIC0tPiBOb3JtYWw6IFJlY2FyZ2EgbWFudWFsPGJyLz5vIGF1dG9tXHUwMGUxdGljYVxuICAgIE11eV9CYWpvIC0tPiBOb3JtYWw6IFJlY2FyZ2EgbWFudWFsPGJyLz5vIGF1dG9tXHUwMGUxdGljYVxuICAgIENyaXRpY28gLS0+IE5vcm1hbDogUmVjYXJnYSBtYW51YWw8YnIvPm8gYXV0b21cdTAwZTF0aWNhXG4gICAgQWdvdGFkbyAtLT4gTm9ybWFsOiBSZWNhcmdhIG1hbnVhbDxici8+byBhdXRvbVx1MDBlMXRpY2FcblxuICAgIHN0YXRlIE5vcm1hbCB7XG4gICAgICAgIFsqXSAtLT4gRGlzcG9uaWJsZVxuICAgICAgICBEaXNwb25pYmxlIC0tPiBWZW5kaWVuZG86IFBlZGlkb3MgYWN0aXZvc1xuICAgICAgICBWZW5kaWVuZG8gLS0+IERpc3BvbmlibGU6IFN0b2NrIE9LXG4gICAgfVxuXG4gICAgc3RhdGUgQmFqbyB7XG4gICAgICAgIFsqXSAtLT4gQWxlcnRhX1Byb3ZlZWRvclxuICAgICAgICBub3RlIHJpZ2h0IG9mIEFsZXJ0YV9Qcm92ZWVkb3JcbiAgICAgICAgICAgIFx1MjAyMiBOb3RpZmljYWNpXHUwMGYzbiBhbCBwcm92ZWVkb3JcbiAgICAgICAgICAgIFx1MjAyMiBSZWNhcmdhIGF1dG8gdHJpZ2dlclxuICAgICAgICBlbmQgbm90ZVxuICAgIH1cblxuICAgIHN0YXRlIENyaXRpY28ge1xuICAgICAgICBbKl0gLS0+IEFsZXJ0YV9BZG1pblxuICAgICAgICBub3RlIHJpZ2h0IG9mIEFsZXJ0YV9BZG1pblxuICAgICAgICAgICAgXHUyMDIyIE5vdGlmaWNhY2lcdTAwZjNuIHVyZ2VudGVcbiAgICAgICAgICAgIFx1MjAyMiBWaXNpYmxlIGVuIGRhc2hib2FyZFxuICAgICAgICAgICAgXHUyMDIyIEljb25vIGRlIGFkdmVydGVuY2lhXG4gICAgICAgIGVuZCBub3RlXG4gICAgfVxuXG4gICAgc3RhdGUgQWdvdGFkbyB7XG4gICAgICAgIFsqXSAtLT4gTm9fRGlzcG9uaWJsZVxuICAgICAgICBub3RlIHJpZ2h0IG9mIE5vX0Rpc3BvbmlibGVcbiAgICAgICAgICAgIFx1MjAyMiBObyBzZSBwdWVkZSBhZ3JlZ2FyIGFsIGNhcnJpdG9cbiAgICAgICAgICAgIFx1MjAyMiBNZW5zYWplIFwiQWdvdGFkb1wiXG4gICAgICAgICAgICBcdTIwMjIgTm8gdmlzaWJsZSBlbiBiXHUwMGZhc3F1ZWRhc1xuICAgICAgICBlbmQgbm90ZVxuICAgIH1cblxuICAgIG5vdGUgcmlnaHQgb2YgTm9ybWFsXG4gICAgICAgIFx1MjAyMiBTdG9jayBzYWx1ZGFibGVcbiAgICAgICAgXHUyMDIyIFZlbnRhcyBub3JtYWxlc1xuICAgICAgICBcdTIwMjIgU2luIGFsZXJ0YXNcbiAgICBlbmQgbm90ZVxuXG4gICAgbm90ZSByaWdodCBvZiBNdXlfQmFqb1xuICAgICAgICBcdTIwMjIgUmVxdWllcmUgYXRlbmNpXHUwMGYzblxuICAgICAgICBcdTIwMjIgUHJpb3JpZGFkIGFsdGFcbiAgICAgICAgXHUyMDIyIExpbWl0YXIgY29tcHJhcyBncmFuZGVzXG4gICAgZW5kIG5vdGUiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogInN0YXRlRGlhZ3JhbS12MlxuICAgIFsqXSAtLT4gTm9ybWFsOiBTdG9jayA+PSBzdG9ja19taW5pbW88YnIvPisgbWFyZ2VuXG5cbiAgICBOb3JtYWwgLS0+IEJham86IFN0b2NrIDw9IHN0b2NrX21pbmltb1xuXG4gICAgQmFqbyAtLT4gTXV5X0Jham86IFN0b2NrIDwgKHN0b2NrX21pbmltbyAvIDIpXG5cbiAgICBNdXlfQmFqbyAtLT4gQ3JpdGljbzogU3RvY2sgPD0gNVxuXG4gICAgQ3JpdGljbyAtLT4gQWdvdGFkbzogU3RvY2sgPSAwXG5cbiAgICBCYWpvIC0tPiBOb3JtYWw6IFJlY2FyZ2EgbWFudWFsPGJyLz5vIGF1dG9tXHUwMGUxdGljYVxuICAgIE11eV9CYWpvIC0tPiBOb3JtYWw6IFJlY2FyZ2EgbWFudWFsPGJyLz5vIGF1dG9tXHUwMGUxdGljYVxuICAgIENyaXRpY28gLS0+IE5vcm1hbDogUmVjYXJnYSBtYW51YWw8YnIvPm8gYXV0b21cdTAwZTF0aWNhXG4gICAgQWdvdGFkbyAtLT4gTm9ybWFsOiBSZWNhcmdhIG1hbnVhbDxici8+byBhdXRvbVx1MDBlMXRpY2FcblxuICAgIHN0YXRlIE5vcm1hbCB7XG4gICAgICAgIFsqXSAtLT4gRGlzcG9uaWJsZVxuICAgICAgICBEaXNwb25pYmxlIC0tPiBWZW5kaWVuZG86IFBlZGlkb3MgYWN0aXZvc1xuICAgICAgICBWZW5kaWVuZG8gLS0+IERpc3BvbmlibGU6IFN0b2NrIE9LXG4gICAgfVxuXG4gICAgc3RhdGUgQmFqbyB7XG4gICAgICAgIFsqXSAtLT4gQWxlcnRhX1Byb3ZlZWRvclxuICAgICAgICBub3RlIHJpZ2h0IG9mIEFsZXJ0YV9Qcm92ZWVkb3JcbiAgICAgICAgICAgIFx1MjAyMiBOb3RpZmljYWNpXHUwMGYzbiBhbCBwcm92ZWVkb3JcbiAgICAgICAgICAgIFx1MjAyMiBSZWNhcmdhIGF1dG8gdHJpZ2dlclxuICAgICAgICBlbmQgbm90ZVxuICAgIH1cblxuICAgIHN0YXRlIENyaXRpY28ge1xuICAgICAgICBbKl0gLS0+IEFsZXJ0YV9BZG1pblxuICAgICAgICBub3RlIHJpZ2h0IG9mIEFsZXJ0YV9BZG1pblxuICAgICAgICAgICAgXHUyMDIyIE5vdGlmaWNhY2lcdTAwZjNuIHVyZ2VudGVcbiAgICAgICAgICAgIFx1MjAyMiBWaXNpYmxlIGVuIGRhc2hib2FyZFxuICAgICAgICAgICAgXHUyMDIyIEljb25vIGRlIGFkdmVydGVuY2lhXG4gICAgICAgIGVuZCBub3RlXG4gICAgfVxuXG4gICAgc3RhdGUgQWdvdGFkbyB7XG4gICAgICAgIFsqXSAtLT4gTm9fRGlzcG9uaWJsZVxuICAgICAgICBub3RlIHJpZ2h0IG9mIE5vX0Rpc3BvbmlibGVcbiAgICAgICAgICAgIFx1MjAyMiBObyBzZSBwdWVkZSBhZ3JlZ2FyIGFsIGNhcnJpdG9cbiAgICAgICAgICAgIFx1MjAyMiBNZW5zYWplIFwiQWdvdGFkb1wiXG4gICAgICAgICAgICBcdTIwMjIgTm8gdmlzaWJsZSBlbiBiXHUwMGZhc3F1ZWRhc1xuICAgICAgICBlbmQgbm90ZVxuICAgIH1cblxuICAgIG5vdGUgcmlnaHQgb2YgTm9ybWFsXG4gICAgICAgIFx1MjAyMiBTdG9jayBzYWx1ZGFibGVcbiAgICAgICAgXHUyMDIyIFZlbnRhcyBub3JtYWxlc1xuICAgICAgICBcdTIwMjIgU2luIGFsZXJ0YXNcbiAgICBlbmQgbm90ZVxuXG4gICAgbm90ZSByaWdodCBvZiBNdXlfQmFqb1xuICAgICAgICBcdTIwMjIgUmVxdWllcmUgYXRlbmNpXHUwMGYzblxuICAgICAgICBcdTIwMjIgUHJpb3JpZGFkIGFsdGFcbiAgICAgICAgXHUyMDIyIExpbWl0YXIgY29tcHJhcyBncmFuZGVzXG4gICAgZW5kIG5vdGUiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    stateDiagram-v2
                        [*] --> Normal: Stock >= stock_minimo<br/>+ margen
                    
                        Normal --> Bajo: Stock <= stock_minimo
                    
                        Bajo --> Muy_Bajo: Stock < (stock_minimo / 2)
                    
                        Muy_Bajo --> Critico: Stock <= 5
                    
                        Critico --> Agotado: Stock = 0
                    
                        Bajo --> Normal: Recarga manual<br/>o autom√°tica
                        Muy_Bajo --> Normal: Recarga manual<br/>o autom√°tica
                        Critico --> Normal: Recarga manual<br/>o autom√°tica
                        Agotado --> Normal: Recarga manual<br/>o autom√°tica
                    
                        state Normal {
                            [*] --> Disponible
                            Disponible --> Vendiendo: Pedidos activos
                            Vendiendo --> Disponible: Stock OK
                        }
                    
                        state Bajo {
                            [*] --> Alerta_Proveedor
                            note right of Alerta_Proveedor
                                ‚Ä¢ Notificaci√≥n al proveedor
                                ‚Ä¢ Recarga auto trigger
                            end note
                        }
                    
                        state Critico {
                            [*] --> Alerta_Admin
                            note right of Alerta_Admin
                                ‚Ä¢ Notificaci√≥n urgente
                                ‚Ä¢ Visible en dashboard
                                ‚Ä¢ Icono de advertencia
                            end note
                        }
                    
                        state Agotado {
                            [*] --> No_Disponible
                            note right of No_Disponible
                                ‚Ä¢ No se puede agregar al carrito
                                ‚Ä¢ Mensaje "Agotado"
                                ‚Ä¢ No visible en b√∫squedas
                            end note
                        }
                    
                        note right of Normal
                            ‚Ä¢ Stock saludable
                            ‚Ä¢ Ventas normales
                            ‚Ä¢ Sin alertas
                        end note
                    
                        note right of Muy_Bajo
                            ‚Ä¢ Requiere atenci√≥n
                            ‚Ä¢ Prioridad alta
                            ‚Ä¢ Limitar compras grandes
                        end note


.. dropdown:: üìä Diagrama Objetos (5 diagramas)
    :open:
    :class-container: sd-mb-4

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TB
                        subgraph "Instancias en Runtime - Pedido #1234"
                            usuario1["""""üë§ usuario1: Usuario<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 42<br/>email: 'maria@email.com'<br/>nombre: 'Mar√≠a Garc√≠a'<br/>rol: 'cliente'<br/>estado: true"""""]
                            
                            tienda1["""""üè™ tienda1: Tienda<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1<br/>id_administrador: 1<br/>nombre: 'Tienda Centro'<br/>direccion: 'Calle 10 #5-20'<br/>activa: true"""""]
                            
                            pedido1["""""üì¶ pedido1: Pedido<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1234<br/>id_cliente: 42<br/>id_tienda: 1<br/>estado: 'preparando'<br/>total: 45000.00<br/>fecha_creacion: '2025-12-04 10:30'<br/>notas: 'Entregar antes 5pm'"""""]
                            
                            detalle1["""""üìã detalle1: DetallePedido<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 5001<br/>id_pedido: 1234<br/>id_producto: 101<br/>cantidad: 2<br/>precio_unitario: 12000.00<br/>subtotal: 24000.00"""""]
                            
                            detalle2["""""üìã detalle2: DetallePedido<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 5002<br/>id_pedido: 1234<br/>id_producto: 205<br/>cantidad: 3<br/>precio_unitario: 7000.00<br/>subtotal: 21000.00"""""]
                            
                            producto1["""""üì¶ producto1: Producto<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 101<br/>id_tienda: 1<br/>id_proveedor: 15<br/>nombre: 'Arroz Diana 500g'<br/>precio: 12000.00<br/>stock: 148<br/>categoria: 'alimentos'"""""]
                            
                            producto2["""""üì¶ producto2: Producto<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 205<br/>id_tienda: 1<br/>id_proveedor: 15<br/>nombre: 'Aceite Girasol 1L'<br/>precio: 7000.00<br/>stock: 67<br/>categoria: 'alimentos'"""""]
                            
                            proveedor1["""""üë®‚Äçüíº proveedor1: Usuario<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 15<br/>email: 'juan@proveedora.com'<br/>nombre: 'Juan P√©rez'<br/>rol: 'proveedor'<br/>estado: true"""""]
                            
                            pago1["""""üí≥ pago1: Pago<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 789<br/>id_usuario: 42<br/>id_pedido: 1234<br/>id_estado_pago: 2<br/>id_metodo_pago: 1<br/>monto: 45000.00<br/>fecha_creacion: '2025-12-04 10:25'"""""]
                            
                            metodo1["""""üí∞ metodo1: MetodoPago<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1<br/>nombre: 'Tarjeta Cr√©dito'<br/>activo: true"""""]
                            
                            estado1["""""‚úÖ estado1: EstadoPago<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 2<br/>nombre: 'Aprobado'"""""]
                        end
                        
                        pedido1 -->|id_cliente = 42| usuario1
                        pedido1 -->|id_tienda = 1| tienda1
                        pedido1 -->|detalles| detalle1
                        pedido1 -->|detalles| detalle2
                        pedido1 -->|pagos| pago1
                        
                        detalle1 -->|id_producto = 101| producto1
                        detalle2 -->|id_producto = 205| producto2
                        
                        producto1 -->|id_tienda = 1| tienda1
                        producto2 -->|id_tienda = 1| tienda1
                        producto1 -->|id_proveedor = 15| proveedor1
                        producto2 -->|id_proveedor = 15| proveedor1
                        
                        pago1 -->|id_usuario = 42| usuario1
                        pago1 -->|id_pedido = 1234| pedido1
                        pago1 -->|id_metodo_pago = 1| metodo1
                        pago1 -->|id_estado_pago = 2| estado1

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJJbnN0YW5jaWFzIGVuIFJ1bnRpbWUgLSBQZWRpZG8gIzEyMzRcIlxuICAgICAgICB1c3VhcmlvMVtcIlx1ZDgzZFx1ZGM2NCB1c3VhcmlvMTogVXN1YXJpbzxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogNDI8YnIvPmVtYWlsOiAnbWFyaWFAZW1haWwuY29tJzxici8+bm9tYnJlOiAnTWFyXHUwMGVkYSBHYXJjXHUwMGVkYSc8YnIvPnJvbDogJ2NsaWVudGUnPGJyLz5lc3RhZG86IHRydWVcIl1cbiAgICAgICAgXG4gICAgICAgIHRpZW5kYTFbXCJcdWQ4M2NcdWRmZWEgdGllbmRhMTogVGllbmRhPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAxPGJyLz5pZF9hZG1pbmlzdHJhZG9yOiAxPGJyLz5ub21icmU6ICdUaWVuZGEgQ2VudHJvJzxici8+ZGlyZWNjaW9uOiAnQ2FsbGUgMTAgIzUtMjAnPGJyLz5hY3RpdmE6IHRydWVcIl1cbiAgICAgICAgXG4gICAgICAgIHBlZGlkbzFbXCJcdWQ4M2RcdWRjZTYgcGVkaWRvMTogUGVkaWRvPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAxMjM0PGJyLz5pZF9jbGllbnRlOiA0Mjxici8+aWRfdGllbmRhOiAxPGJyLz5lc3RhZG86ICdwcmVwYXJhbmRvJzxici8+dG90YWw6IDQ1MDAwLjAwPGJyLz5mZWNoYV9jcmVhY2lvbjogJzIwMjUtMTItMDQgMTA6MzAnPGJyLz5ub3RhczogJ0VudHJlZ2FyIGFudGVzIDVwbSdcIl1cbiAgICAgICAgXG4gICAgICAgIGRldGFsbGUxW1wiXHVkODNkXHVkY2NiIGRldGFsbGUxOiBEZXRhbGxlUGVkaWRvPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiA1MDAxPGJyLz5pZF9wZWRpZG86IDEyMzQ8YnIvPmlkX3Byb2R1Y3RvOiAxMDE8YnIvPmNhbnRpZGFkOiAyPGJyLz5wcmVjaW9fdW5pdGFyaW86IDEyMDAwLjAwPGJyLz5zdWJ0b3RhbDogMjQwMDAuMDBcIl1cbiAgICAgICAgXG4gICAgICAgIGRldGFsbGUyW1wiXHVkODNkXHVkY2NiIGRldGFsbGUyOiBEZXRhbGxlUGVkaWRvPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiA1MDAyPGJyLz5pZF9wZWRpZG86IDEyMzQ8YnIvPmlkX3Byb2R1Y3RvOiAyMDU8YnIvPmNhbnRpZGFkOiAzPGJyLz5wcmVjaW9fdW5pdGFyaW86IDcwMDAuMDA8YnIvPnN1YnRvdGFsOiAyMTAwMC4wMFwiXVxuICAgICAgICBcbiAgICAgICAgcHJvZHVjdG8xW1wiXHVkODNkXHVkY2U2IHByb2R1Y3RvMTogUHJvZHVjdG88YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDEwMTxici8+aWRfdGllbmRhOiAxPGJyLz5pZF9wcm92ZWVkb3I6IDE1PGJyLz5ub21icmU6ICdBcnJveiBEaWFuYSA1MDBnJzxici8+cHJlY2lvOiAxMjAwMC4wMDxici8+c3RvY2s6IDE0ODxici8+Y2F0ZWdvcmlhOiAnYWxpbWVudG9zJ1wiXVxuICAgICAgICBcbiAgICAgICAgcHJvZHVjdG8yW1wiXHVkODNkXHVkY2U2IHByb2R1Y3RvMjogUHJvZHVjdG88YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDIwNTxici8+aWRfdGllbmRhOiAxPGJyLz5pZF9wcm92ZWVkb3I6IDE1PGJyLz5ub21icmU6ICdBY2VpdGUgR2lyYXNvbCAxTCc8YnIvPnByZWNpbzogNzAwMC4wMDxici8+c3RvY2s6IDY3PGJyLz5jYXRlZ29yaWE6ICdhbGltZW50b3MnXCJdXG4gICAgICAgIFxuICAgICAgICBwcm92ZWVkb3IxW1wiXHVkODNkXHVkYzY4XHUyMDBkXHVkODNkXHVkY2JjIHByb3ZlZWRvcjE6IFVzdWFyaW88YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDE1PGJyLz5lbWFpbDogJ2p1YW5AcHJvdmVlZG9yYS5jb20nPGJyLz5ub21icmU6ICdKdWFuIFBcdTAwZTlyZXonPGJyLz5yb2w6ICdwcm92ZWVkb3InPGJyLz5lc3RhZG86IHRydWVcIl1cbiAgICAgICAgXG4gICAgICAgIHBhZ28xW1wiXHVkODNkXHVkY2IzIHBhZ28xOiBQYWdvPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiA3ODk8YnIvPmlkX3VzdWFyaW86IDQyPGJyLz5pZF9wZWRpZG86IDEyMzQ8YnIvPmlkX2VzdGFkb19wYWdvOiAyPGJyLz5pZF9tZXRvZG9fcGFnbzogMTxici8+bW9udG86IDQ1MDAwLjAwPGJyLz5mZWNoYV9jcmVhY2lvbjogJzIwMjUtMTItMDQgMTA6MjUnXCJdXG4gICAgICAgIFxuICAgICAgICBtZXRvZG8xW1wiXHVkODNkXHVkY2IwIG1ldG9kbzE6IE1ldG9kb1BhZ288YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDE8YnIvPm5vbWJyZTogJ1RhcmpldGEgQ3JcdTAwZTlkaXRvJzxici8+YWN0aXZvOiB0cnVlXCJdXG4gICAgICAgIFxuICAgICAgICBlc3RhZG8xW1wiXHUyNzA1IGVzdGFkbzE6IEVzdGFkb1BhZ288YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDI8YnIvPm5vbWJyZTogJ0Fwcm9iYWRvJ1wiXVxuICAgIGVuZFxuICAgIFxuICAgIHBlZGlkbzEgLS0+fGlkX2NsaWVudGUgPSA0MnwgdXN1YXJpbzFcbiAgICBwZWRpZG8xIC0tPnxpZF90aWVuZGEgPSAxfCB0aWVuZGExXG4gICAgcGVkaWRvMSAtLT58ZGV0YWxsZXN8IGRldGFsbGUxXG4gICAgcGVkaWRvMSAtLT58ZGV0YWxsZXN8IGRldGFsbGUyXG4gICAgcGVkaWRvMSAtLT58cGFnb3N8IHBhZ28xXG4gICAgXG4gICAgZGV0YWxsZTEgLS0+fGlkX3Byb2R1Y3RvID0gMTAxfCBwcm9kdWN0bzFcbiAgICBkZXRhbGxlMiAtLT58aWRfcHJvZHVjdG8gPSAyMDV8IHByb2R1Y3RvMlxuICAgIFxuICAgIHByb2R1Y3RvMSAtLT58aWRfdGllbmRhID0gMXwgdGllbmRhMVxuICAgIHByb2R1Y3RvMiAtLT58aWRfdGllbmRhID0gMXwgdGllbmRhMVxuICAgIHByb2R1Y3RvMSAtLT58aWRfcHJvdmVlZG9yID0gMTV8IHByb3ZlZWRvcjFcbiAgICBwcm9kdWN0bzIgLS0+fGlkX3Byb3ZlZWRvciA9IDE1fCBwcm92ZWVkb3IxXG4gICAgXG4gICAgcGFnbzEgLS0+fGlkX3VzdWFyaW8gPSA0MnwgdXN1YXJpbzFcbiAgICBwYWdvMSAtLT58aWRfcGVkaWRvID0gMTIzNHwgcGVkaWRvMVxuICAgIHBhZ28xIC0tPnxpZF9tZXRvZG9fcGFnbyA9IDF8IG1ldG9kbzFcbiAgICBwYWdvMSAtLT58aWRfZXN0YWRvX3BhZ28gPSAyfCBlc3RhZG8xIiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJJbnN0YW5jaWFzIGVuIFJ1bnRpbWUgLSBQZWRpZG8gIzEyMzRcIlxuICAgICAgICB1c3VhcmlvMVtcIlx1ZDgzZFx1ZGM2NCB1c3VhcmlvMTogVXN1YXJpbzxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogNDI8YnIvPmVtYWlsOiAnbWFyaWFAZW1haWwuY29tJzxici8+bm9tYnJlOiAnTWFyXHUwMGVkYSBHYXJjXHUwMGVkYSc8YnIvPnJvbDogJ2NsaWVudGUnPGJyLz5lc3RhZG86IHRydWVcIl1cbiAgICAgICAgXG4gICAgICAgIHRpZW5kYTFbXCJcdWQ4M2NcdWRmZWEgdGllbmRhMTogVGllbmRhPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAxPGJyLz5pZF9hZG1pbmlzdHJhZG9yOiAxPGJyLz5ub21icmU6ICdUaWVuZGEgQ2VudHJvJzxici8+ZGlyZWNjaW9uOiAnQ2FsbGUgMTAgIzUtMjAnPGJyLz5hY3RpdmE6IHRydWVcIl1cbiAgICAgICAgXG4gICAgICAgIHBlZGlkbzFbXCJcdWQ4M2RcdWRjZTYgcGVkaWRvMTogUGVkaWRvPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAxMjM0PGJyLz5pZF9jbGllbnRlOiA0Mjxici8+aWRfdGllbmRhOiAxPGJyLz5lc3RhZG86ICdwcmVwYXJhbmRvJzxici8+dG90YWw6IDQ1MDAwLjAwPGJyLz5mZWNoYV9jcmVhY2lvbjogJzIwMjUtMTItMDQgMTA6MzAnPGJyLz5ub3RhczogJ0VudHJlZ2FyIGFudGVzIDVwbSdcIl1cbiAgICAgICAgXG4gICAgICAgIGRldGFsbGUxW1wiXHVkODNkXHVkY2NiIGRldGFsbGUxOiBEZXRhbGxlUGVkaWRvPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiA1MDAxPGJyLz5pZF9wZWRpZG86IDEyMzQ8YnIvPmlkX3Byb2R1Y3RvOiAxMDE8YnIvPmNhbnRpZGFkOiAyPGJyLz5wcmVjaW9fdW5pdGFyaW86IDEyMDAwLjAwPGJyLz5zdWJ0b3RhbDogMjQwMDAuMDBcIl1cbiAgICAgICAgXG4gICAgICAgIGRldGFsbGUyW1wiXHVkODNkXHVkY2NiIGRldGFsbGUyOiBEZXRhbGxlUGVkaWRvPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiA1MDAyPGJyLz5pZF9wZWRpZG86IDEyMzQ8YnIvPmlkX3Byb2R1Y3RvOiAyMDU8YnIvPmNhbnRpZGFkOiAzPGJyLz5wcmVjaW9fdW5pdGFyaW86IDcwMDAuMDA8YnIvPnN1YnRvdGFsOiAyMTAwMC4wMFwiXVxuICAgICAgICBcbiAgICAgICAgcHJvZHVjdG8xW1wiXHVkODNkXHVkY2U2IHByb2R1Y3RvMTogUHJvZHVjdG88YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDEwMTxici8+aWRfdGllbmRhOiAxPGJyLz5pZF9wcm92ZWVkb3I6IDE1PGJyLz5ub21icmU6ICdBcnJveiBEaWFuYSA1MDBnJzxici8+cHJlY2lvOiAxMjAwMC4wMDxici8+c3RvY2s6IDE0ODxici8+Y2F0ZWdvcmlhOiAnYWxpbWVudG9zJ1wiXVxuICAgICAgICBcbiAgICAgICAgcHJvZHVjdG8yW1wiXHVkODNkXHVkY2U2IHByb2R1Y3RvMjogUHJvZHVjdG88YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDIwNTxici8+aWRfdGllbmRhOiAxPGJyLz5pZF9wcm92ZWVkb3I6IDE1PGJyLz5ub21icmU6ICdBY2VpdGUgR2lyYXNvbCAxTCc8YnIvPnByZWNpbzogNzAwMC4wMDxici8+c3RvY2s6IDY3PGJyLz5jYXRlZ29yaWE6ICdhbGltZW50b3MnXCJdXG4gICAgICAgIFxuICAgICAgICBwcm92ZWVkb3IxW1wiXHVkODNkXHVkYzY4XHUyMDBkXHVkODNkXHVkY2JjIHByb3ZlZWRvcjE6IFVzdWFyaW88YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDE1PGJyLz5lbWFpbDogJ2p1YW5AcHJvdmVlZG9yYS5jb20nPGJyLz5ub21icmU6ICdKdWFuIFBcdTAwZTlyZXonPGJyLz5yb2w6ICdwcm92ZWVkb3InPGJyLz5lc3RhZG86IHRydWVcIl1cbiAgICAgICAgXG4gICAgICAgIHBhZ28xW1wiXHVkODNkXHVkY2IzIHBhZ28xOiBQYWdvPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiA3ODk8YnIvPmlkX3VzdWFyaW86IDQyPGJyLz5pZF9wZWRpZG86IDEyMzQ8YnIvPmlkX2VzdGFkb19wYWdvOiAyPGJyLz5pZF9tZXRvZG9fcGFnbzogMTxici8+bW9udG86IDQ1MDAwLjAwPGJyLz5mZWNoYV9jcmVhY2lvbjogJzIwMjUtMTItMDQgMTA6MjUnXCJdXG4gICAgICAgIFxuICAgICAgICBtZXRvZG8xW1wiXHVkODNkXHVkY2IwIG1ldG9kbzE6IE1ldG9kb1BhZ288YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDE8YnIvPm5vbWJyZTogJ1RhcmpldGEgQ3JcdTAwZTlkaXRvJzxici8+YWN0aXZvOiB0cnVlXCJdXG4gICAgICAgIFxuICAgICAgICBlc3RhZG8xW1wiXHUyNzA1IGVzdGFkbzE6IEVzdGFkb1BhZ288YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDI8YnIvPm5vbWJyZTogJ0Fwcm9iYWRvJ1wiXVxuICAgIGVuZFxuICAgIFxuICAgIHBlZGlkbzEgLS0+fGlkX2NsaWVudGUgPSA0MnwgdXN1YXJpbzFcbiAgICBwZWRpZG8xIC0tPnxpZF90aWVuZGEgPSAxfCB0aWVuZGExXG4gICAgcGVkaWRvMSAtLT58ZGV0YWxsZXN8IGRldGFsbGUxXG4gICAgcGVkaWRvMSAtLT58ZGV0YWxsZXN8IGRldGFsbGUyXG4gICAgcGVkaWRvMSAtLT58cGFnb3N8IHBhZ28xXG4gICAgXG4gICAgZGV0YWxsZTEgLS0+fGlkX3Byb2R1Y3RvID0gMTAxfCBwcm9kdWN0bzFcbiAgICBkZXRhbGxlMiAtLT58aWRfcHJvZHVjdG8gPSAyMDV8IHByb2R1Y3RvMlxuICAgIFxuICAgIHByb2R1Y3RvMSAtLT58aWRfdGllbmRhID0gMXwgdGllbmRhMVxuICAgIHByb2R1Y3RvMiAtLT58aWRfdGllbmRhID0gMXwgdGllbmRhMVxuICAgIHByb2R1Y3RvMSAtLT58aWRfcHJvdmVlZG9yID0gMTV8IHByb3ZlZWRvcjFcbiAgICBwcm9kdWN0bzIgLS0+fGlkX3Byb3ZlZWRvciA9IDE1fCBwcm92ZWVkb3IxXG4gICAgXG4gICAgcGFnbzEgLS0+fGlkX3VzdWFyaW8gPSA0MnwgdXN1YXJpbzFcbiAgICBwYWdvMSAtLT58aWRfcGVkaWRvID0gMTIzNHwgcGVkaWRvMVxuICAgIHBhZ28xIC0tPnxpZF9tZXRvZG9fcGFnbyA9IDF8IG1ldG9kbzFcbiAgICBwYWdvMSAtLT58aWRfZXN0YWRvX3BhZ28gPSAyfCBlc3RhZG8xIiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TB
                        subgraph "Instancias en Runtime - Pedido #1234"
                            usuario1["""""üë§ usuario1: Usuario<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 42<br/>email: 'maria@email.com'<br/>nombre: 'Mar√≠a Garc√≠a'<br/>rol: 'cliente'<br/>estado: true"""""]
                            
                            tienda1["""""üè™ tienda1: Tienda<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1<br/>id_administrador: 1<br/>nombre: 'Tienda Centro'<br/>direccion: 'Calle 10 #5-20'<br/>activa: true"""""]
                            
                            pedido1["""""üì¶ pedido1: Pedido<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1234<br/>id_cliente: 42<br/>id_tienda: 1<br/>estado: 'preparando'<br/>total: 45000.00<br/>fecha_creacion: '2025-12-04 10:30'<br/>notas: 'Entregar antes 5pm'"""""]
                            
                            detalle1["""""üìã detalle1: DetallePedido<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 5001<br/>id_pedido: 1234<br/>id_producto: 101<br/>cantidad: 2<br/>precio_unitario: 12000.00<br/>subtotal: 24000.00"""""]
                            
                            detalle2["""""üìã detalle2: DetallePedido<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 5002<br/>id_pedido: 1234<br/>id_producto: 205<br/>cantidad: 3<br/>precio_unitario: 7000.00<br/>subtotal: 21000.00"""""]
                            
                            producto1["""""üì¶ producto1: Producto<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 101<br/>id_tienda: 1<br/>id_proveedor: 15<br/>nombre: 'Arroz Diana 500g'<br/>precio: 12000.00<br/>stock: 148<br/>categoria: 'alimentos'"""""]
                            
                            producto2["""""üì¶ producto2: Producto<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 205<br/>id_tienda: 1<br/>id_proveedor: 15<br/>nombre: 'Aceite Girasol 1L'<br/>precio: 7000.00<br/>stock: 67<br/>categoria: 'alimentos'"""""]
                            
                            proveedor1["""""üë®‚Äçüíº proveedor1: Usuario<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 15<br/>email: 'juan@proveedora.com'<br/>nombre: 'Juan P√©rez'<br/>rol: 'proveedor'<br/>estado: true"""""]
                            
                            pago1["""""üí≥ pago1: Pago<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 789<br/>id_usuario: 42<br/>id_pedido: 1234<br/>id_estado_pago: 2<br/>id_metodo_pago: 1<br/>monto: 45000.00<br/>fecha_creacion: '2025-12-04 10:25'"""""]
                            
                            metodo1["""""üí∞ metodo1: MetodoPago<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1<br/>nombre: 'Tarjeta Cr√©dito'<br/>activo: true"""""]
                            
                            estado1["""""‚úÖ estado1: EstadoPago<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 2<br/>nombre: 'Aprobado'"""""]
                        end
                        
                        pedido1 -->|id_cliente = 42| usuario1
                        pedido1 -->|id_tienda = 1| tienda1
                        pedido1 -->|detalles| detalle1
                        pedido1 -->|detalles| detalle2
                        pedido1 -->|pagos| pago1
                        
                        detalle1 -->|id_producto = 101| producto1
                        detalle2 -->|id_producto = 205| producto2
                        
                        producto1 -->|id_tienda = 1| tienda1
                        producto2 -->|id_tienda = 1| tienda1
                        producto1 -->|id_proveedor = 15| proveedor1
                        producto2 -->|id_proveedor = 15| proveedor1
                        
                        pago1 -->|id_usuario = 42| usuario1
                        pago1 -->|id_pedido = 1234| pedido1
                        pago1 -->|id_metodo_pago = 1| metodo1
                        pago1 -->|id_estado_pago = 2| estado1

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TB
                        subgraph "Sistema de Stock - Producto con Alerta"
                            producto_leche["""""üì¶ producto_leche: Producto<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 301<br/>nombre: 'Leche Entera 1L'<br/>precio: 4500.00<br/>stock: 8 üî¥<br/>es_basico: true<br/>activo: true"""""]
                            
                            config_leche["""""‚öôÔ∏è config_leche: StockConfig<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 45<br/>stock_minimo: 10<br/>cantidad_recarga: 50<br/>recarga_automatica_activa: true<br/>ultima_recarga: '2025-12-03 08:00'<br/>total_recargas: 12"""""]
                            
                            historial1["""""üìù historial1: HistorialRecarga<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 890<br/>cantidad: 50<br/>stock_anterior: 3<br/>stock_nuevo: 53<br/>tipo: 'automatica'<br/>fecha_creacion: '2025-12-03 08:00'"""""]
                            
                            historial2["""""üìù historial2: HistorialRecarga<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 891<br/>cantidad: 10<br/>stock_anterior: 53<br/>stock_nuevo: 63<br/>tipo: 'manual'<br/>fecha_creacion: '2025-12-03 14:30'"""""]
                            
                            proveedor_lacteos["""""üë®‚Äçüíº proveedor_lacteos: Usuario<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 18<br/>email: 'ana@lacteos.com'<br/>nombre: 'Ana Rodr√≠guez'<br/>rol: 'proveedor'"""""]
                            
                            notif1["""""üìß notif1: Notificacion<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 2345<br/>mensaje: 'Stock bajo: Leche...'<br/>leida: true<br/>fecha_lectura: '2025-12-03 08:05'"""""]
                            
                            tipo_notif["""""üîî tipo_notif: TipoNotificacion<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 3<br/>nombre: 'Stock Bajo'"""""]
                        end
                        
                        producto_leche -->|config_stock| config_leche
                        producto_leche -->|historial_recargas| historial1
                        producto_leche -->|historial_recargas| historial2
                        producto_leche -->|proveedor| proveedor_lacteos
                        
                        historial1 -->|producto| producto_leche
                        historial2 -->|producto| producto_leche
                        historial2 -->|usuario| proveedor_lacteos
                        
                        notif1 -->|usuario| proveedor_lacteos
                        notif1 -->|tipo| tipo_notif

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJTaXN0ZW1hIGRlIFN0b2NrIC0gUHJvZHVjdG8gY29uIEFsZXJ0YVwiXG4gICAgICAgIHByb2R1Y3RvX2xlY2hlW1wiXHVkODNkXHVkY2U2IHByb2R1Y3RvX2xlY2hlOiBQcm9kdWN0bzxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMzAxPGJyLz5ub21icmU6ICdMZWNoZSBFbnRlcmEgMUwnPGJyLz5wcmVjaW86IDQ1MDAuMDA8YnIvPnN0b2NrOiA4IFx1ZDgzZFx1ZGQzNDxici8+ZXNfYmFzaWNvOiB0cnVlPGJyLz5hY3Rpdm86IHRydWVcIl1cbiAgICAgICAgXG4gICAgICAgIGNvbmZpZ19sZWNoZVtcIlx1MjY5OVx1ZmUwZiBjb25maWdfbGVjaGU6IFN0b2NrQ29uZmlnPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiA0NTxici8+c3RvY2tfbWluaW1vOiAxMDxici8+Y2FudGlkYWRfcmVjYXJnYTogNTA8YnIvPnJlY2FyZ2FfYXV0b21hdGljYV9hY3RpdmE6IHRydWU8YnIvPnVsdGltYV9yZWNhcmdhOiAnMjAyNS0xMi0wMyAwODowMCc8YnIvPnRvdGFsX3JlY2FyZ2FzOiAxMlwiXVxuICAgICAgICBcbiAgICAgICAgaGlzdG9yaWFsMVtcIlx1ZDgzZFx1ZGNkZCBoaXN0b3JpYWwxOiBIaXN0b3JpYWxSZWNhcmdhPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiA4OTA8YnIvPmNhbnRpZGFkOiA1MDxici8+c3RvY2tfYW50ZXJpb3I6IDM8YnIvPnN0b2NrX251ZXZvOiA1Mzxici8+dGlwbzogJ2F1dG9tYXRpY2EnPGJyLz5mZWNoYV9jcmVhY2lvbjogJzIwMjUtMTItMDMgMDg6MDAnXCJdXG4gICAgICAgIFxuICAgICAgICBoaXN0b3JpYWwyW1wiXHVkODNkXHVkY2RkIGhpc3RvcmlhbDI6IEhpc3RvcmlhbFJlY2FyZ2E8YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDg5MTxici8+Y2FudGlkYWQ6IDEwPGJyLz5zdG9ja19hbnRlcmlvcjogNTM8YnIvPnN0b2NrX251ZXZvOiA2Mzxici8+dGlwbzogJ21hbnVhbCc8YnIvPmZlY2hhX2NyZWFjaW9uOiAnMjAyNS0xMi0wMyAxNDozMCdcIl1cbiAgICAgICAgXG4gICAgICAgIHByb3ZlZWRvcl9sYWN0ZW9zW1wiXHVkODNkXHVkYzY4XHUyMDBkXHVkODNkXHVkY2JjIHByb3ZlZWRvcl9sYWN0ZW9zOiBVc3VhcmlvPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAxODxici8+ZW1haWw6ICdhbmFAbGFjdGVvcy5jb20nPGJyLz5ub21icmU6ICdBbmEgUm9kclx1MDBlZGd1ZXonPGJyLz5yb2w6ICdwcm92ZWVkb3InXCJdXG4gICAgICAgIFxuICAgICAgICBub3RpZjFbXCJcdWQ4M2RcdWRjZTcgbm90aWYxOiBOb3RpZmljYWNpb248YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDIzNDU8YnIvPm1lbnNhamU6ICdTdG9jayBiYWpvOiBMZWNoZS4uLic8YnIvPmxlaWRhOiB0cnVlPGJyLz5mZWNoYV9sZWN0dXJhOiAnMjAyNS0xMi0wMyAwODowNSdcIl1cbiAgICAgICAgXG4gICAgICAgIHRpcG9fbm90aWZbXCJcdWQ4M2RcdWRkMTQgdGlwb19ub3RpZjogVGlwb05vdGlmaWNhY2lvbjxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMzxici8+bm9tYnJlOiAnU3RvY2sgQmFqbydcIl1cbiAgICBlbmRcbiAgICBcbiAgICBwcm9kdWN0b19sZWNoZSAtLT58Y29uZmlnX3N0b2NrfCBjb25maWdfbGVjaGVcbiAgICBwcm9kdWN0b19sZWNoZSAtLT58aGlzdG9yaWFsX3JlY2FyZ2FzfCBoaXN0b3JpYWwxXG4gICAgcHJvZHVjdG9fbGVjaGUgLS0+fGhpc3RvcmlhbF9yZWNhcmdhc3wgaGlzdG9yaWFsMlxuICAgIHByb2R1Y3RvX2xlY2hlIC0tPnxwcm92ZWVkb3J8IHByb3ZlZWRvcl9sYWN0ZW9zXG4gICAgXG4gICAgaGlzdG9yaWFsMSAtLT58cHJvZHVjdG98IHByb2R1Y3RvX2xlY2hlXG4gICAgaGlzdG9yaWFsMiAtLT58cHJvZHVjdG98IHByb2R1Y3RvX2xlY2hlXG4gICAgaGlzdG9yaWFsMiAtLT58dXN1YXJpb3wgcHJvdmVlZG9yX2xhY3Rlb3NcbiAgICBcbiAgICBub3RpZjEgLS0+fHVzdWFyaW98IHByb3ZlZWRvcl9sYWN0ZW9zXG4gICAgbm90aWYxIC0tPnx0aXBvfCB0aXBvX25vdGlmIiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJTaXN0ZW1hIGRlIFN0b2NrIC0gUHJvZHVjdG8gY29uIEFsZXJ0YVwiXG4gICAgICAgIHByb2R1Y3RvX2xlY2hlW1wiXHVkODNkXHVkY2U2IHByb2R1Y3RvX2xlY2hlOiBQcm9kdWN0bzxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMzAxPGJyLz5ub21icmU6ICdMZWNoZSBFbnRlcmEgMUwnPGJyLz5wcmVjaW86IDQ1MDAuMDA8YnIvPnN0b2NrOiA4IFx1ZDgzZFx1ZGQzNDxici8+ZXNfYmFzaWNvOiB0cnVlPGJyLz5hY3Rpdm86IHRydWVcIl1cbiAgICAgICAgXG4gICAgICAgIGNvbmZpZ19sZWNoZVtcIlx1MjY5OVx1ZmUwZiBjb25maWdfbGVjaGU6IFN0b2NrQ29uZmlnPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiA0NTxici8+c3RvY2tfbWluaW1vOiAxMDxici8+Y2FudGlkYWRfcmVjYXJnYTogNTA8YnIvPnJlY2FyZ2FfYXV0b21hdGljYV9hY3RpdmE6IHRydWU8YnIvPnVsdGltYV9yZWNhcmdhOiAnMjAyNS0xMi0wMyAwODowMCc8YnIvPnRvdGFsX3JlY2FyZ2FzOiAxMlwiXVxuICAgICAgICBcbiAgICAgICAgaGlzdG9yaWFsMVtcIlx1ZDgzZFx1ZGNkZCBoaXN0b3JpYWwxOiBIaXN0b3JpYWxSZWNhcmdhPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiA4OTA8YnIvPmNhbnRpZGFkOiA1MDxici8+c3RvY2tfYW50ZXJpb3I6IDM8YnIvPnN0b2NrX251ZXZvOiA1Mzxici8+dGlwbzogJ2F1dG9tYXRpY2EnPGJyLz5mZWNoYV9jcmVhY2lvbjogJzIwMjUtMTItMDMgMDg6MDAnXCJdXG4gICAgICAgIFxuICAgICAgICBoaXN0b3JpYWwyW1wiXHVkODNkXHVkY2RkIGhpc3RvcmlhbDI6IEhpc3RvcmlhbFJlY2FyZ2E8YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDg5MTxici8+Y2FudGlkYWQ6IDEwPGJyLz5zdG9ja19hbnRlcmlvcjogNTM8YnIvPnN0b2NrX251ZXZvOiA2Mzxici8+dGlwbzogJ21hbnVhbCc8YnIvPmZlY2hhX2NyZWFjaW9uOiAnMjAyNS0xMi0wMyAxNDozMCdcIl1cbiAgICAgICAgXG4gICAgICAgIHByb3ZlZWRvcl9sYWN0ZW9zW1wiXHVkODNkXHVkYzY4XHUyMDBkXHVkODNkXHVkY2JjIHByb3ZlZWRvcl9sYWN0ZW9zOiBVc3VhcmlvPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAxODxici8+ZW1haWw6ICdhbmFAbGFjdGVvcy5jb20nPGJyLz5ub21icmU6ICdBbmEgUm9kclx1MDBlZGd1ZXonPGJyLz5yb2w6ICdwcm92ZWVkb3InXCJdXG4gICAgICAgIFxuICAgICAgICBub3RpZjFbXCJcdWQ4M2RcdWRjZTcgbm90aWYxOiBOb3RpZmljYWNpb248YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDIzNDU8YnIvPm1lbnNhamU6ICdTdG9jayBiYWpvOiBMZWNoZS4uLic8YnIvPmxlaWRhOiB0cnVlPGJyLz5mZWNoYV9sZWN0dXJhOiAnMjAyNS0xMi0wMyAwODowNSdcIl1cbiAgICAgICAgXG4gICAgICAgIHRpcG9fbm90aWZbXCJcdWQ4M2RcdWRkMTQgdGlwb19ub3RpZjogVGlwb05vdGlmaWNhY2lvbjxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMzxici8+bm9tYnJlOiAnU3RvY2sgQmFqbydcIl1cbiAgICBlbmRcbiAgICBcbiAgICBwcm9kdWN0b19sZWNoZSAtLT58Y29uZmlnX3N0b2NrfCBjb25maWdfbGVjaGVcbiAgICBwcm9kdWN0b19sZWNoZSAtLT58aGlzdG9yaWFsX3JlY2FyZ2FzfCBoaXN0b3JpYWwxXG4gICAgcHJvZHVjdG9fbGVjaGUgLS0+fGhpc3RvcmlhbF9yZWNhcmdhc3wgaGlzdG9yaWFsMlxuICAgIHByb2R1Y3RvX2xlY2hlIC0tPnxwcm92ZWVkb3J8IHByb3ZlZWRvcl9sYWN0ZW9zXG4gICAgXG4gICAgaGlzdG9yaWFsMSAtLT58cHJvZHVjdG98IHByb2R1Y3RvX2xlY2hlXG4gICAgaGlzdG9yaWFsMiAtLT58cHJvZHVjdG98IHByb2R1Y3RvX2xlY2hlXG4gICAgaGlzdG9yaWFsMiAtLT58dXN1YXJpb3wgcHJvdmVlZG9yX2xhY3Rlb3NcbiAgICBcbiAgICBub3RpZjEgLS0+fHVzdWFyaW98IHByb3ZlZWRvcl9sYWN0ZW9zXG4gICAgbm90aWYxIC0tPnx0aXBvfCB0aXBvX25vdGlmIiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TB
                        subgraph "Sistema de Stock - Producto con Alerta"
                            producto_leche["""""üì¶ producto_leche: Producto<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 301<br/>nombre: 'Leche Entera 1L'<br/>precio: 4500.00<br/>stock: 8 üî¥<br/>es_basico: true<br/>activo: true"""""]
                            
                            config_leche["""""‚öôÔ∏è config_leche: StockConfig<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 45<br/>stock_minimo: 10<br/>cantidad_recarga: 50<br/>recarga_automatica_activa: true<br/>ultima_recarga: '2025-12-03 08:00'<br/>total_recargas: 12"""""]
                            
                            historial1["""""üìù historial1: HistorialRecarga<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 890<br/>cantidad: 50<br/>stock_anterior: 3<br/>stock_nuevo: 53<br/>tipo: 'automatica'<br/>fecha_creacion: '2025-12-03 08:00'"""""]
                            
                            historial2["""""üìù historial2: HistorialRecarga<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 891<br/>cantidad: 10<br/>stock_anterior: 53<br/>stock_nuevo: 63<br/>tipo: 'manual'<br/>fecha_creacion: '2025-12-03 14:30'"""""]
                            
                            proveedor_lacteos["""""üë®‚Äçüíº proveedor_lacteos: Usuario<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 18<br/>email: 'ana@lacteos.com'<br/>nombre: 'Ana Rodr√≠guez'<br/>rol: 'proveedor'"""""]
                            
                            notif1["""""üìß notif1: Notificacion<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 2345<br/>mensaje: 'Stock bajo: Leche...'<br/>leida: true<br/>fecha_lectura: '2025-12-03 08:05'"""""]
                            
                            tipo_notif["""""üîî tipo_notif: TipoNotificacion<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 3<br/>nombre: 'Stock Bajo'"""""]
                        end
                        
                        producto_leche -->|config_stock| config_leche
                        producto_leche -->|historial_recargas| historial1
                        producto_leche -->|historial_recargas| historial2
                        producto_leche -->|proveedor| proveedor_lacteos
                        
                        historial1 -->|producto| producto_leche
                        historial2 -->|producto| producto_leche
                        historial2 -->|usuario| proveedor_lacteos
                        
                        notif1 -->|usuario| proveedor_lacteos
                        notif1 -->|tipo| tipo_notif

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TB
                        subgraph "Usuario Admin con Context"
                            admin1["""""üë®‚Äçüíº admin1: Usuario<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1<br/>email: 'admin@prexcol.com'<br/>nombre: 'Carlos Admin'<br/>rol: 'admin'<br/>is_staff: true<br/>is_superuser: true<br/>self_deactivated: false<br/>admin_suspended: false<br/>ultimo_ingreso: '2025-12-04 13:00'"""""]
                            
                            pass_hist1["""""üîê pass_hist1: PasswordHistory<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 101<br/>password_hash: 'pbkdf2_sha256$...'<br/>fecha_creacion: '2025-10-01'"""""]
                            
                            pass_hist2["""""üîê pass_hist2: PasswordHistory<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 102<br/>password_hash: 'pbkdf2_sha256$...'<br/>fecha_creacion: '2025-11-15'"""""]
                            
                            pass_hist3["""""üîê pass_hist3: PasswordHistory<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 103<br/>password_hash: 'pbkdf2_sha256$...'<br/>fecha_creacion: '2025-12-01'<br/>(actual)"""""]
                            
                            tienda_centro["""""üè™ tienda_centro: Tienda<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1<br/>nombre: 'Tienda Centro'<br/>activa: true"""""]
                            
                            tienda_norte["""""üè™ tienda_norte: Tienda<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 2<br/>nombre: 'Tienda Norte'<br/>activa: true"""""]
                            
                            tienda_sur["""""üè™ tienda_sur: Tienda<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 3<br/>nombre: 'Tienda Sur'<br/>activa: false"""""]
                        end
                        
                        admin1 -->|password_history| pass_hist1
                        admin1 -->|password_history| pass_hist2
                        admin1 -->|password_history| pass_hist3
                        admin1 -->|tiendas_administradas| tienda_centro
                        admin1 -->|tiendas_administradas| tienda_norte
                        admin1 -->|tiendas_administradas| tienda_sur
                        
                        tienda_centro -->|administrador| admin1
                        tienda_norte -->|administrador| admin1
                        tienda_sur -->|administrador| admin1

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJVc3VhcmlvIEFkbWluIGNvbiBDb250ZXh0XCJcbiAgICAgICAgYWRtaW4xW1wiXHVkODNkXHVkYzY4XHUyMDBkXHVkODNkXHVkY2JjIGFkbWluMTogVXN1YXJpbzxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMTxici8+ZW1haWw6ICdhZG1pbkBwcmV4Y29sLmNvbSc8YnIvPm5vbWJyZTogJ0NhcmxvcyBBZG1pbic8YnIvPnJvbDogJ2FkbWluJzxici8+aXNfc3RhZmY6IHRydWU8YnIvPmlzX3N1cGVydXNlcjogdHJ1ZTxici8+c2VsZl9kZWFjdGl2YXRlZDogZmFsc2U8YnIvPmFkbWluX3N1c3BlbmRlZDogZmFsc2U8YnIvPnVsdGltb19pbmdyZXNvOiAnMjAyNS0xMi0wNCAxMzowMCdcIl1cbiAgICAgICAgXG4gICAgICAgIHBhc3NfaGlzdDFbXCJcdWQ4M2RcdWRkMTAgcGFzc19oaXN0MTogUGFzc3dvcmRIaXN0b3J5PGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAxMDE8YnIvPnBhc3N3b3JkX2hhc2g6ICdwYmtkZjJfc2hhMjU2JC4uLic8YnIvPmZlY2hhX2NyZWFjaW9uOiAnMjAyNS0xMC0wMSdcIl1cbiAgICAgICAgXG4gICAgICAgIHBhc3NfaGlzdDJbXCJcdWQ4M2RcdWRkMTAgcGFzc19oaXN0MjogUGFzc3dvcmRIaXN0b3J5PGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAxMDI8YnIvPnBhc3N3b3JkX2hhc2g6ICdwYmtkZjJfc2hhMjU2JC4uLic8YnIvPmZlY2hhX2NyZWFjaW9uOiAnMjAyNS0xMS0xNSdcIl1cbiAgICAgICAgXG4gICAgICAgIHBhc3NfaGlzdDNbXCJcdWQ4M2RcdWRkMTAgcGFzc19oaXN0MzogUGFzc3dvcmRIaXN0b3J5PGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAxMDM8YnIvPnBhc3N3b3JkX2hhc2g6ICdwYmtkZjJfc2hhMjU2JC4uLic8YnIvPmZlY2hhX2NyZWFjaW9uOiAnMjAyNS0xMi0wMSc8YnIvPihhY3R1YWwpXCJdXG4gICAgICAgIFxuICAgICAgICB0aWVuZGFfY2VudHJvW1wiXHVkODNjXHVkZmVhIHRpZW5kYV9jZW50cm86IFRpZW5kYTxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMTxici8+bm9tYnJlOiAnVGllbmRhIENlbnRybyc8YnIvPmFjdGl2YTogdHJ1ZVwiXVxuICAgICAgICBcbiAgICAgICAgdGllbmRhX25vcnRlW1wiXHVkODNjXHVkZmVhIHRpZW5kYV9ub3J0ZTogVGllbmRhPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAyPGJyLz5ub21icmU6ICdUaWVuZGEgTm9ydGUnPGJyLz5hY3RpdmE6IHRydWVcIl1cbiAgICAgICAgXG4gICAgICAgIHRpZW5kYV9zdXJbXCJcdWQ4M2NcdWRmZWEgdGllbmRhX3N1cjogVGllbmRhPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAzPGJyLz5ub21icmU6ICdUaWVuZGEgU3VyJzxici8+YWN0aXZhOiBmYWxzZVwiXVxuICAgIGVuZFxuICAgIFxuICAgIGFkbWluMSAtLT58cGFzc3dvcmRfaGlzdG9yeXwgcGFzc19oaXN0MVxuICAgIGFkbWluMSAtLT58cGFzc3dvcmRfaGlzdG9yeXwgcGFzc19oaXN0MlxuICAgIGFkbWluMSAtLT58cGFzc3dvcmRfaGlzdG9yeXwgcGFzc19oaXN0M1xuICAgIGFkbWluMSAtLT58dGllbmRhc19hZG1pbmlzdHJhZGFzfCB0aWVuZGFfY2VudHJvXG4gICAgYWRtaW4xIC0tPnx0aWVuZGFzX2FkbWluaXN0cmFkYXN8IHRpZW5kYV9ub3J0ZVxuICAgIGFkbWluMSAtLT58dGllbmRhc19hZG1pbmlzdHJhZGFzfCB0aWVuZGFfc3VyXG4gICAgXG4gICAgdGllbmRhX2NlbnRybyAtLT58YWRtaW5pc3RyYWRvcnwgYWRtaW4xXG4gICAgdGllbmRhX25vcnRlIC0tPnxhZG1pbmlzdHJhZG9yfCBhZG1pbjFcbiAgICB0aWVuZGFfc3VyIC0tPnxhZG1pbmlzdHJhZG9yfCBhZG1pbjEiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJVc3VhcmlvIEFkbWluIGNvbiBDb250ZXh0XCJcbiAgICAgICAgYWRtaW4xW1wiXHVkODNkXHVkYzY4XHUyMDBkXHVkODNkXHVkY2JjIGFkbWluMTogVXN1YXJpbzxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMTxici8+ZW1haWw6ICdhZG1pbkBwcmV4Y29sLmNvbSc8YnIvPm5vbWJyZTogJ0NhcmxvcyBBZG1pbic8YnIvPnJvbDogJ2FkbWluJzxici8+aXNfc3RhZmY6IHRydWU8YnIvPmlzX3N1cGVydXNlcjogdHJ1ZTxici8+c2VsZl9kZWFjdGl2YXRlZDogZmFsc2U8YnIvPmFkbWluX3N1c3BlbmRlZDogZmFsc2U8YnIvPnVsdGltb19pbmdyZXNvOiAnMjAyNS0xMi0wNCAxMzowMCdcIl1cbiAgICAgICAgXG4gICAgICAgIHBhc3NfaGlzdDFbXCJcdWQ4M2RcdWRkMTAgcGFzc19oaXN0MTogUGFzc3dvcmRIaXN0b3J5PGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAxMDE8YnIvPnBhc3N3b3JkX2hhc2g6ICdwYmtkZjJfc2hhMjU2JC4uLic8YnIvPmZlY2hhX2NyZWFjaW9uOiAnMjAyNS0xMC0wMSdcIl1cbiAgICAgICAgXG4gICAgICAgIHBhc3NfaGlzdDJbXCJcdWQ4M2RcdWRkMTAgcGFzc19oaXN0MjogUGFzc3dvcmRIaXN0b3J5PGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAxMDI8YnIvPnBhc3N3b3JkX2hhc2g6ICdwYmtkZjJfc2hhMjU2JC4uLic8YnIvPmZlY2hhX2NyZWFjaW9uOiAnMjAyNS0xMS0xNSdcIl1cbiAgICAgICAgXG4gICAgICAgIHBhc3NfaGlzdDNbXCJcdWQ4M2RcdWRkMTAgcGFzc19oaXN0MzogUGFzc3dvcmRIaXN0b3J5PGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAxMDM8YnIvPnBhc3N3b3JkX2hhc2g6ICdwYmtkZjJfc2hhMjU2JC4uLic8YnIvPmZlY2hhX2NyZWFjaW9uOiAnMjAyNS0xMi0wMSc8YnIvPihhY3R1YWwpXCJdXG4gICAgICAgIFxuICAgICAgICB0aWVuZGFfY2VudHJvW1wiXHVkODNjXHVkZmVhIHRpZW5kYV9jZW50cm86IFRpZW5kYTxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMTxici8+bm9tYnJlOiAnVGllbmRhIENlbnRybyc8YnIvPmFjdGl2YTogdHJ1ZVwiXVxuICAgICAgICBcbiAgICAgICAgdGllbmRhX25vcnRlW1wiXHVkODNjXHVkZmVhIHRpZW5kYV9ub3J0ZTogVGllbmRhPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAyPGJyLz5ub21icmU6ICdUaWVuZGEgTm9ydGUnPGJyLz5hY3RpdmE6IHRydWVcIl1cbiAgICAgICAgXG4gICAgICAgIHRpZW5kYV9zdXJbXCJcdWQ4M2NcdWRmZWEgdGllbmRhX3N1cjogVGllbmRhPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAzPGJyLz5ub21icmU6ICdUaWVuZGEgU3VyJzxici8+YWN0aXZhOiBmYWxzZVwiXVxuICAgIGVuZFxuICAgIFxuICAgIGFkbWluMSAtLT58cGFzc3dvcmRfaGlzdG9yeXwgcGFzc19oaXN0MVxuICAgIGFkbWluMSAtLT58cGFzc3dvcmRfaGlzdG9yeXwgcGFzc19oaXN0MlxuICAgIGFkbWluMSAtLT58cGFzc3dvcmRfaGlzdG9yeXwgcGFzc19oaXN0M1xuICAgIGFkbWluMSAtLT58dGllbmRhc19hZG1pbmlzdHJhZGFzfCB0aWVuZGFfY2VudHJvXG4gICAgYWRtaW4xIC0tPnx0aWVuZGFzX2FkbWluaXN0cmFkYXN8IHRpZW5kYV9ub3J0ZVxuICAgIGFkbWluMSAtLT58dGllbmRhc19hZG1pbmlzdHJhZGFzfCB0aWVuZGFfc3VyXG4gICAgXG4gICAgdGllbmRhX2NlbnRybyAtLT58YWRtaW5pc3RyYWRvcnwgYWRtaW4xXG4gICAgdGllbmRhX25vcnRlIC0tPnxhZG1pbmlzdHJhZG9yfCBhZG1pbjFcbiAgICB0aWVuZGFfc3VyIC0tPnxhZG1pbmlzdHJhZG9yfCBhZG1pbjEiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TB
                        subgraph "Usuario Admin con Context"
                            admin1["""""üë®‚Äçüíº admin1: Usuario<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1<br/>email: 'admin@prexcol.com'<br/>nombre: 'Carlos Admin'<br/>rol: 'admin'<br/>is_staff: true<br/>is_superuser: true<br/>self_deactivated: false<br/>admin_suspended: false<br/>ultimo_ingreso: '2025-12-04 13:00'"""""]
                            
                            pass_hist1["""""üîê pass_hist1: PasswordHistory<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 101<br/>password_hash: 'pbkdf2_sha256$...'<br/>fecha_creacion: '2025-10-01'"""""]
                            
                            pass_hist2["""""üîê pass_hist2: PasswordHistory<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 102<br/>password_hash: 'pbkdf2_sha256$...'<br/>fecha_creacion: '2025-11-15'"""""]
                            
                            pass_hist3["""""üîê pass_hist3: PasswordHistory<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 103<br/>password_hash: 'pbkdf2_sha256$...'<br/>fecha_creacion: '2025-12-01'<br/>(actual)"""""]
                            
                            tienda_centro["""""üè™ tienda_centro: Tienda<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1<br/>nombre: 'Tienda Centro'<br/>activa: true"""""]
                            
                            tienda_norte["""""üè™ tienda_norte: Tienda<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 2<br/>nombre: 'Tienda Norte'<br/>activa: true"""""]
                            
                            tienda_sur["""""üè™ tienda_sur: Tienda<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 3<br/>nombre: 'Tienda Sur'<br/>activa: false"""""]
                        end
                        
                        admin1 -->|password_history| pass_hist1
                        admin1 -->|password_history| pass_hist2
                        admin1 -->|password_history| pass_hist3
                        admin1 -->|tiendas_administradas| tienda_centro
                        admin1 -->|tiendas_administradas| tienda_norte
                        admin1 -->|tiendas_administradas| tienda_sur
                        
                        tienda_centro -->|administrador| admin1
                        tienda_norte -->|administrador| admin1
                        tienda_sur -->|administrador| admin1

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TB
                        subgraph "Pago Exitoso con Transacci√≥n"
                            cliente2["""""üë§ cliente2: Usuario<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 55<br/>email: 'pedro@email.com'<br/>nombre: 'Pedro L√≥pez'<br/>rol: 'cliente'"""""]
                            
                            pedido2["""""üì¶ pedido2: Pedido<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1235<br/>estado: 'pendiente'<br/>total: 87500.00"""""]
                            
                            pago2["""""üí≥ pago2: Pago<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 790<br/>monto: 87500.00<br/>fecha_creacion: '2025-12-04 11:15'<br/>fecha_actualizacion: '2025-12-04 11:16'"""""]
                            
                            transaccion1["""""üîÑ transaccion1: Transaccion<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 4567<br/>referencia_externa: 'TRX-PAY-789456'<br/>monto: 87500.00<br/>estado: 'approved'<br/>respuesta_gateway: {'...'}"""""]
                            
                            metodo_tarjeta["""""üí∞ metodo_tarjeta: MetodoPago<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1<br/>nombre: 'Tarjeta Cr√©dito'<br/>activo: true"""""]
                            
                            estado_aprobado["""""‚úÖ estado_aprobado: EstadoPago<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 2<br/>nombre: 'Aprobado'<br/>descripcion: 'Pago autorizado'"""""]
                            
                            venta1["""""üí∞ venta1: Venta<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 456<br/>total: 87500.00<br/>cantidad_items: 4<br/>fecha_venta: '2025-12-04 16:30'"""""]
                        end
                        
                        pago2 -->|usuario| cliente2
                        pago2 -->|pedido| pedido2
                        pago2 -->|metodo_pago| metodo_tarjeta
                        pago2 -->|estado| estado_aprobado
                        pago2 -->|transacciones| transaccion1
                        
                        pedido2 -->|cliente| cliente2
                        pedido2 -->|venta_registrada| venta1
                        
                        venta1 -->|pedido| pedido2
                        venta1 -->|cliente| cliente2
                        
                        transaccion1 -->|pago| pago2

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJQYWdvIEV4aXRvc28gY29uIFRyYW5zYWNjaVx1MDBmM25cIlxuICAgICAgICBjbGllbnRlMltcIlx1ZDgzZFx1ZGM2NCBjbGllbnRlMjogVXN1YXJpbzxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogNTU8YnIvPmVtYWlsOiAncGVkcm9AZW1haWwuY29tJzxici8+bm9tYnJlOiAnUGVkcm8gTFx1MDBmM3Bleic8YnIvPnJvbDogJ2NsaWVudGUnXCJdXG4gICAgICAgIFxuICAgICAgICBwZWRpZG8yW1wiXHVkODNkXHVkY2U2IHBlZGlkbzI6IFBlZGlkbzxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMTIzNTxici8+ZXN0YWRvOiAncGVuZGllbnRlJzxici8+dG90YWw6IDg3NTAwLjAwXCJdXG4gICAgICAgIFxuICAgICAgICBwYWdvMltcIlx1ZDgzZFx1ZGNiMyBwYWdvMjogUGFnbzxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogNzkwPGJyLz5tb250bzogODc1MDAuMDA8YnIvPmZlY2hhX2NyZWFjaW9uOiAnMjAyNS0xMi0wNCAxMToxNSc8YnIvPmZlY2hhX2FjdHVhbGl6YWNpb246ICcyMDI1LTEyLTA0IDExOjE2J1wiXVxuICAgICAgICBcbiAgICAgICAgdHJhbnNhY2Npb24xW1wiXHVkODNkXHVkZDA0IHRyYW5zYWNjaW9uMTogVHJhbnNhY2Npb248YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDQ1Njc8YnIvPnJlZmVyZW5jaWFfZXh0ZXJuYTogJ1RSWC1QQVktNzg5NDU2Jzxici8+bW9udG86IDg3NTAwLjAwPGJyLz5lc3RhZG86ICdhcHByb3ZlZCc8YnIvPnJlc3B1ZXN0YV9nYXRld2F5OiB7Jy4uLid9XCJdXG4gICAgICAgIFxuICAgICAgICBtZXRvZG9fdGFyamV0YVtcIlx1ZDgzZFx1ZGNiMCBtZXRvZG9fdGFyamV0YTogTWV0b2RvUGFnbzxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMTxici8+bm9tYnJlOiAnVGFyamV0YSBDclx1MDBlOWRpdG8nPGJyLz5hY3Rpdm86IHRydWVcIl1cbiAgICAgICAgXG4gICAgICAgIGVzdGFkb19hcHJvYmFkb1tcIlx1MjcwNSBlc3RhZG9fYXByb2JhZG86IEVzdGFkb1BhZ288YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDI8YnIvPm5vbWJyZTogJ0Fwcm9iYWRvJzxici8+ZGVzY3JpcGNpb246ICdQYWdvIGF1dG9yaXphZG8nXCJdXG4gICAgICAgIFxuICAgICAgICB2ZW50YTFbXCJcdWQ4M2RcdWRjYjAgdmVudGExOiBWZW50YTxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogNDU2PGJyLz50b3RhbDogODc1MDAuMDA8YnIvPmNhbnRpZGFkX2l0ZW1zOiA0PGJyLz5mZWNoYV92ZW50YTogJzIwMjUtMTItMDQgMTY6MzAnXCJdXG4gICAgZW5kXG4gICAgXG4gICAgcGFnbzIgLS0+fHVzdWFyaW98IGNsaWVudGUyXG4gICAgcGFnbzIgLS0+fHBlZGlkb3wgcGVkaWRvMlxuICAgIHBhZ28yIC0tPnxtZXRvZG9fcGFnb3wgbWV0b2RvX3RhcmpldGFcbiAgICBwYWdvMiAtLT58ZXN0YWRvfCBlc3RhZG9fYXByb2JhZG9cbiAgICBwYWdvMiAtLT58dHJhbnNhY2Npb25lc3wgdHJhbnNhY2Npb24xXG4gICAgXG4gICAgcGVkaWRvMiAtLT58Y2xpZW50ZXwgY2xpZW50ZTJcbiAgICBwZWRpZG8yIC0tPnx2ZW50YV9yZWdpc3RyYWRhfCB2ZW50YTFcbiAgICBcbiAgICB2ZW50YTEgLS0+fHBlZGlkb3wgcGVkaWRvMlxuICAgIHZlbnRhMSAtLT58Y2xpZW50ZXwgY2xpZW50ZTJcbiAgICBcbiAgICB0cmFuc2FjY2lvbjEgLS0+fHBhZ298IHBhZ28yIiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJQYWdvIEV4aXRvc28gY29uIFRyYW5zYWNjaVx1MDBmM25cIlxuICAgICAgICBjbGllbnRlMltcIlx1ZDgzZFx1ZGM2NCBjbGllbnRlMjogVXN1YXJpbzxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogNTU8YnIvPmVtYWlsOiAncGVkcm9AZW1haWwuY29tJzxici8+bm9tYnJlOiAnUGVkcm8gTFx1MDBmM3Bleic8YnIvPnJvbDogJ2NsaWVudGUnXCJdXG4gICAgICAgIFxuICAgICAgICBwZWRpZG8yW1wiXHVkODNkXHVkY2U2IHBlZGlkbzI6IFBlZGlkbzxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMTIzNTxici8+ZXN0YWRvOiAncGVuZGllbnRlJzxici8+dG90YWw6IDg3NTAwLjAwXCJdXG4gICAgICAgIFxuICAgICAgICBwYWdvMltcIlx1ZDgzZFx1ZGNiMyBwYWdvMjogUGFnbzxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogNzkwPGJyLz5tb250bzogODc1MDAuMDA8YnIvPmZlY2hhX2NyZWFjaW9uOiAnMjAyNS0xMi0wNCAxMToxNSc8YnIvPmZlY2hhX2FjdHVhbGl6YWNpb246ICcyMDI1LTEyLTA0IDExOjE2J1wiXVxuICAgICAgICBcbiAgICAgICAgdHJhbnNhY2Npb24xW1wiXHVkODNkXHVkZDA0IHRyYW5zYWNjaW9uMTogVHJhbnNhY2Npb248YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDQ1Njc8YnIvPnJlZmVyZW5jaWFfZXh0ZXJuYTogJ1RSWC1QQVktNzg5NDU2Jzxici8+bW9udG86IDg3NTAwLjAwPGJyLz5lc3RhZG86ICdhcHByb3ZlZCc8YnIvPnJlc3B1ZXN0YV9nYXRld2F5OiB7Jy4uLid9XCJdXG4gICAgICAgIFxuICAgICAgICBtZXRvZG9fdGFyamV0YVtcIlx1ZDgzZFx1ZGNiMCBtZXRvZG9fdGFyamV0YTogTWV0b2RvUGFnbzxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMTxici8+bm9tYnJlOiAnVGFyamV0YSBDclx1MDBlOWRpdG8nPGJyLz5hY3Rpdm86IHRydWVcIl1cbiAgICAgICAgXG4gICAgICAgIGVzdGFkb19hcHJvYmFkb1tcIlx1MjcwNSBlc3RhZG9fYXByb2JhZG86IEVzdGFkb1BhZ288YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDI8YnIvPm5vbWJyZTogJ0Fwcm9iYWRvJzxici8+ZGVzY3JpcGNpb246ICdQYWdvIGF1dG9yaXphZG8nXCJdXG4gICAgICAgIFxuICAgICAgICB2ZW50YTFbXCJcdWQ4M2RcdWRjYjAgdmVudGExOiBWZW50YTxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogNDU2PGJyLz50b3RhbDogODc1MDAuMDA8YnIvPmNhbnRpZGFkX2l0ZW1zOiA0PGJyLz5mZWNoYV92ZW50YTogJzIwMjUtMTItMDQgMTY6MzAnXCJdXG4gICAgZW5kXG4gICAgXG4gICAgcGFnbzIgLS0+fHVzdWFyaW98IGNsaWVudGUyXG4gICAgcGFnbzIgLS0+fHBlZGlkb3wgcGVkaWRvMlxuICAgIHBhZ28yIC0tPnxtZXRvZG9fcGFnb3wgbWV0b2RvX3RhcmpldGFcbiAgICBwYWdvMiAtLT58ZXN0YWRvfCBlc3RhZG9fYXByb2JhZG9cbiAgICBwYWdvMiAtLT58dHJhbnNhY2Npb25lc3wgdHJhbnNhY2Npb24xXG4gICAgXG4gICAgcGVkaWRvMiAtLT58Y2xpZW50ZXwgY2xpZW50ZTJcbiAgICBwZWRpZG8yIC0tPnx2ZW50YV9yZWdpc3RyYWRhfCB2ZW50YTFcbiAgICBcbiAgICB2ZW50YTEgLS0+fHBlZGlkb3wgcGVkaWRvMlxuICAgIHZlbnRhMSAtLT58Y2xpZW50ZXwgY2xpZW50ZTJcbiAgICBcbiAgICB0cmFuc2FjY2lvbjEgLS0+fHBhZ298IHBhZ28yIiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TB
                        subgraph "Pago Exitoso con Transacci√≥n"
                            cliente2["""""üë§ cliente2: Usuario<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 55<br/>email: 'pedro@email.com'<br/>nombre: 'Pedro L√≥pez'<br/>rol: 'cliente'"""""]
                            
                            pedido2["""""üì¶ pedido2: Pedido<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1235<br/>estado: 'pendiente'<br/>total: 87500.00"""""]
                            
                            pago2["""""üí≥ pago2: Pago<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 790<br/>monto: 87500.00<br/>fecha_creacion: '2025-12-04 11:15'<br/>fecha_actualizacion: '2025-12-04 11:16'"""""]
                            
                            transaccion1["""""üîÑ transaccion1: Transaccion<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 4567<br/>referencia_externa: 'TRX-PAY-789456'<br/>monto: 87500.00<br/>estado: 'approved'<br/>respuesta_gateway: {'...'}"""""]
                            
                            metodo_tarjeta["""""üí∞ metodo_tarjeta: MetodoPago<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1<br/>nombre: 'Tarjeta Cr√©dito'<br/>activo: true"""""]
                            
                            estado_aprobado["""""‚úÖ estado_aprobado: EstadoPago<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 2<br/>nombre: 'Aprobado'<br/>descripcion: 'Pago autorizado'"""""]
                            
                            venta1["""""üí∞ venta1: Venta<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 456<br/>total: 87500.00<br/>cantidad_items: 4<br/>fecha_venta: '2025-12-04 16:30'"""""]
                        end
                        
                        pago2 -->|usuario| cliente2
                        pago2 -->|pedido| pedido2
                        pago2 -->|metodo_pago| metodo_tarjeta
                        pago2 -->|estado| estado_aprobado
                        pago2 -->|transacciones| transaccion1
                        
                        pedido2 -->|cliente| cliente2
                        pedido2 -->|venta_registrada| venta1
                        
                        venta1 -->|pedido| pedido2
                        venta1 -->|cliente| cliente2
                        
                        transaccion1 -->|pago| pago2

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    flowchart TB
                        subgraph "Notificaciones por Pedido Creado"
                            pedido_evento["""""üì¶ pedido_nuevo: Pedido<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1236<br/>estado: 'pendiente'<br/>fecha_creacion: '2025-12-04 14:00'"""""]
                            
                            notif_cliente["""""üìß notif_cliente: Notificacion<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 3001<br/>mensaje: 'Tu pedido #1236 ha sido...'<br/>destino: 'cliente@email.com'<br/>leida: true<br/>fecha_lectura: '2025-12-04 14:05'"""""]
                            
                            notif_logistica["""""üìß notif_logistica: Notificacion<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 3002<br/>mensaje: 'Nuevo pedido #1236 para...'<br/>destino: 'logistica@prexcol.com'<br/>leida: false<br/>fecha_lectura: null"""""]
                            
                            notif_proveedor["""""üìß notif_proveedor: Notificacion<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 3003<br/>mensaje: 'Pedido #1236 incluye tus...'<br/>destino: 'proveedor@proveedora.com'<br/>leida: true<br/>fecha_lectura: '2025-12-04 14:30'"""""]
                            
                            tipo_pedido["""""üîî tipo_pedido: TipoNotificacion<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1<br/>nombre: 'Nuevo Pedido'"""""]
                            
                            estado_enviada["""""‚úÖ estado_enviada: EstadoNotificacion<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 2<br/>nombre: 'Enviada'"""""]
                            
                            cliente_dest["""""üë§ cliente_dest: Usuario<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 60<br/>rol: 'cliente'"""""]
                            
                            logistica_dest["""""üë§ logistica_dest: Usuario<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 8<br/>rol: 'logistica'"""""]
                            
                            proveedor_dest["""""üë§ proveedor_dest: Usuario<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 15<br/>rol: 'proveedor'"""""]
                        end
                        
                        notif_cliente -->|usuario| cliente_dest
                        notif_cliente -->|tipo| tipo_pedido
                        notif_cliente -->|estado| estado_enviada
                        
                        notif_logistica -->|usuario| logistica_dest
                        notif_logistica -->|tipo| tipo_pedido
                        notif_logistica -->|estado| estado_enviada
                        
                        notif_proveedor -->|usuario| proveedor_dest
                        notif_proveedor -->|tipo| tipo_pedido
                        notif_proveedor -->|estado| estado_enviada

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJOb3RpZmljYWNpb25lcyBwb3IgUGVkaWRvIENyZWFkb1wiXG4gICAgICAgIHBlZGlkb19ldmVudG9bXCJcdWQ4M2RcdWRjZTYgcGVkaWRvX251ZXZvOiBQZWRpZG88YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDEyMzY8YnIvPmVzdGFkbzogJ3BlbmRpZW50ZSc8YnIvPmZlY2hhX2NyZWFjaW9uOiAnMjAyNS0xMi0wNCAxNDowMCdcIl1cbiAgICAgICAgXG4gICAgICAgIG5vdGlmX2NsaWVudGVbXCJcdWQ4M2RcdWRjZTcgbm90aWZfY2xpZW50ZTogTm90aWZpY2FjaW9uPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAzMDAxPGJyLz5tZW5zYWplOiAnVHUgcGVkaWRvICMxMjM2IGhhIHNpZG8uLi4nPGJyLz5kZXN0aW5vOiAnY2xpZW50ZUBlbWFpbC5jb20nPGJyLz5sZWlkYTogdHJ1ZTxici8+ZmVjaGFfbGVjdHVyYTogJzIwMjUtMTItMDQgMTQ6MDUnXCJdXG4gICAgICAgIFxuICAgICAgICBub3RpZl9sb2dpc3RpY2FbXCJcdWQ4M2RcdWRjZTcgbm90aWZfbG9naXN0aWNhOiBOb3RpZmljYWNpb248YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDMwMDI8YnIvPm1lbnNhamU6ICdOdWV2byBwZWRpZG8gIzEyMzYgcGFyYS4uLic8YnIvPmRlc3Rpbm86ICdsb2dpc3RpY2FAcHJleGNvbC5jb20nPGJyLz5sZWlkYTogZmFsc2U8YnIvPmZlY2hhX2xlY3R1cmE6IG51bGxcIl1cbiAgICAgICAgXG4gICAgICAgIG5vdGlmX3Byb3ZlZWRvcltcIlx1ZDgzZFx1ZGNlNyBub3RpZl9wcm92ZWVkb3I6IE5vdGlmaWNhY2lvbjxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMzAwMzxici8+bWVuc2FqZTogJ1BlZGlkbyAjMTIzNiBpbmNsdXllIHR1cy4uLic8YnIvPmRlc3Rpbm86ICdwcm92ZWVkb3JAcHJvdmVlZG9yYS5jb20nPGJyLz5sZWlkYTogdHJ1ZTxici8+ZmVjaGFfbGVjdHVyYTogJzIwMjUtMTItMDQgMTQ6MzAnXCJdXG4gICAgICAgIFxuICAgICAgICB0aXBvX3BlZGlkb1tcIlx1ZDgzZFx1ZGQxNCB0aXBvX3BlZGlkbzogVGlwb05vdGlmaWNhY2lvbjxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMTxici8+bm9tYnJlOiAnTnVldm8gUGVkaWRvJ1wiXVxuICAgICAgICBcbiAgICAgICAgZXN0YWRvX2VudmlhZGFbXCJcdTI3MDUgZXN0YWRvX2VudmlhZGE6IEVzdGFkb05vdGlmaWNhY2lvbjxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMjxici8+bm9tYnJlOiAnRW52aWFkYSdcIl1cbiAgICAgICAgXG4gICAgICAgIGNsaWVudGVfZGVzdFtcIlx1ZDgzZFx1ZGM2NCBjbGllbnRlX2Rlc3Q6IFVzdWFyaW88YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDYwPGJyLz5yb2w6ICdjbGllbnRlJ1wiXVxuICAgICAgICBcbiAgICAgICAgbG9naXN0aWNhX2Rlc3RbXCJcdWQ4M2RcdWRjNjQgbG9naXN0aWNhX2Rlc3Q6IFVzdWFyaW88YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDg8YnIvPnJvbDogJ2xvZ2lzdGljYSdcIl1cbiAgICAgICAgXG4gICAgICAgIHByb3ZlZWRvcl9kZXN0W1wiXHVkODNkXHVkYzY0IHByb3ZlZWRvcl9kZXN0OiBVc3VhcmlvPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAxNTxici8+cm9sOiAncHJvdmVlZG9yJ1wiXVxuICAgIGVuZFxuICAgIFxuICAgIG5vdGlmX2NsaWVudGUgLS0+fHVzdWFyaW98IGNsaWVudGVfZGVzdFxuICAgIG5vdGlmX2NsaWVudGUgLS0+fHRpcG98IHRpcG9fcGVkaWRvXG4gICAgbm90aWZfY2xpZW50ZSAtLT58ZXN0YWRvfCBlc3RhZG9fZW52aWFkYVxuICAgIFxuICAgIG5vdGlmX2xvZ2lzdGljYSAtLT58dXN1YXJpb3wgbG9naXN0aWNhX2Rlc3RcbiAgICBub3RpZl9sb2dpc3RpY2EgLS0+fHRpcG98IHRpcG9fcGVkaWRvXG4gICAgbm90aWZfbG9naXN0aWNhIC0tPnxlc3RhZG98IGVzdGFkb19lbnZpYWRhXG4gICAgXG4gICAgbm90aWZfcHJvdmVlZG9yIC0tPnx1c3VhcmlvfCBwcm92ZWVkb3JfZGVzdFxuICAgIG5vdGlmX3Byb3ZlZWRvciAtLT58dGlwb3wgdGlwb19wZWRpZG9cbiAgICBub3RpZl9wcm92ZWVkb3IgLS0+fGVzdGFkb3wgZXN0YWRvX2VudmlhZGEiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogImdyYXBoIFRCXG4gICAgc3ViZ3JhcGggXCJOb3RpZmljYWNpb25lcyBwb3IgUGVkaWRvIENyZWFkb1wiXG4gICAgICAgIHBlZGlkb19ldmVudG9bXCJcdWQ4M2RcdWRjZTYgcGVkaWRvX251ZXZvOiBQZWRpZG88YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDEyMzY8YnIvPmVzdGFkbzogJ3BlbmRpZW50ZSc8YnIvPmZlY2hhX2NyZWFjaW9uOiAnMjAyNS0xMi0wNCAxNDowMCdcIl1cbiAgICAgICAgXG4gICAgICAgIG5vdGlmX2NsaWVudGVbXCJcdWQ4M2RcdWRjZTcgbm90aWZfY2xpZW50ZTogTm90aWZpY2FjaW9uPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAzMDAxPGJyLz5tZW5zYWplOiAnVHUgcGVkaWRvICMxMjM2IGhhIHNpZG8uLi4nPGJyLz5kZXN0aW5vOiAnY2xpZW50ZUBlbWFpbC5jb20nPGJyLz5sZWlkYTogdHJ1ZTxici8+ZmVjaGFfbGVjdHVyYTogJzIwMjUtMTItMDQgMTQ6MDUnXCJdXG4gICAgICAgIFxuICAgICAgICBub3RpZl9sb2dpc3RpY2FbXCJcdWQ4M2RcdWRjZTcgbm90aWZfbG9naXN0aWNhOiBOb3RpZmljYWNpb248YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDMwMDI8YnIvPm1lbnNhamU6ICdOdWV2byBwZWRpZG8gIzEyMzYgcGFyYS4uLic8YnIvPmRlc3Rpbm86ICdsb2dpc3RpY2FAcHJleGNvbC5jb20nPGJyLz5sZWlkYTogZmFsc2U8YnIvPmZlY2hhX2xlY3R1cmE6IG51bGxcIl1cbiAgICAgICAgXG4gICAgICAgIG5vdGlmX3Byb3ZlZWRvcltcIlx1ZDgzZFx1ZGNlNyBub3RpZl9wcm92ZWVkb3I6IE5vdGlmaWNhY2lvbjxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMzAwMzxici8+bWVuc2FqZTogJ1BlZGlkbyAjMTIzNiBpbmNsdXllIHR1cy4uLic8YnIvPmRlc3Rpbm86ICdwcm92ZWVkb3JAcHJvdmVlZG9yYS5jb20nPGJyLz5sZWlkYTogdHJ1ZTxici8+ZmVjaGFfbGVjdHVyYTogJzIwMjUtMTItMDQgMTQ6MzAnXCJdXG4gICAgICAgIFxuICAgICAgICB0aXBvX3BlZGlkb1tcIlx1ZDgzZFx1ZGQxNCB0aXBvX3BlZGlkbzogVGlwb05vdGlmaWNhY2lvbjxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMTxici8+bm9tYnJlOiAnTnVldm8gUGVkaWRvJ1wiXVxuICAgICAgICBcbiAgICAgICAgZXN0YWRvX2VudmlhZGFbXCJcdTI3MDUgZXN0YWRvX2VudmlhZGE6IEVzdGFkb05vdGlmaWNhY2lvbjxici8+XHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwPGJyLz5pZDogMjxici8+bm9tYnJlOiAnRW52aWFkYSdcIl1cbiAgICAgICAgXG4gICAgICAgIGNsaWVudGVfZGVzdFtcIlx1ZDgzZFx1ZGM2NCBjbGllbnRlX2Rlc3Q6IFVzdWFyaW88YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDYwPGJyLz5yb2w6ICdjbGllbnRlJ1wiXVxuICAgICAgICBcbiAgICAgICAgbG9naXN0aWNhX2Rlc3RbXCJcdWQ4M2RcdWRjNjQgbG9naXN0aWNhX2Rlc3Q6IFVzdWFyaW88YnIvPlx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMDxici8+aWQ6IDg8YnIvPnJvbDogJ2xvZ2lzdGljYSdcIl1cbiAgICAgICAgXG4gICAgICAgIHByb3ZlZWRvcl9kZXN0W1wiXHVkODNkXHVkYzY0IHByb3ZlZWRvcl9kZXN0OiBVc3VhcmlvPGJyLz5cdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDA8YnIvPmlkOiAxNTxici8+cm9sOiAncHJvdmVlZG9yJ1wiXVxuICAgIGVuZFxuICAgIFxuICAgIG5vdGlmX2NsaWVudGUgLS0+fHVzdWFyaW98IGNsaWVudGVfZGVzdFxuICAgIG5vdGlmX2NsaWVudGUgLS0+fHRpcG98IHRpcG9fcGVkaWRvXG4gICAgbm90aWZfY2xpZW50ZSAtLT58ZXN0YWRvfCBlc3RhZG9fZW52aWFkYVxuICAgIFxuICAgIG5vdGlmX2xvZ2lzdGljYSAtLT58dXN1YXJpb3wgbG9naXN0aWNhX2Rlc3RcbiAgICBub3RpZl9sb2dpc3RpY2EgLS0+fHRpcG98IHRpcG9fcGVkaWRvXG4gICAgbm90aWZfbG9naXN0aWNhIC0tPnxlc3RhZG98IGVzdGFkb19lbnZpYWRhXG4gICAgXG4gICAgbm90aWZfcHJvdmVlZG9yIC0tPnx1c3VhcmlvfCBwcm92ZWVkb3JfZGVzdFxuICAgIG5vdGlmX3Byb3ZlZWRvciAtLT58dGlwb3wgdGlwb19wZWRpZG9cbiAgICBub3RpZl9wcm92ZWVkb3IgLS0+fGVzdGFkb3wgZXN0YWRvX2VudmlhZGEiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    flowchart TB
                        subgraph "Notificaciones por Pedido Creado"
                            pedido_evento["""""üì¶ pedido_nuevo: Pedido<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1236<br/>estado: 'pendiente'<br/>fecha_creacion: '2025-12-04 14:00'"""""]
                            
                            notif_cliente["""""üìß notif_cliente: Notificacion<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 3001<br/>mensaje: 'Tu pedido #1236 ha sido...'<br/>destino: 'cliente@email.com'<br/>leida: true<br/>fecha_lectura: '2025-12-04 14:05'"""""]
                            
                            notif_logistica["""""üìß notif_logistica: Notificacion<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 3002<br/>mensaje: 'Nuevo pedido #1236 para...'<br/>destino: 'logistica@prexcol.com'<br/>leida: false<br/>fecha_lectura: null"""""]
                            
                            notif_proveedor["""""üìß notif_proveedor: Notificacion<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 3003<br/>mensaje: 'Pedido #1236 incluye tus...'<br/>destino: 'proveedor@proveedora.com'<br/>leida: true<br/>fecha_lectura: '2025-12-04 14:30'"""""]
                            
                            tipo_pedido["""""üîî tipo_pedido: TipoNotificacion<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 1<br/>nombre: 'Nuevo Pedido'"""""]
                            
                            estado_enviada["""""‚úÖ estado_enviada: EstadoNotificacion<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 2<br/>nombre: 'Enviada'"""""]
                            
                            cliente_dest["""""üë§ cliente_dest: Usuario<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 60<br/>rol: 'cliente'"""""]
                            
                            logistica_dest["""""üë§ logistica_dest: Usuario<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 8<br/>rol: 'logistica'"""""]
                            
                            proveedor_dest["""""üë§ proveedor_dest: Usuario<br/>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br/>id: 15<br/>rol: 'proveedor'"""""]
                        end
                        
                        notif_cliente -->|usuario| cliente_dest
                        notif_cliente -->|tipo| tipo_pedido
                        notif_cliente -->|estado| estado_enviada
                        
                        notif_logistica -->|usuario| logistica_dest
                        notif_logistica -->|tipo| tipo_pedido
                        notif_logistica -->|estado| estado_enviada
                        
                        notif_proveedor -->|usuario| proveedor_dest
                        notif_proveedor -->|tipo| tipo_pedido
                        notif_proveedor -->|estado| estado_enviada


.. dropdown:: üìä Diagrama Secuencia (10 diagramas)
    :open:
    :class-container: sd-mb-4

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    sequenceDiagram
                        actor Usuario
                        participant UI as Frontend<br/>(React)
                        participant API as Backend API<br/>(Django)
                        participant Auth as Auth Service
                        participant DB as Database
                        participant Token as JWT Generator
                    
                        Usuario->>UI: 1. Ingresa email/password
                        UI->>UI: 2. Valida formato
                        UI->>API: 3. POST /api/auth/login<br/>{email, password}
                        
                        API->>Auth: 4. validate_credentials()
                        Auth->>DB: 5. SELECT * FROM usuarios<br/>WHERE email=?
                        DB-->>Auth: 6. Usuario data
                        
                        Auth->>Auth: 7. check_password()
                        Auth->>Auth: 8. verify_account_status()
                        
                        alt Credenciales v√°lidas & cuenta activa
                            Auth->>Token: 9. generate_tokens(user)
                            Token->>Token: 10. Create access_token (15min)
                            Token->>Token: 11. Create refresh_token (7 d√≠as)
                            Token-->>Auth: 12. {access, refresh}
                            
                            Auth->>DB: 13. UPDATE ultimo_ingreso
                            Auth-->>API: 14. {user, tokens}
                            API-->>UI: 15. 200 OK<br/>{user, access_token, refresh_token}
                            
                            UI->>UI: 16. Store tokens (localStorage)
                            UI->>UI: 17. Redirect to dashboard
                            UI-->>Usuario: 18. Mostrar dashboard
                        else Credenciales inv√°lidas
                            Auth-->>API: Error: Invalid credentials
                            API-->>UI: 401 Unauthorized
                            UI-->>Usuario: Mostrar error
                        else Cuenta suspendida
                            Auth-->>API: Error: Account suspended
                            API-->>UI: 403 Forbidden
                            UI-->>Usuario: Contactar soporte
                        end

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIGFjdG9yIFVzdWFyaW9cbiAgICBwYXJ0aWNpcGFudCBVSSBhcyBGcm9udGVuZDxici8+KFJlYWN0KVxuICAgIHBhcnRpY2lwYW50IEFQSSBhcyBCYWNrZW5kIEFQSTxici8+KERqYW5nbylcbiAgICBwYXJ0aWNpcGFudCBBdXRoIGFzIEF1dGggU2VydmljZVxuICAgIHBhcnRpY2lwYW50IERCIGFzIERhdGFiYXNlXG4gICAgcGFydGljaXBhbnQgVG9rZW4gYXMgSldUIEdlbmVyYXRvclxuXG4gICAgVXN1YXJpby0+PlVJOiAxLiBJbmdyZXNhIGVtYWlsL3Bhc3N3b3JkXG4gICAgVUktPj5VSTogMi4gVmFsaWRhIGZvcm1hdG9cbiAgICBVSS0+PkFQSTogMy4gUE9TVCAvYXBpL2F1dGgvbG9naW48YnIvPntlbWFpbCwgcGFzc3dvcmR9XG4gICAgXG4gICAgQVBJLT4+QXV0aDogNC4gdmFsaWRhdGVfY3JlZGVudGlhbHMoKVxuICAgIEF1dGgtPj5EQjogNS4gU0VMRUNUICogRlJPTSB1c3Vhcmlvczxici8+V0hFUkUgZW1haWw9P1xuICAgIERCLS0+PkF1dGg6IDYuIFVzdWFyaW8gZGF0YVxuICAgIFxuICAgIEF1dGgtPj5BdXRoOiA3LiBjaGVja19wYXNzd29yZCgpXG4gICAgQXV0aC0+PkF1dGg6IDguIHZlcmlmeV9hY2NvdW50X3N0YXR1cygpXG4gICAgXG4gICAgYWx0IENyZWRlbmNpYWxlcyB2XHUwMGUxbGlkYXMgJiBjdWVudGEgYWN0aXZhXG4gICAgICAgIEF1dGgtPj5Ub2tlbjogOS4gZ2VuZXJhdGVfdG9rZW5zKHVzZXIpXG4gICAgICAgIFRva2VuLT4+VG9rZW46IDEwLiBDcmVhdGUgYWNjZXNzX3Rva2VuICgxNW1pbilcbiAgICAgICAgVG9rZW4tPj5Ub2tlbjogMTEuIENyZWF0ZSByZWZyZXNoX3Rva2VuICg3IGRcdTAwZWRhcylcbiAgICAgICAgVG9rZW4tLT4+QXV0aDogMTIuIHthY2Nlc3MsIHJlZnJlc2h9XG4gICAgICAgIFxuICAgICAgICBBdXRoLT4+REI6IDEzLiBVUERBVEUgdWx0aW1vX2luZ3Jlc29cbiAgICAgICAgQXV0aC0tPj5BUEk6IDE0LiB7dXNlciwgdG9rZW5zfVxuICAgICAgICBBUEktLT4+VUk6IDE1LiAyMDAgT0s8YnIvPnt1c2VyLCBhY2Nlc3NfdG9rZW4sIHJlZnJlc2hfdG9rZW59XG4gICAgICAgIFxuICAgICAgICBVSS0+PlVJOiAxNi4gU3RvcmUgdG9rZW5zIChsb2NhbFN0b3JhZ2UpXG4gICAgICAgIFVJLT4+VUk6IDE3LiBSZWRpcmVjdCB0byBkYXNoYm9hcmRcbiAgICAgICAgVUktLT4+VXN1YXJpbzogMTguIE1vc3RyYXIgZGFzaGJvYXJkXG4gICAgZWxzZSBDcmVkZW5jaWFsZXMgaW52XHUwMGUxbGlkYXNcbiAgICAgICAgQXV0aC0tPj5BUEk6IEVycm9yOiBJbnZhbGlkIGNyZWRlbnRpYWxzXG4gICAgICAgIEFQSS0tPj5VSTogNDAxIFVuYXV0aG9yaXplZFxuICAgICAgICBVSS0tPj5Vc3VhcmlvOiBNb3N0cmFyIGVycm9yXG4gICAgZWxzZSBDdWVudGEgc3VzcGVuZGlkYVxuICAgICAgICBBdXRoLS0+PkFQSTogRXJyb3I6IEFjY291bnQgc3VzcGVuZGVkXG4gICAgICAgIEFQSS0tPj5VSTogNDAzIEZvcmJpZGRlblxuICAgICAgICBVSS0tPj5Vc3VhcmlvOiBDb250YWN0YXIgc29wb3J0ZVxuICAgIGVuZCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIGFjdG9yIFVzdWFyaW9cbiAgICBwYXJ0aWNpcGFudCBVSSBhcyBGcm9udGVuZDxici8+KFJlYWN0KVxuICAgIHBhcnRpY2lwYW50IEFQSSBhcyBCYWNrZW5kIEFQSTxici8+KERqYW5nbylcbiAgICBwYXJ0aWNpcGFudCBBdXRoIGFzIEF1dGggU2VydmljZVxuICAgIHBhcnRpY2lwYW50IERCIGFzIERhdGFiYXNlXG4gICAgcGFydGljaXBhbnQgVG9rZW4gYXMgSldUIEdlbmVyYXRvclxuXG4gICAgVXN1YXJpby0+PlVJOiAxLiBJbmdyZXNhIGVtYWlsL3Bhc3N3b3JkXG4gICAgVUktPj5VSTogMi4gVmFsaWRhIGZvcm1hdG9cbiAgICBVSS0+PkFQSTogMy4gUE9TVCAvYXBpL2F1dGgvbG9naW48YnIvPntlbWFpbCwgcGFzc3dvcmR9XG4gICAgXG4gICAgQVBJLT4+QXV0aDogNC4gdmFsaWRhdGVfY3JlZGVudGlhbHMoKVxuICAgIEF1dGgtPj5EQjogNS4gU0VMRUNUICogRlJPTSB1c3Vhcmlvczxici8+V0hFUkUgZW1haWw9P1xuICAgIERCLS0+PkF1dGg6IDYuIFVzdWFyaW8gZGF0YVxuICAgIFxuICAgIEF1dGgtPj5BdXRoOiA3LiBjaGVja19wYXNzd29yZCgpXG4gICAgQXV0aC0+PkF1dGg6IDguIHZlcmlmeV9hY2NvdW50X3N0YXR1cygpXG4gICAgXG4gICAgYWx0IENyZWRlbmNpYWxlcyB2XHUwMGUxbGlkYXMgJiBjdWVudGEgYWN0aXZhXG4gICAgICAgIEF1dGgtPj5Ub2tlbjogOS4gZ2VuZXJhdGVfdG9rZW5zKHVzZXIpXG4gICAgICAgIFRva2VuLT4+VG9rZW46IDEwLiBDcmVhdGUgYWNjZXNzX3Rva2VuICgxNW1pbilcbiAgICAgICAgVG9rZW4tPj5Ub2tlbjogMTEuIENyZWF0ZSByZWZyZXNoX3Rva2VuICg3IGRcdTAwZWRhcylcbiAgICAgICAgVG9rZW4tLT4+QXV0aDogMTIuIHthY2Nlc3MsIHJlZnJlc2h9XG4gICAgICAgIFxuICAgICAgICBBdXRoLT4+REI6IDEzLiBVUERBVEUgdWx0aW1vX2luZ3Jlc29cbiAgICAgICAgQXV0aC0tPj5BUEk6IDE0LiB7dXNlciwgdG9rZW5zfVxuICAgICAgICBBUEktLT4+VUk6IDE1LiAyMDAgT0s8YnIvPnt1c2VyLCBhY2Nlc3NfdG9rZW4sIHJlZnJlc2hfdG9rZW59XG4gICAgICAgIFxuICAgICAgICBVSS0+PlVJOiAxNi4gU3RvcmUgdG9rZW5zIChsb2NhbFN0b3JhZ2UpXG4gICAgICAgIFVJLT4+VUk6IDE3LiBSZWRpcmVjdCB0byBkYXNoYm9hcmRcbiAgICAgICAgVUktLT4+VXN1YXJpbzogMTguIE1vc3RyYXIgZGFzaGJvYXJkXG4gICAgZWxzZSBDcmVkZW5jaWFsZXMgaW52XHUwMGUxbGlkYXNcbiAgICAgICAgQXV0aC0tPj5BUEk6IEVycm9yOiBJbnZhbGlkIGNyZWRlbnRpYWxzXG4gICAgICAgIEFQSS0tPj5VSTogNDAxIFVuYXV0aG9yaXplZFxuICAgICAgICBVSS0tPj5Vc3VhcmlvOiBNb3N0cmFyIGVycm9yXG4gICAgZWxzZSBDdWVudGEgc3VzcGVuZGlkYVxuICAgICAgICBBdXRoLS0+PkFQSTogRXJyb3I6IEFjY291bnQgc3VzcGVuZGVkXG4gICAgICAgIEFQSS0tPj5VSTogNDAzIEZvcmJpZGRlblxuICAgICAgICBVSS0tPj5Vc3VhcmlvOiBDb250YWN0YXIgc29wb3J0ZVxuICAgIGVuZCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    sequenceDiagram
                        actor Usuario
                        participant UI as Frontend<br/>(React)
                        participant API as Backend API<br/>(Django)
                        participant Auth as Auth Service
                        participant DB as Database
                        participant Token as JWT Generator
                    
                        Usuario->>UI: 1. Ingresa email/password
                        UI->>UI: 2. Valida formato
                        UI->>API: 3. POST /api/auth/login<br/>{email, password}
                        
                        API->>Auth: 4. validate_credentials()
                        Auth->>DB: 5. SELECT * FROM usuarios<br/>WHERE email=?
                        DB-->>Auth: 6. Usuario data
                        
                        Auth->>Auth: 7. check_password()
                        Auth->>Auth: 8. verify_account_status()
                        
                        alt Credenciales v√°lidas & cuenta activa
                            Auth->>Token: 9. generate_tokens(user)
                            Token->>Token: 10. Create access_token (15min)
                            Token->>Token: 11. Create refresh_token (7 d√≠as)
                            Token-->>Auth: 12. {access, refresh}
                            
                            Auth->>DB: 13. UPDATE ultimo_ingreso
                            Auth-->>API: 14. {user, tokens}
                            API-->>UI: 15. 200 OK<br/>{user, access_token, refresh_token}
                            
                            UI->>UI: 16. Store tokens (localStorage)
                            UI->>UI: 17. Redirect to dashboard
                            UI-->>Usuario: 18. Mostrar dashboard
                        else Credenciales inv√°lidas
                            Auth-->>API: Error: Invalid credentials
                            API-->>UI: 401 Unauthorized
                            UI-->>Usuario: Mostrar error
                        else Cuenta suspendida
                            Auth-->>API: Error: Account suspended
                            API-->>UI: 403 Forbidden
                            UI-->>Usuario: Contactar soporte
                        end

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    sequenceDiagram
                        actor Usuario
                        participant UI as Frontend
                        participant API as Backend API
                        participant Validator as Password<br/>Validator
                        participant DB as Database
                        participant Email as Email<br/>Service
                    
                        Usuario->>UI: 1. Completa formulario
                        UI->>UI: 2. Validaci√≥n cliente
                        UI->>API: 3. POST /api/auth/register<br/>{email, nombre, password, rol}
                        
                        API->>DB: 4. Check email √∫nico
                        alt Email ya existe
                            DB-->>API: Email exists
                            API-->>UI: 400 Bad Request
                            UI-->>Usuario: Email en uso
                        else Email disponible
                            API->>Validator: 5. validate_password()
                            Validator->>Validator: 6. Check strength
                            
                            alt Password d√©bil
                                Validator-->>API: Weak password
                                API-->>UI: 400 Bad Request
                                UI-->>Usuario: Password requirements
                            else Password v√°lido
                                API->>DB: 7. INSERT usuario
                                API->>DB: 8. INSERT password_history
                                DB-->>API: 9. Usuario creado
                                
                                API->>Email: 10. send_welcome_email()
                                Email-->>API: 11. Email sent
                                
                                API-->>UI: 12. 201 Created<br/>{user}
                                UI-->>Usuario: 13. Registro exitoso
                                UI->>UI: 14. Redirect to login
                            end
                        end

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIGFjdG9yIFVzdWFyaW9cbiAgICBwYXJ0aWNpcGFudCBVSSBhcyBGcm9udGVuZFxuICAgIHBhcnRpY2lwYW50IEFQSSBhcyBCYWNrZW5kIEFQSVxuICAgIHBhcnRpY2lwYW50IFZhbGlkYXRvciBhcyBQYXNzd29yZDxici8+VmFsaWRhdG9yXG4gICAgcGFydGljaXBhbnQgREIgYXMgRGF0YWJhc2VcbiAgICBwYXJ0aWNpcGFudCBFbWFpbCBhcyBFbWFpbDxici8+U2VydmljZVxuXG4gICAgVXN1YXJpby0+PlVJOiAxLiBDb21wbGV0YSBmb3JtdWxhcmlvXG4gICAgVUktPj5VSTogMi4gVmFsaWRhY2lcdTAwZjNuIGNsaWVudGVcbiAgICBVSS0+PkFQSTogMy4gUE9TVCAvYXBpL2F1dGgvcmVnaXN0ZXI8YnIvPntlbWFpbCwgbm9tYnJlLCBwYXNzd29yZCwgcm9sfVxuICAgIFxuICAgIEFQSS0+PkRCOiA0LiBDaGVjayBlbWFpbCBcdTAwZmFuaWNvXG4gICAgYWx0IEVtYWlsIHlhIGV4aXN0ZVxuICAgICAgICBEQi0tPj5BUEk6IEVtYWlsIGV4aXN0c1xuICAgICAgICBBUEktLT4+VUk6IDQwMCBCYWQgUmVxdWVzdFxuICAgICAgICBVSS0tPj5Vc3VhcmlvOiBFbWFpbCBlbiB1c29cbiAgICBlbHNlIEVtYWlsIGRpc3BvbmlibGVcbiAgICAgICAgQVBJLT4+VmFsaWRhdG9yOiA1LiB2YWxpZGF0ZV9wYXNzd29yZCgpXG4gICAgICAgIFZhbGlkYXRvci0+PlZhbGlkYXRvcjogNi4gQ2hlY2sgc3RyZW5ndGhcbiAgICAgICAgXG4gICAgICAgIGFsdCBQYXNzd29yZCBkXHUwMGU5YmlsXG4gICAgICAgICAgICBWYWxpZGF0b3ItLT4+QVBJOiBXZWFrIHBhc3N3b3JkXG4gICAgICAgICAgICBBUEktLT4+VUk6IDQwMCBCYWQgUmVxdWVzdFxuICAgICAgICAgICAgVUktLT4+VXN1YXJpbzogUGFzc3dvcmQgcmVxdWlyZW1lbnRzXG4gICAgICAgIGVsc2UgUGFzc3dvcmQgdlx1MDBlMWxpZG9cbiAgICAgICAgICAgIEFQSS0+PkRCOiA3LiBJTlNFUlQgdXN1YXJpb1xuICAgICAgICAgICAgQVBJLT4+REI6IDguIElOU0VSVCBwYXNzd29yZF9oaXN0b3J5XG4gICAgICAgICAgICBEQi0tPj5BUEk6IDkuIFVzdWFyaW8gY3JlYWRvXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEFQSS0+PkVtYWlsOiAxMC4gc2VuZF93ZWxjb21lX2VtYWlsKClcbiAgICAgICAgICAgIEVtYWlsLS0+PkFQSTogMTEuIEVtYWlsIHNlbnRcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgQVBJLS0+PlVJOiAxMi4gMjAxIENyZWF0ZWQ8YnIvPnt1c2VyfVxuICAgICAgICAgICAgVUktLT4+VXN1YXJpbzogMTMuIFJlZ2lzdHJvIGV4aXRvc29cbiAgICAgICAgICAgIFVJLT4+VUk6IDE0LiBSZWRpcmVjdCB0byBsb2dpblxuICAgICAgICBlbmRcbiAgICBlbmQiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIGFjdG9yIFVzdWFyaW9cbiAgICBwYXJ0aWNpcGFudCBVSSBhcyBGcm9udGVuZFxuICAgIHBhcnRpY2lwYW50IEFQSSBhcyBCYWNrZW5kIEFQSVxuICAgIHBhcnRpY2lwYW50IFZhbGlkYXRvciBhcyBQYXNzd29yZDxici8+VmFsaWRhdG9yXG4gICAgcGFydGljaXBhbnQgREIgYXMgRGF0YWJhc2VcbiAgICBwYXJ0aWNpcGFudCBFbWFpbCBhcyBFbWFpbDxici8+U2VydmljZVxuXG4gICAgVXN1YXJpby0+PlVJOiAxLiBDb21wbGV0YSBmb3JtdWxhcmlvXG4gICAgVUktPj5VSTogMi4gVmFsaWRhY2lcdTAwZjNuIGNsaWVudGVcbiAgICBVSS0+PkFQSTogMy4gUE9TVCAvYXBpL2F1dGgvcmVnaXN0ZXI8YnIvPntlbWFpbCwgbm9tYnJlLCBwYXNzd29yZCwgcm9sfVxuICAgIFxuICAgIEFQSS0+PkRCOiA0LiBDaGVjayBlbWFpbCBcdTAwZmFuaWNvXG4gICAgYWx0IEVtYWlsIHlhIGV4aXN0ZVxuICAgICAgICBEQi0tPj5BUEk6IEVtYWlsIGV4aXN0c1xuICAgICAgICBBUEktLT4+VUk6IDQwMCBCYWQgUmVxdWVzdFxuICAgICAgICBVSS0tPj5Vc3VhcmlvOiBFbWFpbCBlbiB1c29cbiAgICBlbHNlIEVtYWlsIGRpc3BvbmlibGVcbiAgICAgICAgQVBJLT4+VmFsaWRhdG9yOiA1LiB2YWxpZGF0ZV9wYXNzd29yZCgpXG4gICAgICAgIFZhbGlkYXRvci0+PlZhbGlkYXRvcjogNi4gQ2hlY2sgc3RyZW5ndGhcbiAgICAgICAgXG4gICAgICAgIGFsdCBQYXNzd29yZCBkXHUwMGU5YmlsXG4gICAgICAgICAgICBWYWxpZGF0b3ItLT4+QVBJOiBXZWFrIHBhc3N3b3JkXG4gICAgICAgICAgICBBUEktLT4+VUk6IDQwMCBCYWQgUmVxdWVzdFxuICAgICAgICAgICAgVUktLT4+VXN1YXJpbzogUGFzc3dvcmQgcmVxdWlyZW1lbnRzXG4gICAgICAgIGVsc2UgUGFzc3dvcmQgdlx1MDBlMWxpZG9cbiAgICAgICAgICAgIEFQSS0+PkRCOiA3LiBJTlNFUlQgdXN1YXJpb1xuICAgICAgICAgICAgQVBJLT4+REI6IDguIElOU0VSVCBwYXNzd29yZF9oaXN0b3J5XG4gICAgICAgICAgICBEQi0tPj5BUEk6IDkuIFVzdWFyaW8gY3JlYWRvXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEFQSS0+PkVtYWlsOiAxMC4gc2VuZF93ZWxjb21lX2VtYWlsKClcbiAgICAgICAgICAgIEVtYWlsLS0+PkFQSTogMTEuIEVtYWlsIHNlbnRcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgQVBJLS0+PlVJOiAxMi4gMjAxIENyZWF0ZWQ8YnIvPnt1c2VyfVxuICAgICAgICAgICAgVUktLT4+VXN1YXJpbzogMTMuIFJlZ2lzdHJvIGV4aXRvc29cbiAgICAgICAgICAgIFVJLT4+VUk6IDE0LiBSZWRpcmVjdCB0byBsb2dpblxuICAgICAgICBlbmRcbiAgICBlbmQiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    sequenceDiagram
                        actor Usuario
                        participant UI as Frontend
                        participant API as Backend API
                        participant Validator as Password<br/>Validator
                        participant DB as Database
                        participant Email as Email<br/>Service
                    
                        Usuario->>UI: 1. Completa formulario
                        UI->>UI: 2. Validaci√≥n cliente
                        UI->>API: 3. POST /api/auth/register<br/>{email, nombre, password, rol}
                        
                        API->>DB: 4. Check email √∫nico
                        alt Email ya existe
                            DB-->>API: Email exists
                            API-->>UI: 400 Bad Request
                            UI-->>Usuario: Email en uso
                        else Email disponible
                            API->>Validator: 5. validate_password()
                            Validator->>Validator: 6. Check strength
                            
                            alt Password d√©bil
                                Validator-->>API: Weak password
                                API-->>UI: 400 Bad Request
                                UI-->>Usuario: Password requirements
                            else Password v√°lido
                                API->>DB: 7. INSERT usuario
                                API->>DB: 8. INSERT password_history
                                DB-->>API: 9. Usuario creado
                                
                                API->>Email: 10. send_welcome_email()
                                Email-->>API: 11. Email sent
                                
                                API-->>UI: 12. 201 Created<br/>{user}
                                UI-->>Usuario: 13. Registro exitoso
                                UI->>UI: 14. Redirect to login
                            end
                        end

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    sequenceDiagram
                        participant UI as Frontend
                        participant API as Backend API
                        participant Token as JWT Service
                        participant DB as Database
                    
                        UI->>UI: 1. Access token expirado
                        UI->>API: 2. POST /api/auth/refresh<br/>{refresh_token}
                        
                        API->>Token: 3. validate_refresh_token()
                        
                        alt Token v√°lido y no expirado
                            Token->>DB: 4. Verify user exists & active
                            DB-->>Token: 5. User data
                            
                            Token->>Token: 6. Generate new access_token
                            Token-->>API: 7. {new_access_token}
                            
                            API-->>UI: 8. 200 OK<br/>{access_token}
                            UI->>UI: 9. Update stored token
                            UI->>UI: 10. Retry original request
                        else Token inv√°lido o expirado
                            Token-->>API: Invalid refresh token
                            API-->>UI: 401 Unauthorized
                            UI->>UI: Clear tokens
                            UI->>UI: Redirect to login
                        end

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIHBhcnRpY2lwYW50IFVJIGFzIEZyb250ZW5kXG4gICAgcGFydGljaXBhbnQgQVBJIGFzIEJhY2tlbmQgQVBJXG4gICAgcGFydGljaXBhbnQgVG9rZW4gYXMgSldUIFNlcnZpY2VcbiAgICBwYXJ0aWNpcGFudCBEQiBhcyBEYXRhYmFzZVxuXG4gICAgVUktPj5VSTogMS4gQWNjZXNzIHRva2VuIGV4cGlyYWRvXG4gICAgVUktPj5BUEk6IDIuIFBPU1QgL2FwaS9hdXRoL3JlZnJlc2g8YnIvPntyZWZyZXNoX3Rva2VufVxuICAgIFxuICAgIEFQSS0+PlRva2VuOiAzLiB2YWxpZGF0ZV9yZWZyZXNoX3Rva2VuKClcbiAgICBcbiAgICBhbHQgVG9rZW4gdlx1MDBlMWxpZG8geSBubyBleHBpcmFkb1xuICAgICAgICBUb2tlbi0+PkRCOiA0LiBWZXJpZnkgdXNlciBleGlzdHMgJiBhY3RpdmVcbiAgICAgICAgREItLT4+VG9rZW46IDUuIFVzZXIgZGF0YVxuICAgICAgICBcbiAgICAgICAgVG9rZW4tPj5Ub2tlbjogNi4gR2VuZXJhdGUgbmV3IGFjY2Vzc190b2tlblxuICAgICAgICBUb2tlbi0tPj5BUEk6IDcuIHtuZXdfYWNjZXNzX3Rva2VufVxuICAgICAgICBcbiAgICAgICAgQVBJLS0+PlVJOiA4LiAyMDAgT0s8YnIvPnthY2Nlc3NfdG9rZW59XG4gICAgICAgIFVJLT4+VUk6IDkuIFVwZGF0ZSBzdG9yZWQgdG9rZW5cbiAgICAgICAgVUktPj5VSTogMTAuIFJldHJ5IG9yaWdpbmFsIHJlcXVlc3RcbiAgICBlbHNlIFRva2VuIGludlx1MDBlMWxpZG8gbyBleHBpcmFkb1xuICAgICAgICBUb2tlbi0tPj5BUEk6IEludmFsaWQgcmVmcmVzaCB0b2tlblxuICAgICAgICBBUEktLT4+VUk6IDQwMSBVbmF1dGhvcml6ZWRcbiAgICAgICAgVUktPj5VSTogQ2xlYXIgdG9rZW5zXG4gICAgICAgIFVJLT4+VUk6IFJlZGlyZWN0IHRvIGxvZ2luXG4gICAgZW5kIiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIHBhcnRpY2lwYW50IFVJIGFzIEZyb250ZW5kXG4gICAgcGFydGljaXBhbnQgQVBJIGFzIEJhY2tlbmQgQVBJXG4gICAgcGFydGljaXBhbnQgVG9rZW4gYXMgSldUIFNlcnZpY2VcbiAgICBwYXJ0aWNpcGFudCBEQiBhcyBEYXRhYmFzZVxuXG4gICAgVUktPj5VSTogMS4gQWNjZXNzIHRva2VuIGV4cGlyYWRvXG4gICAgVUktPj5BUEk6IDIuIFBPU1QgL2FwaS9hdXRoL3JlZnJlc2g8YnIvPntyZWZyZXNoX3Rva2VufVxuICAgIFxuICAgIEFQSS0+PlRva2VuOiAzLiB2YWxpZGF0ZV9yZWZyZXNoX3Rva2VuKClcbiAgICBcbiAgICBhbHQgVG9rZW4gdlx1MDBlMWxpZG8geSBubyBleHBpcmFkb1xuICAgICAgICBUb2tlbi0+PkRCOiA0LiBWZXJpZnkgdXNlciBleGlzdHMgJiBhY3RpdmVcbiAgICAgICAgREItLT4+VG9rZW46IDUuIFVzZXIgZGF0YVxuICAgICAgICBcbiAgICAgICAgVG9rZW4tPj5Ub2tlbjogNi4gR2VuZXJhdGUgbmV3IGFjY2Vzc190b2tlblxuICAgICAgICBUb2tlbi0tPj5BUEk6IDcuIHtuZXdfYWNjZXNzX3Rva2VufVxuICAgICAgICBcbiAgICAgICAgQVBJLS0+PlVJOiA4LiAyMDAgT0s8YnIvPnthY2Nlc3NfdG9rZW59XG4gICAgICAgIFVJLT4+VUk6IDkuIFVwZGF0ZSBzdG9yZWQgdG9rZW5cbiAgICAgICAgVUktPj5VSTogMTAuIFJldHJ5IG9yaWdpbmFsIHJlcXVlc3RcbiAgICBlbHNlIFRva2VuIGludlx1MDBlMWxpZG8gbyBleHBpcmFkb1xuICAgICAgICBUb2tlbi0tPj5BUEk6IEludmFsaWQgcmVmcmVzaCB0b2tlblxuICAgICAgICBBUEktLT4+VUk6IDQwMSBVbmF1dGhvcml6ZWRcbiAgICAgICAgVUktPj5VSTogQ2xlYXIgdG9rZW5zXG4gICAgICAgIFVJLT4+VUk6IFJlZGlyZWN0IHRvIGxvZ2luXG4gICAgZW5kIiwgIm1lcm1haWQiOiB7InRoZW1lIjogImRlZmF1bHQifSwgImF1dG9TeW5jIjogdHJ1ZSwgInVwZGF0ZURpYWdyYW0iOiB0cnVlfQ==
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    sequenceDiagram
                        participant UI as Frontend
                        participant API as Backend API
                        participant Token as JWT Service
                        participant DB as Database
                    
                        UI->>UI: 1. Access token expirado
                        UI->>API: 2. POST /api/auth/refresh<br/>{refresh_token}
                        
                        API->>Token: 3. validate_refresh_token()
                        
                        alt Token v√°lido y no expirado
                            Token->>DB: 4. Verify user exists & active
                            DB-->>Token: 5. User data
                            
                            Token->>Token: 6. Generate new access_token
                            Token-->>API: 7. {new_access_token}
                            
                            API-->>UI: 8. 200 OK<br/>{access_token}
                            UI->>UI: 9. Update stored token
                            UI->>UI: 10. Retry original request
                        else Token inv√°lido o expirado
                            Token-->>API: Invalid refresh token
                            API-->>UI: 401 Unauthorized
                            UI->>UI: Clear tokens
                            UI->>UI: Redirect to login
                        end

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    sequenceDiagram
                        actor Usuario
                        participant UI as Frontend
                        participant API as Backend API
                        participant Token as Token<br/>Generator
                        participant DB as Database
                        participant Email as Email<br/>Service
                    
                        rect rgb(200, 220, 240)
                            Note over Usuario,Email: Fase 1: Solicitud de Reset
                            Usuario->>UI: 1. Click "Olvid√© mi contrase√±a"
                            UI->>UI: 2. Mostrar formulario
                            Usuario->>UI: 3. Ingresa email
                            UI->>API: 4. POST /api/auth/forgot-password<br/>{email}
                            
                            API->>DB: 5. Find user by email
                            
                            alt Usuario existe
                                DB-->>API: 6. Usuario data
                                API->>Token: 7. generate_reset_token()
                                Token-->>API: 8. {uid, token}
                                
                                API->>DB: 9. Store reset token
                                API->>Email: 10. send_reset_email(uid, token)
                                Email-->>API: 11. Email sent
                                
                                API-->>UI: 12. 200 OK
                                UI-->>Usuario: 13. "Revisa tu email"
                            else Usuario no existe
                                API-->>UI: 200 OK (por seguridad)
                                UI-->>Usuario: "Revisa tu email"
                            end
                        end
                    
                        rect rgb(220, 240, 200)
                            Note over Usuario,Email: Fase 2: Reset de Contrase√±a
                            Usuario->>Usuario: 14. Abre email
                            Usuario->>UI: 15. Click link reset
                            UI->>API: 16. GET /reset-password/{uid}/{token}
                            
                            API->>Token: 17. validate_reset_token()
                            
                            alt Token v√°lido
                                Token-->>API: Valid
                                API-->>UI: 18. Show reset form
                                
                                Usuario->>UI: 19. Ingresa nueva password
                                UI->>API: 20. POST /api/auth/reset-password<br/>{uid, token, new_password}
                                
                                API->>Token: 21. verify_token()
                                API->>DB: 22. Get password_history
                                
                                alt Password no reutilizada
                                    API->>DB: 23. UPDATE password
                                    API->>DB: 24. INSERT password_history
                                    API->>DB: 25. DELETE reset_token
                                    
                                    API-->>UI: 26. 200 OK
                                    UI-->>Usuario: 27. "Password actualizado"
                                    UI->>UI: 28. Redirect to login
                                else Password ya usada
                                    API-->>UI: 400 Bad Request
                                    UI-->>Usuario: "Password ya usada"
                                end
                            else Token inv√°lido/expirado
                                Token-->>API: Invalid
                                API-->>UI: 400 Bad Request
                                UI-->>Usuario: "Link expirado"
                            end
                        end

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIGFjdG9yIFVzdWFyaW9cbiAgICBwYXJ0aWNpcGFudCBVSSBhcyBGcm9udGVuZFxuICAgIHBhcnRpY2lwYW50IEFQSSBhcyBCYWNrZW5kIEFQSVxuICAgIHBhcnRpY2lwYW50IFRva2VuIGFzIFRva2VuPGJyLz5HZW5lcmF0b3JcbiAgICBwYXJ0aWNpcGFudCBEQiBhcyBEYXRhYmFzZVxuICAgIHBhcnRpY2lwYW50IEVtYWlsIGFzIEVtYWlsPGJyLz5TZXJ2aWNlXG5cbiAgICByZWN0IHJnYigyMDAsIDIyMCwgMjQwKVxuICAgICAgICBOb3RlIG92ZXIgVXN1YXJpbyxFbWFpbDogRmFzZSAxOiBTb2xpY2l0dWQgZGUgUmVzZXRcbiAgICAgICAgVXN1YXJpby0+PlVJOiAxLiBDbGljayBcIk9sdmlkXHUwMGU5IG1pIGNvbnRyYXNlXHUwMGYxYVwiXG4gICAgICAgIFVJLT4+VUk6IDIuIE1vc3RyYXIgZm9ybXVsYXJpb1xuICAgICAgICBVc3VhcmlvLT4+VUk6IDMuIEluZ3Jlc2EgZW1haWxcbiAgICAgICAgVUktPj5BUEk6IDQuIFBPU1QgL2FwaS9hdXRoL2ZvcmdvdC1wYXNzd29yZDxici8+e2VtYWlsfVxuICAgICAgICBcbiAgICAgICAgQVBJLT4+REI6IDUuIEZpbmQgdXNlciBieSBlbWFpbFxuICAgICAgICBcbiAgICAgICAgYWx0IFVzdWFyaW8gZXhpc3RlXG4gICAgICAgICAgICBEQi0tPj5BUEk6IDYuIFVzdWFyaW8gZGF0YVxuICAgICAgICAgICAgQVBJLT4+VG9rZW46IDcuIGdlbmVyYXRlX3Jlc2V0X3Rva2VuKClcbiAgICAgICAgICAgIFRva2VuLS0+PkFQSTogOC4ge3VpZCwgdG9rZW59XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEFQSS0+PkRCOiA5LiBTdG9yZSByZXNldCB0b2tlblxuICAgICAgICAgICAgQVBJLT4+RW1haWw6IDEwLiBzZW5kX3Jlc2V0X2VtYWlsKHVpZCwgdG9rZW4pXG4gICAgICAgICAgICBFbWFpbC0tPj5BUEk6IDExLiBFbWFpbCBzZW50XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEFQSS0tPj5VSTogMTIuIDIwMCBPS1xuICAgICAgICAgICAgVUktLT4+VXN1YXJpbzogMTMuIFwiUmV2aXNhIHR1IGVtYWlsXCJcbiAgICAgICAgZWxzZSBVc3VhcmlvIG5vIGV4aXN0ZVxuICAgICAgICAgICAgQVBJLS0+PlVJOiAyMDAgT0sgKHBvciBzZWd1cmlkYWQpXG4gICAgICAgICAgICBVSS0tPj5Vc3VhcmlvOiBcIlJldmlzYSB0dSBlbWFpbFwiXG4gICAgICAgIGVuZFxuICAgIGVuZFxuXG4gICAgcmVjdCByZ2IoMjIwLCAyNDAsIDIwMClcbiAgICAgICAgTm90ZSBvdmVyIFVzdWFyaW8sRW1haWw6IEZhc2UgMjogUmVzZXQgZGUgQ29udHJhc2VcdTAwZjFhXG4gICAgICAgIFVzdWFyaW8tPj5Vc3VhcmlvOiAxNC4gQWJyZSBlbWFpbFxuICAgICAgICBVc3VhcmlvLT4+VUk6IDE1LiBDbGljayBsaW5rIHJlc2V0XG4gICAgICAgIFVJLT4+QVBJOiAxNi4gR0VUIC9yZXNldC1wYXNzd29yZC97dWlkfS97dG9rZW59XG4gICAgICAgIFxuICAgICAgICBBUEktPj5Ub2tlbjogMTcuIHZhbGlkYXRlX3Jlc2V0X3Rva2VuKClcbiAgICAgICAgXG4gICAgICAgIGFsdCBUb2tlbiB2XHUwMGUxbGlkb1xuICAgICAgICAgICAgVG9rZW4tLT4+QVBJOiBWYWxpZFxuICAgICAgICAgICAgQVBJLS0+PlVJOiAxOC4gU2hvdyByZXNldCBmb3JtXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFVzdWFyaW8tPj5VSTogMTkuIEluZ3Jlc2EgbnVldmEgcGFzc3dvcmRcbiAgICAgICAgICAgIFVJLT4+QVBJOiAyMC4gUE9TVCAvYXBpL2F1dGgvcmVzZXQtcGFzc3dvcmQ8YnIvPnt1aWQsIHRva2VuLCBuZXdfcGFzc3dvcmR9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEFQSS0+PlRva2VuOiAyMS4gdmVyaWZ5X3Rva2VuKClcbiAgICAgICAgICAgIEFQSS0+PkRCOiAyMi4gR2V0IHBhc3N3b3JkX2hpc3RvcnlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYWx0IFBhc3N3b3JkIG5vIHJldXRpbGl6YWRhXG4gICAgICAgICAgICAgICAgQVBJLT4+REI6IDIzLiBVUERBVEUgcGFzc3dvcmRcbiAgICAgICAgICAgICAgICBBUEktPj5EQjogMjQuIElOU0VSVCBwYXNzd29yZF9oaXN0b3J5XG4gICAgICAgICAgICAgICAgQVBJLT4+REI6IDI1LiBERUxFVEUgcmVzZXRfdG9rZW5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBBUEktLT4+VUk6IDI2LiAyMDAgT0tcbiAgICAgICAgICAgICAgICBVSS0tPj5Vc3VhcmlvOiAyNy4gXCJQYXNzd29yZCBhY3R1YWxpemFkb1wiXG4gICAgICAgICAgICAgICAgVUktPj5VSTogMjguIFJlZGlyZWN0IHRvIGxvZ2luXG4gICAgICAgICAgICBlbHNlIFBhc3N3b3JkIHlhIHVzYWRhXG4gICAgICAgICAgICAgICAgQVBJLS0+PlVJOiA0MDAgQmFkIFJlcXVlc3RcbiAgICAgICAgICAgICAgICBVSS0tPj5Vc3VhcmlvOiBcIlBhc3N3b3JkIHlhIHVzYWRhXCJcbiAgICAgICAgICAgIGVuZFxuICAgICAgICBlbHNlIFRva2VuIGludlx1MDBlMWxpZG8vZXhwaXJhZG9cbiAgICAgICAgICAgIFRva2VuLS0+PkFQSTogSW52YWxpZFxuICAgICAgICAgICAgQVBJLS0+PlVJOiA0MDAgQmFkIFJlcXVlc3RcbiAgICAgICAgICAgIFVJLS0+PlVzdWFyaW86IFwiTGluayBleHBpcmFkb1wiXG4gICAgICAgIGVuZFxuICAgIGVuZCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIGFjdG9yIFVzdWFyaW9cbiAgICBwYXJ0aWNpcGFudCBVSSBhcyBGcm9udGVuZFxuICAgIHBhcnRpY2lwYW50IEFQSSBhcyBCYWNrZW5kIEFQSVxuICAgIHBhcnRpY2lwYW50IFRva2VuIGFzIFRva2VuPGJyLz5HZW5lcmF0b3JcbiAgICBwYXJ0aWNpcGFudCBEQiBhcyBEYXRhYmFzZVxuICAgIHBhcnRpY2lwYW50IEVtYWlsIGFzIEVtYWlsPGJyLz5TZXJ2aWNlXG5cbiAgICByZWN0IHJnYigyMDAsIDIyMCwgMjQwKVxuICAgICAgICBOb3RlIG92ZXIgVXN1YXJpbyxFbWFpbDogRmFzZSAxOiBTb2xpY2l0dWQgZGUgUmVzZXRcbiAgICAgICAgVXN1YXJpby0+PlVJOiAxLiBDbGljayBcIk9sdmlkXHUwMGU5IG1pIGNvbnRyYXNlXHUwMGYxYVwiXG4gICAgICAgIFVJLT4+VUk6IDIuIE1vc3RyYXIgZm9ybXVsYXJpb1xuICAgICAgICBVc3VhcmlvLT4+VUk6IDMuIEluZ3Jlc2EgZW1haWxcbiAgICAgICAgVUktPj5BUEk6IDQuIFBPU1QgL2FwaS9hdXRoL2ZvcmdvdC1wYXNzd29yZDxici8+e2VtYWlsfVxuICAgICAgICBcbiAgICAgICAgQVBJLT4+REI6IDUuIEZpbmQgdXNlciBieSBlbWFpbFxuICAgICAgICBcbiAgICAgICAgYWx0IFVzdWFyaW8gZXhpc3RlXG4gICAgICAgICAgICBEQi0tPj5BUEk6IDYuIFVzdWFyaW8gZGF0YVxuICAgICAgICAgICAgQVBJLT4+VG9rZW46IDcuIGdlbmVyYXRlX3Jlc2V0X3Rva2VuKClcbiAgICAgICAgICAgIFRva2VuLS0+PkFQSTogOC4ge3VpZCwgdG9rZW59XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEFQSS0+PkRCOiA5LiBTdG9yZSByZXNldCB0b2tlblxuICAgICAgICAgICAgQVBJLT4+RW1haWw6IDEwLiBzZW5kX3Jlc2V0X2VtYWlsKHVpZCwgdG9rZW4pXG4gICAgICAgICAgICBFbWFpbC0tPj5BUEk6IDExLiBFbWFpbCBzZW50XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEFQSS0tPj5VSTogMTIuIDIwMCBPS1xuICAgICAgICAgICAgVUktLT4+VXN1YXJpbzogMTMuIFwiUmV2aXNhIHR1IGVtYWlsXCJcbiAgICAgICAgZWxzZSBVc3VhcmlvIG5vIGV4aXN0ZVxuICAgICAgICAgICAgQVBJLS0+PlVJOiAyMDAgT0sgKHBvciBzZWd1cmlkYWQpXG4gICAgICAgICAgICBVSS0tPj5Vc3VhcmlvOiBcIlJldmlzYSB0dSBlbWFpbFwiXG4gICAgICAgIGVuZFxuICAgIGVuZFxuXG4gICAgcmVjdCByZ2IoMjIwLCAyNDAsIDIwMClcbiAgICAgICAgTm90ZSBvdmVyIFVzdWFyaW8sRW1haWw6IEZhc2UgMjogUmVzZXQgZGUgQ29udHJhc2VcdTAwZjFhXG4gICAgICAgIFVzdWFyaW8tPj5Vc3VhcmlvOiAxNC4gQWJyZSBlbWFpbFxuICAgICAgICBVc3VhcmlvLT4+VUk6IDE1LiBDbGljayBsaW5rIHJlc2V0XG4gICAgICAgIFVJLT4+QVBJOiAxNi4gR0VUIC9yZXNldC1wYXNzd29yZC97dWlkfS97dG9rZW59XG4gICAgICAgIFxuICAgICAgICBBUEktPj5Ub2tlbjogMTcuIHZhbGlkYXRlX3Jlc2V0X3Rva2VuKClcbiAgICAgICAgXG4gICAgICAgIGFsdCBUb2tlbiB2XHUwMGUxbGlkb1xuICAgICAgICAgICAgVG9rZW4tLT4+QVBJOiBWYWxpZFxuICAgICAgICAgICAgQVBJLS0+PlVJOiAxOC4gU2hvdyByZXNldCBmb3JtXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFVzdWFyaW8tPj5VSTogMTkuIEluZ3Jlc2EgbnVldmEgcGFzc3dvcmRcbiAgICAgICAgICAgIFVJLT4+QVBJOiAyMC4gUE9TVCAvYXBpL2F1dGgvcmVzZXQtcGFzc3dvcmQ8YnIvPnt1aWQsIHRva2VuLCBuZXdfcGFzc3dvcmR9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEFQSS0+PlRva2VuOiAyMS4gdmVyaWZ5X3Rva2VuKClcbiAgICAgICAgICAgIEFQSS0+PkRCOiAyMi4gR2V0IHBhc3N3b3JkX2hpc3RvcnlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYWx0IFBhc3N3b3JkIG5vIHJldXRpbGl6YWRhXG4gICAgICAgICAgICAgICAgQVBJLT4+REI6IDIzLiBVUERBVEUgcGFzc3dvcmRcbiAgICAgICAgICAgICAgICBBUEktPj5EQjogMjQuIElOU0VSVCBwYXNzd29yZF9oaXN0b3J5XG4gICAgICAgICAgICAgICAgQVBJLT4+REI6IDI1LiBERUxFVEUgcmVzZXRfdG9rZW5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBBUEktLT4+VUk6IDI2LiAyMDAgT0tcbiAgICAgICAgICAgICAgICBVSS0tPj5Vc3VhcmlvOiAyNy4gXCJQYXNzd29yZCBhY3R1YWxpemFkb1wiXG4gICAgICAgICAgICAgICAgVUktPj5VSTogMjguIFJlZGlyZWN0IHRvIGxvZ2luXG4gICAgICAgICAgICBlbHNlIFBhc3N3b3JkIHlhIHVzYWRhXG4gICAgICAgICAgICAgICAgQVBJLS0+PlVJOiA0MDAgQmFkIFJlcXVlc3RcbiAgICAgICAgICAgICAgICBVSS0tPj5Vc3VhcmlvOiBcIlBhc3N3b3JkIHlhIHVzYWRhXCJcbiAgICAgICAgICAgIGVuZFxuICAgICAgICBlbHNlIFRva2VuIGludlx1MDBlMWxpZG8vZXhwaXJhZG9cbiAgICAgICAgICAgIFRva2VuLS0+PkFQSTogSW52YWxpZFxuICAgICAgICAgICAgQVBJLS0+PlVJOiA0MDAgQmFkIFJlcXVlc3RcbiAgICAgICAgICAgIFVJLS0+PlVzdWFyaW86IFwiTGluayBleHBpcmFkb1wiXG4gICAgICAgIGVuZFxuICAgIGVuZCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    sequenceDiagram
                        actor Usuario
                        participant UI as Frontend
                        participant API as Backend API
                        participant Token as Token<br/>Generator
                        participant DB as Database
                        participant Email as Email<br/>Service
                    
                        rect rgb(200, 220, 240)
                            Note over Usuario,Email: Fase 1: Solicitud de Reset
                            Usuario->>UI: 1. Click "Olvid√© mi contrase√±a"
                            UI->>UI: 2. Mostrar formulario
                            Usuario->>UI: 3. Ingresa email
                            UI->>API: 4. POST /api/auth/forgot-password<br/>{email}
                            
                            API->>DB: 5. Find user by email
                            
                            alt Usuario existe
                                DB-->>API: 6. Usuario data
                                API->>Token: 7. generate_reset_token()
                                Token-->>API: 8. {uid, token}
                                
                                API->>DB: 9. Store reset token
                                API->>Email: 10. send_reset_email(uid, token)
                                Email-->>API: 11. Email sent
                                
                                API-->>UI: 12. 200 OK
                                UI-->>Usuario: 13. "Revisa tu email"
                            else Usuario no existe
                                API-->>UI: 200 OK (por seguridad)
                                UI-->>Usuario: "Revisa tu email"
                            end
                        end
                    
                        rect rgb(220, 240, 200)
                            Note over Usuario,Email: Fase 2: Reset de Contrase√±a
                            Usuario->>Usuario: 14. Abre email
                            Usuario->>UI: 15. Click link reset
                            UI->>API: 16. GET /reset-password/{uid}/{token}
                            
                            API->>Token: 17. validate_reset_token()
                            
                            alt Token v√°lido
                                Token-->>API: Valid
                                API-->>UI: 18. Show reset form
                                
                                Usuario->>UI: 19. Ingresa nueva password
                                UI->>API: 20. POST /api/auth/reset-password<br/>{uid, token, new_password}
                                
                                API->>Token: 21. verify_token()
                                API->>DB: 22. Get password_history
                                
                                alt Password no reutilizada
                                    API->>DB: 23. UPDATE password
                                    API->>DB: 24. INSERT password_history
                                    API->>DB: 25. DELETE reset_token
                                    
                                    API-->>UI: 26. 200 OK
                                    UI-->>Usuario: 27. "Password actualizado"
                                    UI->>UI: 28. Redirect to login
                                else Password ya usada
                                    API-->>UI: 400 Bad Request
                                    UI-->>Usuario: "Password ya usada"
                                end
                            else Token inv√°lido/expirado
                                Token-->>API: Invalid
                                API-->>UI: 400 Bad Request
                                UI-->>Usuario: "Link expirado"
                            end
                        end

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    sequenceDiagram
                        actor Cliente
                        participant UI as Frontend
                        participant API as Backend API
                        participant Order as Order<br/>Service
                        participant Stock as Stock<br/>Service
                        participant DB as Database
                        participant Notif as Notification<br/>Service
                    
                        Cliente->>UI: 1. Agrega productos al carrito
                        Cliente->>UI: 2. Click "Confirmar pedido"
                        
                        UI->>UI: 3. Valida carrito no vac√≠o
                        UI->>API: 4. POST /api/pedidos<br/>{items: [{producto_id, cantidad}]}
                        
                        API->>Order: 5. create_order(items)
                        
                        loop Por cada item
                            Order->>Stock: 6. validate_stock(producto, cantidad)
                            Stock->>DB: 7. SELECT stock FROM productos
                            DB-->>Stock: 8. Stock actual
                            
                            alt Stock suficiente
                                Stock-->>Order: OK
                            else Stock insuficiente
                                Stock-->>Order: Stock insuficiente
                                Order-->>API: Error
                                API-->>UI: 400 Bad Request
                                UI-->>Cliente: "Stock insuficiente"
                            end
                        end
                        
                        Order->>DB: 9. BEGIN TRANSACTION
                        Order->>DB: 10. INSERT INTO pedidos
                        
                        loop Por cada item
                            Order->>DB: 11. INSERT INTO detalle_pedido
                            Order->>Stock: 12. reduce_stock(producto, cantidad)
                            Stock->>DB: 13. UPDATE stock
                        end
                        
                        Order->>Order: 14. calculate_total()
                        Order->>DB: 15. UPDATE pedido SET total
                        
                        Order->>DB: 16. COMMIT TRANSACTION
                        
                        Order->>Notif: 17. notify_order_created()
                        Notif->>Notif: 18. Create notifications
                        Notif-->>Order: OK
                        
                        Order-->>API: 19. Pedido creado
                        API-->>UI: 20. 201 Created {pedido}
                        UI-->>Cliente: 21. "Pedido creado exitosamente"
                        UI->>UI: 22. Redirect to pagos

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIGFjdG9yIENsaWVudGVcbiAgICBwYXJ0aWNpcGFudCBVSSBhcyBGcm9udGVuZFxuICAgIHBhcnRpY2lwYW50IEFQSSBhcyBCYWNrZW5kIEFQSVxuICAgIHBhcnRpY2lwYW50IE9yZGVyIGFzIE9yZGVyPGJyLz5TZXJ2aWNlXG4gICAgcGFydGljaXBhbnQgU3RvY2sgYXMgU3RvY2s8YnIvPlNlcnZpY2VcbiAgICBwYXJ0aWNpcGFudCBEQiBhcyBEYXRhYmFzZVxuICAgIHBhcnRpY2lwYW50IE5vdGlmIGFzIE5vdGlmaWNhdGlvbjxici8+U2VydmljZVxuXG4gICAgQ2xpZW50ZS0+PlVJOiAxLiBBZ3JlZ2EgcHJvZHVjdG9zIGFsIGNhcnJpdG9cbiAgICBDbGllbnRlLT4+VUk6IDIuIENsaWNrIFwiQ29uZmlybWFyIHBlZGlkb1wiXG4gICAgXG4gICAgVUktPj5VSTogMy4gVmFsaWRhIGNhcnJpdG8gbm8gdmFjXHUwMGVkb1xuICAgIFVJLT4+QVBJOiA0LiBQT1NUIC9hcGkvcGVkaWRvczxici8+e2l0ZW1zOiBbe3Byb2R1Y3RvX2lkLCBjYW50aWRhZH1dfVxuICAgIFxuICAgIEFQSS0+Pk9yZGVyOiA1LiBjcmVhdGVfb3JkZXIoaXRlbXMpXG4gICAgXG4gICAgbG9vcCBQb3IgY2FkYSBpdGVtXG4gICAgICAgIE9yZGVyLT4+U3RvY2s6IDYuIHZhbGlkYXRlX3N0b2NrKHByb2R1Y3RvLCBjYW50aWRhZClcbiAgICAgICAgU3RvY2stPj5EQjogNy4gU0VMRUNUIHN0b2NrIEZST00gcHJvZHVjdG9zXG4gICAgICAgIERCLS0+PlN0b2NrOiA4LiBTdG9jayBhY3R1YWxcbiAgICAgICAgXG4gICAgICAgIGFsdCBTdG9jayBzdWZpY2llbnRlXG4gICAgICAgICAgICBTdG9jay0tPj5PcmRlcjogT0tcbiAgICAgICAgZWxzZSBTdG9jayBpbnN1ZmljaWVudGVcbiAgICAgICAgICAgIFN0b2NrLS0+Pk9yZGVyOiBTdG9jayBpbnN1ZmljaWVudGVcbiAgICAgICAgICAgIE9yZGVyLS0+PkFQSTogRXJyb3JcbiAgICAgICAgICAgIEFQSS0tPj5VSTogNDAwIEJhZCBSZXF1ZXN0XG4gICAgICAgICAgICBVSS0tPj5DbGllbnRlOiBcIlN0b2NrIGluc3VmaWNpZW50ZVwiXG4gICAgICAgIGVuZFxuICAgIGVuZFxuICAgIFxuICAgIE9yZGVyLT4+REI6IDkuIEJFR0lOIFRSQU5TQUNUSU9OXG4gICAgT3JkZXItPj5EQjogMTAuIElOU0VSVCBJTlRPIHBlZGlkb3NcbiAgICBcbiAgICBsb29wIFBvciBjYWRhIGl0ZW1cbiAgICAgICAgT3JkZXItPj5EQjogMTEuIElOU0VSVCBJTlRPIGRldGFsbGVfcGVkaWRvXG4gICAgICAgIE9yZGVyLT4+U3RvY2s6IDEyLiByZWR1Y2Vfc3RvY2socHJvZHVjdG8sIGNhbnRpZGFkKVxuICAgICAgICBTdG9jay0+PkRCOiAxMy4gVVBEQVRFIHN0b2NrXG4gICAgZW5kXG4gICAgXG4gICAgT3JkZXItPj5PcmRlcjogMTQuIGNhbGN1bGF0ZV90b3RhbCgpXG4gICAgT3JkZXItPj5EQjogMTUuIFVQREFURSBwZWRpZG8gU0VUIHRvdGFsXG4gICAgXG4gICAgT3JkZXItPj5EQjogMTYuIENPTU1JVCBUUkFOU0FDVElPTlxuICAgIFxuICAgIE9yZGVyLT4+Tm90aWY6IDE3LiBub3RpZnlfb3JkZXJfY3JlYXRlZCgpXG4gICAgTm90aWYtPj5Ob3RpZjogMTguIENyZWF0ZSBub3RpZmljYXRpb25zXG4gICAgTm90aWYtLT4+T3JkZXI6IE9LXG4gICAgXG4gICAgT3JkZXItLT4+QVBJOiAxOS4gUGVkaWRvIGNyZWFkb1xuICAgIEFQSS0tPj5VSTogMjAuIDIwMSBDcmVhdGVkIHtwZWRpZG99XG4gICAgVUktLT4+Q2xpZW50ZTogMjEuIFwiUGVkaWRvIGNyZWFkbyBleGl0b3NhbWVudGVcIlxuICAgIFVJLT4+VUk6IDIyLiBSZWRpcmVjdCB0byBwYWdvcyIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIGFjdG9yIENsaWVudGVcbiAgICBwYXJ0aWNpcGFudCBVSSBhcyBGcm9udGVuZFxuICAgIHBhcnRpY2lwYW50IEFQSSBhcyBCYWNrZW5kIEFQSVxuICAgIHBhcnRpY2lwYW50IE9yZGVyIGFzIE9yZGVyPGJyLz5TZXJ2aWNlXG4gICAgcGFydGljaXBhbnQgU3RvY2sgYXMgU3RvY2s8YnIvPlNlcnZpY2VcbiAgICBwYXJ0aWNpcGFudCBEQiBhcyBEYXRhYmFzZVxuICAgIHBhcnRpY2lwYW50IE5vdGlmIGFzIE5vdGlmaWNhdGlvbjxici8+U2VydmljZVxuXG4gICAgQ2xpZW50ZS0+PlVJOiAxLiBBZ3JlZ2EgcHJvZHVjdG9zIGFsIGNhcnJpdG9cbiAgICBDbGllbnRlLT4+VUk6IDIuIENsaWNrIFwiQ29uZmlybWFyIHBlZGlkb1wiXG4gICAgXG4gICAgVUktPj5VSTogMy4gVmFsaWRhIGNhcnJpdG8gbm8gdmFjXHUwMGVkb1xuICAgIFVJLT4+QVBJOiA0LiBQT1NUIC9hcGkvcGVkaWRvczxici8+e2l0ZW1zOiBbe3Byb2R1Y3RvX2lkLCBjYW50aWRhZH1dfVxuICAgIFxuICAgIEFQSS0+Pk9yZGVyOiA1LiBjcmVhdGVfb3JkZXIoaXRlbXMpXG4gICAgXG4gICAgbG9vcCBQb3IgY2FkYSBpdGVtXG4gICAgICAgIE9yZGVyLT4+U3RvY2s6IDYuIHZhbGlkYXRlX3N0b2NrKHByb2R1Y3RvLCBjYW50aWRhZClcbiAgICAgICAgU3RvY2stPj5EQjogNy4gU0VMRUNUIHN0b2NrIEZST00gcHJvZHVjdG9zXG4gICAgICAgIERCLS0+PlN0b2NrOiA4LiBTdG9jayBhY3R1YWxcbiAgICAgICAgXG4gICAgICAgIGFsdCBTdG9jayBzdWZpY2llbnRlXG4gICAgICAgICAgICBTdG9jay0tPj5PcmRlcjogT0tcbiAgICAgICAgZWxzZSBTdG9jayBpbnN1ZmljaWVudGVcbiAgICAgICAgICAgIFN0b2NrLS0+Pk9yZGVyOiBTdG9jayBpbnN1ZmljaWVudGVcbiAgICAgICAgICAgIE9yZGVyLS0+PkFQSTogRXJyb3JcbiAgICAgICAgICAgIEFQSS0tPj5VSTogNDAwIEJhZCBSZXF1ZXN0XG4gICAgICAgICAgICBVSS0tPj5DbGllbnRlOiBcIlN0b2NrIGluc3VmaWNpZW50ZVwiXG4gICAgICAgIGVuZFxuICAgIGVuZFxuICAgIFxuICAgIE9yZGVyLT4+REI6IDkuIEJFR0lOIFRSQU5TQUNUSU9OXG4gICAgT3JkZXItPj5EQjogMTAuIElOU0VSVCBJTlRPIHBlZGlkb3NcbiAgICBcbiAgICBsb29wIFBvciBjYWRhIGl0ZW1cbiAgICAgICAgT3JkZXItPj5EQjogMTEuIElOU0VSVCBJTlRPIGRldGFsbGVfcGVkaWRvXG4gICAgICAgIE9yZGVyLT4+U3RvY2s6IDEyLiByZWR1Y2Vfc3RvY2socHJvZHVjdG8sIGNhbnRpZGFkKVxuICAgICAgICBTdG9jay0+PkRCOiAxMy4gVVBEQVRFIHN0b2NrXG4gICAgZW5kXG4gICAgXG4gICAgT3JkZXItPj5PcmRlcjogMTQuIGNhbGN1bGF0ZV90b3RhbCgpXG4gICAgT3JkZXItPj5EQjogMTUuIFVQREFURSBwZWRpZG8gU0VUIHRvdGFsXG4gICAgXG4gICAgT3JkZXItPj5EQjogMTYuIENPTU1JVCBUUkFOU0FDVElPTlxuICAgIFxuICAgIE9yZGVyLT4+Tm90aWY6IDE3LiBub3RpZnlfb3JkZXJfY3JlYXRlZCgpXG4gICAgTm90aWYtPj5Ob3RpZjogMTguIENyZWF0ZSBub3RpZmljYXRpb25zXG4gICAgTm90aWYtLT4+T3JkZXI6IE9LXG4gICAgXG4gICAgT3JkZXItLT4+QVBJOiAxOS4gUGVkaWRvIGNyZWFkb1xuICAgIEFQSS0tPj5VSTogMjAuIDIwMSBDcmVhdGVkIHtwZWRpZG99XG4gICAgVUktLT4+Q2xpZW50ZTogMjEuIFwiUGVkaWRvIGNyZWFkbyBleGl0b3NhbWVudGVcIlxuICAgIFVJLT4+VUk6IDIyLiBSZWRpcmVjdCB0byBwYWdvcyIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    sequenceDiagram
                        actor Cliente
                        participant UI as Frontend
                        participant API as Backend API
                        participant Order as Order<br/>Service
                        participant Stock as Stock<br/>Service
                        participant DB as Database
                        participant Notif as Notification<br/>Service
                    
                        Cliente->>UI: 1. Agrega productos al carrito
                        Cliente->>UI: 2. Click "Confirmar pedido"
                        
                        UI->>UI: 3. Valida carrito no vac√≠o
                        UI->>API: 4. POST /api/pedidos<br/>{items: [{producto_id, cantidad}]}
                        
                        API->>Order: 5. create_order(items)
                        
                        loop Por cada item
                            Order->>Stock: 6. validate_stock(producto, cantidad)
                            Stock->>DB: 7. SELECT stock FROM productos
                            DB-->>Stock: 8. Stock actual
                            
                            alt Stock suficiente
                                Stock-->>Order: OK
                            else Stock insuficiente
                                Stock-->>Order: Stock insuficiente
                                Order-->>API: Error
                                API-->>UI: 400 Bad Request
                                UI-->>Cliente: "Stock insuficiente"
                            end
                        end
                        
                        Order->>DB: 9. BEGIN TRANSACTION
                        Order->>DB: 10. INSERT INTO pedidos
                        
                        loop Por cada item
                            Order->>DB: 11. INSERT INTO detalle_pedido
                            Order->>Stock: 12. reduce_stock(producto, cantidad)
                            Stock->>DB: 13. UPDATE stock
                        end
                        
                        Order->>Order: 14. calculate_total()
                        Order->>DB: 15. UPDATE pedido SET total
                        
                        Order->>DB: 16. COMMIT TRANSACTION
                        
                        Order->>Notif: 17. notify_order_created()
                        Notif->>Notif: 18. Create notifications
                        Notif-->>Order: OK
                        
                        Order-->>API: 19. Pedido creado
                        API-->>UI: 20. 201 Created {pedido}
                        UI-->>Cliente: 21. "Pedido creado exitosamente"
                        UI->>UI: 22. Redirect to pagos

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    sequenceDiagram
                        actor Logistica
                        participant UI as Frontend
                        participant API as Backend API
                        participant Order as Order<br/>Service
                        participant DB as Database
                        participant Venta as Venta<br/>Service
                        participant Notif as Notification<br/>Service
                    
                        Logistica->>UI: 1. Selecciona pedido
                        Logistica->>UI: 2. Click "Cambiar estado"
                        
                        UI->>API: 3. PATCH /api/pedidos/{id}<br/>{estado: "nuevo_estado"}
                        
                        API->>Order: 4. update_status(pedido_id, nuevo_estado)
                        Order->>DB: 5. SELECT pedido WHERE id=?
                        DB-->>Order: 6. Pedido actual
                        
                        Order->>Order: 7. validate_transition()
                        
                        alt Transici√≥n v√°lida
                            Order->>DB: 8. UPDATE pedido SET estado
                            DB-->>Order: 9. Updated
                            
                            alt Estado = "entregado"
                                Order->>Venta: 10. create_venta(pedido)
                                Venta->>DB: 11. INSERT INTO ventas
                                Venta->>DB: 12. INSERT INTO detalle_ventas
                                Venta-->>Order: 13. Venta creada
                            end
                            
                            Order->>Notif: 14. notify_status_change()
                            Notif->>Notif: 15. Send email to cliente
                            Notif-->>Order: 16. Notification sent
                            
                            Order-->>API: 17. Pedido actualizado
                            API-->>UI: 18. 200 OK {pedido}
                            UI-->>Logistica: 19. "Estado actualizado"
                        else Transici√≥n inv√°lida
                            Order-->>API: Error: Invalid transition
                            API-->>UI: 400 Bad Request
                            UI-->>Logistica: "Transici√≥n no permitida"
                        end

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIGFjdG9yIExvZ2lzdGljYVxuICAgIHBhcnRpY2lwYW50IFVJIGFzIEZyb250ZW5kXG4gICAgcGFydGljaXBhbnQgQVBJIGFzIEJhY2tlbmQgQVBJXG4gICAgcGFydGljaXBhbnQgT3JkZXIgYXMgT3JkZXI8YnIvPlNlcnZpY2VcbiAgICBwYXJ0aWNpcGFudCBEQiBhcyBEYXRhYmFzZVxuICAgIHBhcnRpY2lwYW50IFZlbnRhIGFzIFZlbnRhPGJyLz5TZXJ2aWNlXG4gICAgcGFydGljaXBhbnQgTm90aWYgYXMgTm90aWZpY2F0aW9uPGJyLz5TZXJ2aWNlXG5cbiAgICBMb2dpc3RpY2EtPj5VSTogMS4gU2VsZWNjaW9uYSBwZWRpZG9cbiAgICBMb2dpc3RpY2EtPj5VSTogMi4gQ2xpY2sgXCJDYW1iaWFyIGVzdGFkb1wiXG4gICAgXG4gICAgVUktPj5BUEk6IDMuIFBBVENIIC9hcGkvcGVkaWRvcy97aWR9PGJyLz57ZXN0YWRvOiBcIm51ZXZvX2VzdGFkb1wifVxuICAgIFxuICAgIEFQSS0+Pk9yZGVyOiA0LiB1cGRhdGVfc3RhdHVzKHBlZGlkb19pZCwgbnVldm9fZXN0YWRvKVxuICAgIE9yZGVyLT4+REI6IDUuIFNFTEVDVCBwZWRpZG8gV0hFUkUgaWQ9P1xuICAgIERCLS0+Pk9yZGVyOiA2LiBQZWRpZG8gYWN0dWFsXG4gICAgXG4gICAgT3JkZXItPj5PcmRlcjogNy4gdmFsaWRhdGVfdHJhbnNpdGlvbigpXG4gICAgXG4gICAgYWx0IFRyYW5zaWNpXHUwMGYzbiB2XHUwMGUxbGlkYVxuICAgICAgICBPcmRlci0+PkRCOiA4LiBVUERBVEUgcGVkaWRvIFNFVCBlc3RhZG9cbiAgICAgICAgREItLT4+T3JkZXI6IDkuIFVwZGF0ZWRcbiAgICAgICAgXG4gICAgICAgIGFsdCBFc3RhZG8gPSBcImVudHJlZ2Fkb1wiXG4gICAgICAgICAgICBPcmRlci0+PlZlbnRhOiAxMC4gY3JlYXRlX3ZlbnRhKHBlZGlkbylcbiAgICAgICAgICAgIFZlbnRhLT4+REI6IDExLiBJTlNFUlQgSU5UTyB2ZW50YXNcbiAgICAgICAgICAgIFZlbnRhLT4+REI6IDEyLiBJTlNFUlQgSU5UTyBkZXRhbGxlX3ZlbnRhc1xuICAgICAgICAgICAgVmVudGEtLT4+T3JkZXI6IDEzLiBWZW50YSBjcmVhZGFcbiAgICAgICAgZW5kXG4gICAgICAgIFxuICAgICAgICBPcmRlci0+Pk5vdGlmOiAxNC4gbm90aWZ5X3N0YXR1c19jaGFuZ2UoKVxuICAgICAgICBOb3RpZi0+Pk5vdGlmOiAxNS4gU2VuZCBlbWFpbCB0byBjbGllbnRlXG4gICAgICAgIE5vdGlmLS0+Pk9yZGVyOiAxNi4gTm90aWZpY2F0aW9uIHNlbnRcbiAgICAgICAgXG4gICAgICAgIE9yZGVyLS0+PkFQSTogMTcuIFBlZGlkbyBhY3R1YWxpemFkb1xuICAgICAgICBBUEktLT4+VUk6IDE4LiAyMDAgT0sge3BlZGlkb31cbiAgICAgICAgVUktLT4+TG9naXN0aWNhOiAxOS4gXCJFc3RhZG8gYWN0dWFsaXphZG9cIlxuICAgIGVsc2UgVHJhbnNpY2lcdTAwZjNuIGludlx1MDBlMWxpZGFcbiAgICAgICAgT3JkZXItLT4+QVBJOiBFcnJvcjogSW52YWxpZCB0cmFuc2l0aW9uXG4gICAgICAgIEFQSS0tPj5VSTogNDAwIEJhZCBSZXF1ZXN0XG4gICAgICAgIFVJLS0+PkxvZ2lzdGljYTogXCJUcmFuc2ljaVx1MDBmM24gbm8gcGVybWl0aWRhXCJcbiAgICBlbmQiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIGFjdG9yIExvZ2lzdGljYVxuICAgIHBhcnRpY2lwYW50IFVJIGFzIEZyb250ZW5kXG4gICAgcGFydGljaXBhbnQgQVBJIGFzIEJhY2tlbmQgQVBJXG4gICAgcGFydGljaXBhbnQgT3JkZXIgYXMgT3JkZXI8YnIvPlNlcnZpY2VcbiAgICBwYXJ0aWNpcGFudCBEQiBhcyBEYXRhYmFzZVxuICAgIHBhcnRpY2lwYW50IFZlbnRhIGFzIFZlbnRhPGJyLz5TZXJ2aWNlXG4gICAgcGFydGljaXBhbnQgTm90aWYgYXMgTm90aWZpY2F0aW9uPGJyLz5TZXJ2aWNlXG5cbiAgICBMb2dpc3RpY2EtPj5VSTogMS4gU2VsZWNjaW9uYSBwZWRpZG9cbiAgICBMb2dpc3RpY2EtPj5VSTogMi4gQ2xpY2sgXCJDYW1iaWFyIGVzdGFkb1wiXG4gICAgXG4gICAgVUktPj5BUEk6IDMuIFBBVENIIC9hcGkvcGVkaWRvcy97aWR9PGJyLz57ZXN0YWRvOiBcIm51ZXZvX2VzdGFkb1wifVxuICAgIFxuICAgIEFQSS0+Pk9yZGVyOiA0LiB1cGRhdGVfc3RhdHVzKHBlZGlkb19pZCwgbnVldm9fZXN0YWRvKVxuICAgIE9yZGVyLT4+REI6IDUuIFNFTEVDVCBwZWRpZG8gV0hFUkUgaWQ9P1xuICAgIERCLS0+Pk9yZGVyOiA2LiBQZWRpZG8gYWN0dWFsXG4gICAgXG4gICAgT3JkZXItPj5PcmRlcjogNy4gdmFsaWRhdGVfdHJhbnNpdGlvbigpXG4gICAgXG4gICAgYWx0IFRyYW5zaWNpXHUwMGYzbiB2XHUwMGUxbGlkYVxuICAgICAgICBPcmRlci0+PkRCOiA4LiBVUERBVEUgcGVkaWRvIFNFVCBlc3RhZG9cbiAgICAgICAgREItLT4+T3JkZXI6IDkuIFVwZGF0ZWRcbiAgICAgICAgXG4gICAgICAgIGFsdCBFc3RhZG8gPSBcImVudHJlZ2Fkb1wiXG4gICAgICAgICAgICBPcmRlci0+PlZlbnRhOiAxMC4gY3JlYXRlX3ZlbnRhKHBlZGlkbylcbiAgICAgICAgICAgIFZlbnRhLT4+REI6IDExLiBJTlNFUlQgSU5UTyB2ZW50YXNcbiAgICAgICAgICAgIFZlbnRhLT4+REI6IDEyLiBJTlNFUlQgSU5UTyBkZXRhbGxlX3ZlbnRhc1xuICAgICAgICAgICAgVmVudGEtLT4+T3JkZXI6IDEzLiBWZW50YSBjcmVhZGFcbiAgICAgICAgZW5kXG4gICAgICAgIFxuICAgICAgICBPcmRlci0+Pk5vdGlmOiAxNC4gbm90aWZ5X3N0YXR1c19jaGFuZ2UoKVxuICAgICAgICBOb3RpZi0+Pk5vdGlmOiAxNS4gU2VuZCBlbWFpbCB0byBjbGllbnRlXG4gICAgICAgIE5vdGlmLS0+Pk9yZGVyOiAxNi4gTm90aWZpY2F0aW9uIHNlbnRcbiAgICAgICAgXG4gICAgICAgIE9yZGVyLS0+PkFQSTogMTcuIFBlZGlkbyBhY3R1YWxpemFkb1xuICAgICAgICBBUEktLT4+VUk6IDE4LiAyMDAgT0sge3BlZGlkb31cbiAgICAgICAgVUktLT4+TG9naXN0aWNhOiAxOS4gXCJFc3RhZG8gYWN0dWFsaXphZG9cIlxuICAgIGVsc2UgVHJhbnNpY2lcdTAwZjNuIGludlx1MDBlMWxpZGFcbiAgICAgICAgT3JkZXItLT4+QVBJOiBFcnJvcjogSW52YWxpZCB0cmFuc2l0aW9uXG4gICAgICAgIEFQSS0tPj5VSTogNDAwIEJhZCBSZXF1ZXN0XG4gICAgICAgIFVJLS0+PkxvZ2lzdGljYTogXCJUcmFuc2ljaVx1MDBmM24gbm8gcGVybWl0aWRhXCJcbiAgICBlbmQiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    sequenceDiagram
                        actor Logistica
                        participant UI as Frontend
                        participant API as Backend API
                        participant Order as Order<br/>Service
                        participant DB as Database
                        participant Venta as Venta<br/>Service
                        participant Notif as Notification<br/>Service
                    
                        Logistica->>UI: 1. Selecciona pedido
                        Logistica->>UI: 2. Click "Cambiar estado"
                        
                        UI->>API: 3. PATCH /api/pedidos/{id}<br/>{estado: "nuevo_estado"}
                        
                        API->>Order: 4. update_status(pedido_id, nuevo_estado)
                        Order->>DB: 5. SELECT pedido WHERE id=?
                        DB-->>Order: 6. Pedido actual
                        
                        Order->>Order: 7. validate_transition()
                        
                        alt Transici√≥n v√°lida
                            Order->>DB: 8. UPDATE pedido SET estado
                            DB-->>Order: 9. Updated
                            
                            alt Estado = "entregado"
                                Order->>Venta: 10. create_venta(pedido)
                                Venta->>DB: 11. INSERT INTO ventas
                                Venta->>DB: 12. INSERT INTO detalle_ventas
                                Venta-->>Order: 13. Venta creada
                            end
                            
                            Order->>Notif: 14. notify_status_change()
                            Notif->>Notif: 15. Send email to cliente
                            Notif-->>Order: 16. Notification sent
                            
                            Order-->>API: 17. Pedido actualizado
                            API-->>UI: 18. 200 OK {pedido}
                            UI-->>Logistica: 19. "Estado actualizado"
                        else Transici√≥n inv√°lida
                            Order-->>API: Error: Invalid transition
                            API-->>UI: 400 Bad Request
                            UI-->>Logistica: "Transici√≥n no permitida"
                        end

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    sequenceDiagram
                        actor Cliente
                        participant UI as Frontend
                        participant API as Backend API
                        participant Payment as Payment<br/>Service
                        participant Gateway as Payment<br/>Gateway
                        participant DB as Database
                        participant Order as Order<br/>Service
                        participant Notif as Notification<br/>Service
                    
                        Cliente->>UI: 1. Selecciona m√©todo pago
                        Cliente->>UI: 2. Ingresa datos tarjeta
                        
                        UI->>UI: 3. Valida formato tarjeta
                        UI->>API: 4. POST /api/pagos<br/>{pedido_id, metodo, datos}
                        
                        API->>Payment: 5. process_payment()
                        Payment->>DB: 6. Get pedido details
                        DB-->>Payment: 7. Pedido data
                        
                        Payment->>Gateway: 8. charge_card(amount, card_data)
                        Gateway->>Gateway: 9. Process transaction
                        
                        alt Pago aprobado
                            Gateway-->>Payment: 10. {status: approved, ref: XXX}
                            
                            Payment->>DB: 11. BEGIN TRANSACTION
                            Payment->>DB: 12. INSERT INTO pagos
                            Payment->>DB: 13. INSERT INTO transacciones
                            Payment->>DB: 14. COMMIT
                            
                            Payment->>Order: 15. confirm_payment(pedido_id)
                            Order->>DB: 16. UPDATE pedido SET estado='pendiente'
                            Order-->>Payment: 17. OK
                            
                            Payment->>Notif: 18. notify_payment_success()
                            Notif->>Notif: 19. Send confirmation email
                            Notif-->>Payment: 20. Sent
                            
                            Payment-->>API: 21. Payment successful
                            API-->>UI: 22. 200 OK {pago}
                            UI-->>Cliente: 23. "Pago exitoso"
                            UI->>UI: 24. Show confirmation
                            
                        else Pago rechazado
                            Gateway-->>Payment: {status: declined, reason}
                            
                            Payment->>DB: INSERT failed transaction
                            Payment-->>API: Payment declined
                            API-->>UI: 402 Payment Required
                            UI-->>Cliente: "Pago rechazado"
                            UI->>UI: Retry option
                            
                        else Error de gateway
                            Gateway-->>Payment: Error
                            Payment->>DB: Log error
                            Payment-->>API: Gateway error
                            API-->>UI: 500 Server Error
                            UI-->>Cliente: "Error procesando pago"
                            UI->>UI: Contact support
                        end

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIGFjdG9yIENsaWVudGVcbiAgICBwYXJ0aWNpcGFudCBVSSBhcyBGcm9udGVuZFxuICAgIHBhcnRpY2lwYW50IEFQSSBhcyBCYWNrZW5kIEFQSVxuICAgIHBhcnRpY2lwYW50IFBheW1lbnQgYXMgUGF5bWVudDxici8+U2VydmljZVxuICAgIHBhcnRpY2lwYW50IEdhdGV3YXkgYXMgUGF5bWVudDxici8+R2F0ZXdheVxuICAgIHBhcnRpY2lwYW50IERCIGFzIERhdGFiYXNlXG4gICAgcGFydGljaXBhbnQgT3JkZXIgYXMgT3JkZXI8YnIvPlNlcnZpY2VcbiAgICBwYXJ0aWNpcGFudCBOb3RpZiBhcyBOb3RpZmljYXRpb248YnIvPlNlcnZpY2VcblxuICAgIENsaWVudGUtPj5VSTogMS4gU2VsZWNjaW9uYSBtXHUwMGU5dG9kbyBwYWdvXG4gICAgQ2xpZW50ZS0+PlVJOiAyLiBJbmdyZXNhIGRhdG9zIHRhcmpldGFcbiAgICBcbiAgICBVSS0+PlVJOiAzLiBWYWxpZGEgZm9ybWF0byB0YXJqZXRhXG4gICAgVUktPj5BUEk6IDQuIFBPU1QgL2FwaS9wYWdvczxici8+e3BlZGlkb19pZCwgbWV0b2RvLCBkYXRvc31cbiAgICBcbiAgICBBUEktPj5QYXltZW50OiA1LiBwcm9jZXNzX3BheW1lbnQoKVxuICAgIFBheW1lbnQtPj5EQjogNi4gR2V0IHBlZGlkbyBkZXRhaWxzXG4gICAgREItLT4+UGF5bWVudDogNy4gUGVkaWRvIGRhdGFcbiAgICBcbiAgICBQYXltZW50LT4+R2F0ZXdheTogOC4gY2hhcmdlX2NhcmQoYW1vdW50LCBjYXJkX2RhdGEpXG4gICAgR2F0ZXdheS0+PkdhdGV3YXk6IDkuIFByb2Nlc3MgdHJhbnNhY3Rpb25cbiAgICBcbiAgICBhbHQgUGFnbyBhcHJvYmFkb1xuICAgICAgICBHYXRld2F5LS0+PlBheW1lbnQ6IDEwLiB7c3RhdHVzOiBhcHByb3ZlZCwgcmVmOiBYWFh9XG4gICAgICAgIFxuICAgICAgICBQYXltZW50LT4+REI6IDExLiBCRUdJTiBUUkFOU0FDVElPTlxuICAgICAgICBQYXltZW50LT4+REI6IDEyLiBJTlNFUlQgSU5UTyBwYWdvc1xuICAgICAgICBQYXltZW50LT4+REI6IDEzLiBJTlNFUlQgSU5UTyB0cmFuc2FjY2lvbmVzXG4gICAgICAgIFBheW1lbnQtPj5EQjogMTQuIENPTU1JVFxuICAgICAgICBcbiAgICAgICAgUGF5bWVudC0+Pk9yZGVyOiAxNS4gY29uZmlybV9wYXltZW50KHBlZGlkb19pZClcbiAgICAgICAgT3JkZXItPj5EQjogMTYuIFVQREFURSBwZWRpZG8gU0VUIGVzdGFkbz0ncGVuZGllbnRlJ1xuICAgICAgICBPcmRlci0tPj5QYXltZW50OiAxNy4gT0tcbiAgICAgICAgXG4gICAgICAgIFBheW1lbnQtPj5Ob3RpZjogMTguIG5vdGlmeV9wYXltZW50X3N1Y2Nlc3MoKVxuICAgICAgICBOb3RpZi0+Pk5vdGlmOiAxOS4gU2VuZCBjb25maXJtYXRpb24gZW1haWxcbiAgICAgICAgTm90aWYtLT4+UGF5bWVudDogMjAuIFNlbnRcbiAgICAgICAgXG4gICAgICAgIFBheW1lbnQtLT4+QVBJOiAyMS4gUGF5bWVudCBzdWNjZXNzZnVsXG4gICAgICAgIEFQSS0tPj5VSTogMjIuIDIwMCBPSyB7cGFnb31cbiAgICAgICAgVUktLT4+Q2xpZW50ZTogMjMuIFwiUGFnbyBleGl0b3NvXCJcbiAgICAgICAgVUktPj5VSTogMjQuIFNob3cgY29uZmlybWF0aW9uXG4gICAgICAgIFxuICAgIGVsc2UgUGFnbyByZWNoYXphZG9cbiAgICAgICAgR2F0ZXdheS0tPj5QYXltZW50OiB7c3RhdHVzOiBkZWNsaW5lZCwgcmVhc29ufVxuICAgICAgICBcbiAgICAgICAgUGF5bWVudC0+PkRCOiBJTlNFUlQgZmFpbGVkIHRyYW5zYWN0aW9uXG4gICAgICAgIFBheW1lbnQtLT4+QVBJOiBQYXltZW50IGRlY2xpbmVkXG4gICAgICAgIEFQSS0tPj5VSTogNDAyIFBheW1lbnQgUmVxdWlyZWRcbiAgICAgICAgVUktLT4+Q2xpZW50ZTogXCJQYWdvIHJlY2hhemFkb1wiXG4gICAgICAgIFVJLT4+VUk6IFJldHJ5IG9wdGlvblxuICAgICAgICBcbiAgICBlbHNlIEVycm9yIGRlIGdhdGV3YXlcbiAgICAgICAgR2F0ZXdheS0tPj5QYXltZW50OiBFcnJvclxuICAgICAgICBQYXltZW50LT4+REI6IExvZyBlcnJvclxuICAgICAgICBQYXltZW50LS0+PkFQSTogR2F0ZXdheSBlcnJvclxuICAgICAgICBBUEktLT4+VUk6IDUwMCBTZXJ2ZXIgRXJyb3JcbiAgICAgICAgVUktLT4+Q2xpZW50ZTogXCJFcnJvciBwcm9jZXNhbmRvIHBhZ29cIlxuICAgICAgICBVSS0+PlVJOiBDb250YWN0IHN1cHBvcnRcbiAgICBlbmQiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIGFjdG9yIENsaWVudGVcbiAgICBwYXJ0aWNpcGFudCBVSSBhcyBGcm9udGVuZFxuICAgIHBhcnRpY2lwYW50IEFQSSBhcyBCYWNrZW5kIEFQSVxuICAgIHBhcnRpY2lwYW50IFBheW1lbnQgYXMgUGF5bWVudDxici8+U2VydmljZVxuICAgIHBhcnRpY2lwYW50IEdhdGV3YXkgYXMgUGF5bWVudDxici8+R2F0ZXdheVxuICAgIHBhcnRpY2lwYW50IERCIGFzIERhdGFiYXNlXG4gICAgcGFydGljaXBhbnQgT3JkZXIgYXMgT3JkZXI8YnIvPlNlcnZpY2VcbiAgICBwYXJ0aWNpcGFudCBOb3RpZiBhcyBOb3RpZmljYXRpb248YnIvPlNlcnZpY2VcblxuICAgIENsaWVudGUtPj5VSTogMS4gU2VsZWNjaW9uYSBtXHUwMGU5dG9kbyBwYWdvXG4gICAgQ2xpZW50ZS0+PlVJOiAyLiBJbmdyZXNhIGRhdG9zIHRhcmpldGFcbiAgICBcbiAgICBVSS0+PlVJOiAzLiBWYWxpZGEgZm9ybWF0byB0YXJqZXRhXG4gICAgVUktPj5BUEk6IDQuIFBPU1QgL2FwaS9wYWdvczxici8+e3BlZGlkb19pZCwgbWV0b2RvLCBkYXRvc31cbiAgICBcbiAgICBBUEktPj5QYXltZW50OiA1LiBwcm9jZXNzX3BheW1lbnQoKVxuICAgIFBheW1lbnQtPj5EQjogNi4gR2V0IHBlZGlkbyBkZXRhaWxzXG4gICAgREItLT4+UGF5bWVudDogNy4gUGVkaWRvIGRhdGFcbiAgICBcbiAgICBQYXltZW50LT4+R2F0ZXdheTogOC4gY2hhcmdlX2NhcmQoYW1vdW50LCBjYXJkX2RhdGEpXG4gICAgR2F0ZXdheS0+PkdhdGV3YXk6IDkuIFByb2Nlc3MgdHJhbnNhY3Rpb25cbiAgICBcbiAgICBhbHQgUGFnbyBhcHJvYmFkb1xuICAgICAgICBHYXRld2F5LS0+PlBheW1lbnQ6IDEwLiB7c3RhdHVzOiBhcHByb3ZlZCwgcmVmOiBYWFh9XG4gICAgICAgIFxuICAgICAgICBQYXltZW50LT4+REI6IDExLiBCRUdJTiBUUkFOU0FDVElPTlxuICAgICAgICBQYXltZW50LT4+REI6IDEyLiBJTlNFUlQgSU5UTyBwYWdvc1xuICAgICAgICBQYXltZW50LT4+REI6IDEzLiBJTlNFUlQgSU5UTyB0cmFuc2FjY2lvbmVzXG4gICAgICAgIFBheW1lbnQtPj5EQjogMTQuIENPTU1JVFxuICAgICAgICBcbiAgICAgICAgUGF5bWVudC0+Pk9yZGVyOiAxNS4gY29uZmlybV9wYXltZW50KHBlZGlkb19pZClcbiAgICAgICAgT3JkZXItPj5EQjogMTYuIFVQREFURSBwZWRpZG8gU0VUIGVzdGFkbz0ncGVuZGllbnRlJ1xuICAgICAgICBPcmRlci0tPj5QYXltZW50OiAxNy4gT0tcbiAgICAgICAgXG4gICAgICAgIFBheW1lbnQtPj5Ob3RpZjogMTguIG5vdGlmeV9wYXltZW50X3N1Y2Nlc3MoKVxuICAgICAgICBOb3RpZi0+Pk5vdGlmOiAxOS4gU2VuZCBjb25maXJtYXRpb24gZW1haWxcbiAgICAgICAgTm90aWYtLT4+UGF5bWVudDogMjAuIFNlbnRcbiAgICAgICAgXG4gICAgICAgIFBheW1lbnQtLT4+QVBJOiAyMS4gUGF5bWVudCBzdWNjZXNzZnVsXG4gICAgICAgIEFQSS0tPj5VSTogMjIuIDIwMCBPSyB7cGFnb31cbiAgICAgICAgVUktLT4+Q2xpZW50ZTogMjMuIFwiUGFnbyBleGl0b3NvXCJcbiAgICAgICAgVUktPj5VSTogMjQuIFNob3cgY29uZmlybWF0aW9uXG4gICAgICAgIFxuICAgIGVsc2UgUGFnbyByZWNoYXphZG9cbiAgICAgICAgR2F0ZXdheS0tPj5QYXltZW50OiB7c3RhdHVzOiBkZWNsaW5lZCwgcmVhc29ufVxuICAgICAgICBcbiAgICAgICAgUGF5bWVudC0+PkRCOiBJTlNFUlQgZmFpbGVkIHRyYW5zYWN0aW9uXG4gICAgICAgIFBheW1lbnQtLT4+QVBJOiBQYXltZW50IGRlY2xpbmVkXG4gICAgICAgIEFQSS0tPj5VSTogNDAyIFBheW1lbnQgUmVxdWlyZWRcbiAgICAgICAgVUktLT4+Q2xpZW50ZTogXCJQYWdvIHJlY2hhemFkb1wiXG4gICAgICAgIFVJLT4+VUk6IFJldHJ5IG9wdGlvblxuICAgICAgICBcbiAgICBlbHNlIEVycm9yIGRlIGdhdGV3YXlcbiAgICAgICAgR2F0ZXdheS0tPj5QYXltZW50OiBFcnJvclxuICAgICAgICBQYXltZW50LT4+REI6IExvZyBlcnJvclxuICAgICAgICBQYXltZW50LS0+PkFQSTogR2F0ZXdheSBlcnJvclxuICAgICAgICBBUEktLT4+VUk6IDUwMCBTZXJ2ZXIgRXJyb3JcbiAgICAgICAgVUktLT4+Q2xpZW50ZTogXCJFcnJvciBwcm9jZXNhbmRvIHBhZ29cIlxuICAgICAgICBVSS0+PlVJOiBDb250YWN0IHN1cHBvcnRcbiAgICBlbmQiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGVmYXVsdCJ9LCAiYXV0b1N5bmMiOiB0cnVlLCAidXBkYXRlRGlhZ3JhbSI6IHRydWV9
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    sequenceDiagram
                        actor Cliente
                        participant UI as Frontend
                        participant API as Backend API
                        participant Payment as Payment<br/>Service
                        participant Gateway as Payment<br/>Gateway
                        participant DB as Database
                        participant Order as Order<br/>Service
                        participant Notif as Notification<br/>Service
                    
                        Cliente->>UI: 1. Selecciona m√©todo pago
                        Cliente->>UI: 2. Ingresa datos tarjeta
                        
                        UI->>UI: 3. Valida formato tarjeta
                        UI->>API: 4. POST /api/pagos<br/>{pedido_id, metodo, datos}
                        
                        API->>Payment: 5. process_payment()
                        Payment->>DB: 6. Get pedido details
                        DB-->>Payment: 7. Pedido data
                        
                        Payment->>Gateway: 8. charge_card(amount, card_data)
                        Gateway->>Gateway: 9. Process transaction
                        
                        alt Pago aprobado
                            Gateway-->>Payment: 10. {status: approved, ref: XXX}
                            
                            Payment->>DB: 11. BEGIN TRANSACTION
                            Payment->>DB: 12. INSERT INTO pagos
                            Payment->>DB: 13. INSERT INTO transacciones
                            Payment->>DB: 14. COMMIT
                            
                            Payment->>Order: 15. confirm_payment(pedido_id)
                            Order->>DB: 16. UPDATE pedido SET estado='pendiente'
                            Order-->>Payment: 17. OK
                            
                            Payment->>Notif: 18. notify_payment_success()
                            Notif->>Notif: 19. Send confirmation email
                            Notif-->>Payment: 20. Sent
                            
                            Payment-->>API: 21. Payment successful
                            API-->>UI: 22. 200 OK {pago}
                            UI-->>Cliente: 23. "Pago exitoso"
                            UI->>UI: 24. Show confirmation
                            
                        else Pago rechazado
                            Gateway-->>Payment: {status: declined, reason}
                            
                            Payment->>DB: INSERT failed transaction
                            Payment-->>API: Payment declined
                            API-->>UI: 402 Payment Required
                            UI-->>Cliente: "Pago rechazado"
                            UI->>UI: Retry option
                            
                        else Error de gateway
                            Gateway-->>Payment: Error
                            Payment->>DB: Log error
                            Payment-->>API: Gateway error
                            API-->>UI: 500 Server Error
                            UI-->>Cliente: "Error procesando pago"
                            UI->>UI: Contact support
                        end

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    sequenceDiagram
                        participant Beat as Celery Beat<br/>(Scheduler)
                        participant Worker as Celery Worker
                        participant Stock as Stock<br/>Service
                        participant DB as Database
                        participant Notif as Notification<br/>Service
                    
                        Beat->>Beat: 1. Timer triggers<br/>(cada 1 hora)
                        Beat->>Worker: 2. Task: check_stock_levels
                        
                        Worker->>Stock: 3. monitor_all_products()
                        Stock->>DB: 4. SELECT productos, stock_config<br/>WHERE recarga_automatica_activa
                        DB-->>Stock: 5. Products list
                        
                        loop Por cada producto
                            Stock->>Stock: 6. config.necesita_recarga()?
                            
                            alt Stock <= stock_minimo
                                Stock->>DB: 7. BEGIN TRANSACTION
                                Stock->>DB: 8. UPDATE productos<br/>SET stock += cantidad_recarga
                                
                                Stock->>DB: 9. INSERT INTO historial_recarga<br/>(tipo='automatica')
                                
                                Stock->>DB: 10. UPDATE stock_config<br/>SET ultima_recarga, total_recargas
                                
                                Stock->>DB: 11. COMMIT
                                
                                Stock->>Notif: 12. notify_auto_recharge()
                                Notif->>Notif: 13. Email to proveedor
                                Notif-->>Stock: 14. Sent
                                
                                Stock-->>Worker: 15. Recarga ejecutada
                            else Stock > stock_minimo
                                Stock-->>Worker: No action needed
                            end
                        end
                        
                        Worker-->>Beat: 16. Task completed

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIHBhcnRpY2lwYW50IEJlYXQgYXMgQ2VsZXJ5IEJlYXQ8YnIvPihTY2hlZHVsZXIpXG4gICAgcGFydGljaXBhbnQgV29ya2VyIGFzIENlbGVyeSBXb3JrZXJcbiAgICBwYXJ0aWNpcGFudCBTdG9jayBhcyBTdG9jazxici8+U2VydmljZVxuICAgIHBhcnRpY2lwYW50IERCIGFzIERhdGFiYXNlXG4gICAgcGFydGljaXBhbnQgTm90aWYgYXMgTm90aWZpY2F0aW9uPGJyLz5TZXJ2aWNlXG5cbiAgICBCZWF0LT4+QmVhdDogMS4gVGltZXIgdHJpZ2dlcnM8YnIvPihjYWRhIDEgaG9yYSlcbiAgICBCZWF0LT4+V29ya2VyOiAyLiBUYXNrOiBjaGVja19zdG9ja19sZXZlbHNcbiAgICBcbiAgICBXb3JrZXItPj5TdG9jazogMy4gbW9uaXRvcl9hbGxfcHJvZHVjdHMoKVxuICAgIFN0b2NrLT4+REI6IDQuIFNFTEVDVCBwcm9kdWN0b3MsIHN0b2NrX2NvbmZpZzxici8+V0hFUkUgcmVjYXJnYV9hdXRvbWF0aWNhX2FjdGl2YVxuICAgIERCLS0+PlN0b2NrOiA1LiBQcm9kdWN0cyBsaXN0XG4gICAgXG4gICAgbG9vcCBQb3IgY2FkYSBwcm9kdWN0b1xuICAgICAgICBTdG9jay0+PlN0b2NrOiA2LiBjb25maWcubmVjZXNpdGFfcmVjYXJnYSgpP1xuICAgICAgICBcbiAgICAgICAgYWx0IFN0b2NrIDw9IHN0b2NrX21pbmltb1xuICAgICAgICAgICAgU3RvY2stPj5EQjogNy4gQkVHSU4gVFJBTlNBQ1RJT05cbiAgICAgICAgICAgIFN0b2NrLT4+REI6IDguIFVQREFURSBwcm9kdWN0b3M8YnIvPlNFVCBzdG9jayArPSBjYW50aWRhZF9yZWNhcmdhXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFN0b2NrLT4+REI6IDkuIElOU0VSVCBJTlRPIGhpc3RvcmlhbF9yZWNhcmdhPGJyLz4odGlwbz0nYXV0b21hdGljYScpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFN0b2NrLT4+REI6IDEwLiBVUERBVEUgc3RvY2tfY29uZmlnPGJyLz5TRVQgdWx0aW1hX3JlY2FyZ2EsIHRvdGFsX3JlY2FyZ2FzXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFN0b2NrLT4+REI6IDExLiBDT01NSVRcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgU3RvY2stPj5Ob3RpZjogMTIuIG5vdGlmeV9hdXRvX3JlY2hhcmdlKClcbiAgICAgICAgICAgIE5vdGlmLT4+Tm90aWY6IDEzLiBFbWFpbCB0byBwcm92ZWVkb3JcbiAgICAgICAgICAgIE5vdGlmLS0+PlN0b2NrOiAxNC4gU2VudFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBTdG9jay0tPj5Xb3JrZXI6IDE1LiBSZWNhcmdhIGVqZWN1dGFkYVxuICAgICAgICBlbHNlIFN0b2NrID4gc3RvY2tfbWluaW1vXG4gICAgICAgICAgICBTdG9jay0tPj5Xb3JrZXI6IE5vIGFjdGlvbiBuZWVkZWRcbiAgICAgICAgZW5kXG4gICAgZW5kXG4gICAgXG4gICAgV29ya2VyLS0+PkJlYXQ6IDE2LiBUYXNrIGNvbXBsZXRlZCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIHBhcnRpY2lwYW50IEJlYXQgYXMgQ2VsZXJ5IEJlYXQ8YnIvPihTY2hlZHVsZXIpXG4gICAgcGFydGljaXBhbnQgV29ya2VyIGFzIENlbGVyeSBXb3JrZXJcbiAgICBwYXJ0aWNpcGFudCBTdG9jayBhcyBTdG9jazxici8+U2VydmljZVxuICAgIHBhcnRpY2lwYW50IERCIGFzIERhdGFiYXNlXG4gICAgcGFydGljaXBhbnQgTm90aWYgYXMgTm90aWZpY2F0aW9uPGJyLz5TZXJ2aWNlXG5cbiAgICBCZWF0LT4+QmVhdDogMS4gVGltZXIgdHJpZ2dlcnM8YnIvPihjYWRhIDEgaG9yYSlcbiAgICBCZWF0LT4+V29ya2VyOiAyLiBUYXNrOiBjaGVja19zdG9ja19sZXZlbHNcbiAgICBcbiAgICBXb3JrZXItPj5TdG9jazogMy4gbW9uaXRvcl9hbGxfcHJvZHVjdHMoKVxuICAgIFN0b2NrLT4+REI6IDQuIFNFTEVDVCBwcm9kdWN0b3MsIHN0b2NrX2NvbmZpZzxici8+V0hFUkUgcmVjYXJnYV9hdXRvbWF0aWNhX2FjdGl2YVxuICAgIERCLS0+PlN0b2NrOiA1LiBQcm9kdWN0cyBsaXN0XG4gICAgXG4gICAgbG9vcCBQb3IgY2FkYSBwcm9kdWN0b1xuICAgICAgICBTdG9jay0+PlN0b2NrOiA2LiBjb25maWcubmVjZXNpdGFfcmVjYXJnYSgpP1xuICAgICAgICBcbiAgICAgICAgYWx0IFN0b2NrIDw9IHN0b2NrX21pbmltb1xuICAgICAgICAgICAgU3RvY2stPj5EQjogNy4gQkVHSU4gVFJBTlNBQ1RJT05cbiAgICAgICAgICAgIFN0b2NrLT4+REI6IDguIFVQREFURSBwcm9kdWN0b3M8YnIvPlNFVCBzdG9jayArPSBjYW50aWRhZF9yZWNhcmdhXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFN0b2NrLT4+REI6IDkuIElOU0VSVCBJTlRPIGhpc3RvcmlhbF9yZWNhcmdhPGJyLz4odGlwbz0nYXV0b21hdGljYScpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFN0b2NrLT4+REI6IDEwLiBVUERBVEUgc3RvY2tfY29uZmlnPGJyLz5TRVQgdWx0aW1hX3JlY2FyZ2EsIHRvdGFsX3JlY2FyZ2FzXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFN0b2NrLT4+REI6IDExLiBDT01NSVRcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgU3RvY2stPj5Ob3RpZjogMTIuIG5vdGlmeV9hdXRvX3JlY2hhcmdlKClcbiAgICAgICAgICAgIE5vdGlmLT4+Tm90aWY6IDEzLiBFbWFpbCB0byBwcm92ZWVkb3JcbiAgICAgICAgICAgIE5vdGlmLS0+PlN0b2NrOiAxNC4gU2VudFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBTdG9jay0tPj5Xb3JrZXI6IDE1LiBSZWNhcmdhIGVqZWN1dGFkYVxuICAgICAgICBlbHNlIFN0b2NrID4gc3RvY2tfbWluaW1vXG4gICAgICAgICAgICBTdG9jay0tPj5Xb3JrZXI6IE5vIGFjdGlvbiBuZWVkZWRcbiAgICAgICAgZW5kXG4gICAgZW5kXG4gICAgXG4gICAgV29ya2VyLS0+PkJlYXQ6IDE2LiBUYXNrIGNvbXBsZXRlZCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    sequenceDiagram
                        participant Beat as Celery Beat<br/>(Scheduler)
                        participant Worker as Celery Worker
                        participant Stock as Stock<br/>Service
                        participant DB as Database
                        participant Notif as Notification<br/>Service
                    
                        Beat->>Beat: 1. Timer triggers<br/>(cada 1 hora)
                        Beat->>Worker: 2. Task: check_stock_levels
                        
                        Worker->>Stock: 3. monitor_all_products()
                        Stock->>DB: 4. SELECT productos, stock_config<br/>WHERE recarga_automatica_activa
                        DB-->>Stock: 5. Products list
                        
                        loop Por cada producto
                            Stock->>Stock: 6. config.necesita_recarga()?
                            
                            alt Stock <= stock_minimo
                                Stock->>DB: 7. BEGIN TRANSACTION
                                Stock->>DB: 8. UPDATE productos<br/>SET stock += cantidad_recarga
                                
                                Stock->>DB: 9. INSERT INTO historial_recarga<br/>(tipo='automatica')
                                
                                Stock->>DB: 10. UPDATE stock_config<br/>SET ultima_recarga, total_recargas
                                
                                Stock->>DB: 11. COMMIT
                                
                                Stock->>Notif: 12. notify_auto_recharge()
                                Notif->>Notif: 13. Email to proveedor
                                Notif-->>Stock: 14. Sent
                                
                                Stock-->>Worker: 15. Recarga ejecutada
                            else Stock > stock_minimo
                                Stock-->>Worker: No action needed
                            end
                        end
                        
                        Worker-->>Beat: 16. Task completed

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    sequenceDiagram
                        actor Proveedor
                        participant UI as Frontend
                        participant API as Backend API
                        participant Stock as Stock<br/>Service
                        participant DB as Database
                        participant Notif as Notification<br/>Service
                    
                        Proveedor->>UI: 1. Navega a "Mis Productos"
                        UI->>API: 2. GET /api/productos/mis-productos
                        API-->>UI: 3. Lista de productos
                        
                        Proveedor->>UI: 4. Selecciona producto
                        Proveedor->>UI: 5. Click "Recargar Stock"
                        Proveedor->>UI: 6. Ingresa cantidad
                        
                        UI->>API: 7. POST /api/productos/{id}/recargar<br/>{cantidad, notas}
                        
                        API->>Stock: 8. manual_recharge(producto, cantidad)
                        Stock->>DB: 9. SELECT producto
                        DB-->>Stock: 10. Producto data
                        
                        Stock->>DB: 11. BEGIN TRANSACTION
                        
                        Stock->>Stock: 12. stock_anterior = producto.stock
                        Stock->>DB: 13. UPDATE productos<br/>SET stock += cantidad
                        
                        Stock->>DB: 14. INSERT INTO historial_recarga<br/>(tipo='manual', usuario=proveedor)
                        
                        Stock->>DB: 15. COMMIT
                        
                        Stock->>Notif: 16. notify_manual_recharge()
                        Notif->>Notif: 17. Email to admin
                        Notif-->>Stock: 18. Sent
                        
                        Stock-->>API: 19. Recarga exitosa
                        API-->>UI: 20. 200 OK {producto}
                        UI-->>Proveedor: 21. "Stock actualizado"
                        UI->>UI: 22. Refresh product list

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIGFjdG9yIFByb3ZlZWRvclxuICAgIHBhcnRpY2lwYW50IFVJIGFzIEZyb250ZW5kXG4gICAgcGFydGljaXBhbnQgQVBJIGFzIEJhY2tlbmQgQVBJXG4gICAgcGFydGljaXBhbnQgU3RvY2sgYXMgU3RvY2s8YnIvPlNlcnZpY2VcbiAgICBwYXJ0aWNpcGFudCBEQiBhcyBEYXRhYmFzZVxuICAgIHBhcnRpY2lwYW50IE5vdGlmIGFzIE5vdGlmaWNhdGlvbjxici8+U2VydmljZVxuXG4gICAgUHJvdmVlZG9yLT4+VUk6IDEuIE5hdmVnYSBhIFwiTWlzIFByb2R1Y3Rvc1wiXG4gICAgVUktPj5BUEk6IDIuIEdFVCAvYXBpL3Byb2R1Y3Rvcy9taXMtcHJvZHVjdG9zXG4gICAgQVBJLS0+PlVJOiAzLiBMaXN0YSBkZSBwcm9kdWN0b3NcbiAgICBcbiAgICBQcm92ZWVkb3ItPj5VSTogNC4gU2VsZWNjaW9uYSBwcm9kdWN0b1xuICAgIFByb3ZlZWRvci0+PlVJOiA1LiBDbGljayBcIlJlY2FyZ2FyIFN0b2NrXCJcbiAgICBQcm92ZWVkb3ItPj5VSTogNi4gSW5ncmVzYSBjYW50aWRhZFxuICAgIFxuICAgIFVJLT4+QVBJOiA3LiBQT1NUIC9hcGkvcHJvZHVjdG9zL3tpZH0vcmVjYXJnYXI8YnIvPntjYW50aWRhZCwgbm90YXN9XG4gICAgXG4gICAgQVBJLT4+U3RvY2s6IDguIG1hbnVhbF9yZWNoYXJnZShwcm9kdWN0bywgY2FudGlkYWQpXG4gICAgU3RvY2stPj5EQjogOS4gU0VMRUNUIHByb2R1Y3RvXG4gICAgREItLT4+U3RvY2s6IDEwLiBQcm9kdWN0byBkYXRhXG4gICAgXG4gICAgU3RvY2stPj5EQjogMTEuIEJFR0lOIFRSQU5TQUNUSU9OXG4gICAgXG4gICAgU3RvY2stPj5TdG9jazogMTIuIHN0b2NrX2FudGVyaW9yID0gcHJvZHVjdG8uc3RvY2tcbiAgICBTdG9jay0+PkRCOiAxMy4gVVBEQVRFIHByb2R1Y3Rvczxici8+U0VUIHN0b2NrICs9IGNhbnRpZGFkXG4gICAgXG4gICAgU3RvY2stPj5EQjogMTQuIElOU0VSVCBJTlRPIGhpc3RvcmlhbF9yZWNhcmdhPGJyLz4odGlwbz0nbWFudWFsJywgdXN1YXJpbz1wcm92ZWVkb3IpXG4gICAgXG4gICAgU3RvY2stPj5EQjogMTUuIENPTU1JVFxuICAgIFxuICAgIFN0b2NrLT4+Tm90aWY6IDE2LiBub3RpZnlfbWFudWFsX3JlY2hhcmdlKClcbiAgICBOb3RpZi0+Pk5vdGlmOiAxNy4gRW1haWwgdG8gYWRtaW5cbiAgICBOb3RpZi0tPj5TdG9jazogMTguIFNlbnRcbiAgICBcbiAgICBTdG9jay0tPj5BUEk6IDE5LiBSZWNhcmdhIGV4aXRvc2FcbiAgICBBUEktLT4+VUk6IDIwLiAyMDAgT0sge3Byb2R1Y3RvfVxuICAgIFVJLS0+PlByb3ZlZWRvcjogMjEuIFwiU3RvY2sgYWN0dWFsaXphZG9cIlxuICAgIFVJLT4+VUk6IDIyLiBSZWZyZXNoIHByb2R1Y3QgbGlzdCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIGFjdG9yIFByb3ZlZWRvclxuICAgIHBhcnRpY2lwYW50IFVJIGFzIEZyb250ZW5kXG4gICAgcGFydGljaXBhbnQgQVBJIGFzIEJhY2tlbmQgQVBJXG4gICAgcGFydGljaXBhbnQgU3RvY2sgYXMgU3RvY2s8YnIvPlNlcnZpY2VcbiAgICBwYXJ0aWNpcGFudCBEQiBhcyBEYXRhYmFzZVxuICAgIHBhcnRpY2lwYW50IE5vdGlmIGFzIE5vdGlmaWNhdGlvbjxici8+U2VydmljZVxuXG4gICAgUHJvdmVlZG9yLT4+VUk6IDEuIE5hdmVnYSBhIFwiTWlzIFByb2R1Y3Rvc1wiXG4gICAgVUktPj5BUEk6IDIuIEdFVCAvYXBpL3Byb2R1Y3Rvcy9taXMtcHJvZHVjdG9zXG4gICAgQVBJLS0+PlVJOiAzLiBMaXN0YSBkZSBwcm9kdWN0b3NcbiAgICBcbiAgICBQcm92ZWVkb3ItPj5VSTogNC4gU2VsZWNjaW9uYSBwcm9kdWN0b1xuICAgIFByb3ZlZWRvci0+PlVJOiA1LiBDbGljayBcIlJlY2FyZ2FyIFN0b2NrXCJcbiAgICBQcm92ZWVkb3ItPj5VSTogNi4gSW5ncmVzYSBjYW50aWRhZFxuICAgIFxuICAgIFVJLT4+QVBJOiA3LiBQT1NUIC9hcGkvcHJvZHVjdG9zL3tpZH0vcmVjYXJnYXI8YnIvPntjYW50aWRhZCwgbm90YXN9XG4gICAgXG4gICAgQVBJLT4+U3RvY2s6IDguIG1hbnVhbF9yZWNoYXJnZShwcm9kdWN0bywgY2FudGlkYWQpXG4gICAgU3RvY2stPj5EQjogOS4gU0VMRUNUIHByb2R1Y3RvXG4gICAgREItLT4+U3RvY2s6IDEwLiBQcm9kdWN0byBkYXRhXG4gICAgXG4gICAgU3RvY2stPj5EQjogMTEuIEJFR0lOIFRSQU5TQUNUSU9OXG4gICAgXG4gICAgU3RvY2stPj5TdG9jazogMTIuIHN0b2NrX2FudGVyaW9yID0gcHJvZHVjdG8uc3RvY2tcbiAgICBTdG9jay0+PkRCOiAxMy4gVVBEQVRFIHByb2R1Y3Rvczxici8+U0VUIHN0b2NrICs9IGNhbnRpZGFkXG4gICAgXG4gICAgU3RvY2stPj5EQjogMTQuIElOU0VSVCBJTlRPIGhpc3RvcmlhbF9yZWNhcmdhPGJyLz4odGlwbz0nbWFudWFsJywgdXN1YXJpbz1wcm92ZWVkb3IpXG4gICAgXG4gICAgU3RvY2stPj5EQjogMTUuIENPTU1JVFxuICAgIFxuICAgIFN0b2NrLT4+Tm90aWY6IDE2LiBub3RpZnlfbWFudWFsX3JlY2hhcmdlKClcbiAgICBOb3RpZi0+Pk5vdGlmOiAxNy4gRW1haWwgdG8gYWRtaW5cbiAgICBOb3RpZi0tPj5TdG9jazogMTguIFNlbnRcbiAgICBcbiAgICBTdG9jay0tPj5BUEk6IDE5LiBSZWNhcmdhIGV4aXRvc2FcbiAgICBBUEktLT4+VUk6IDIwLiAyMDAgT0sge3Byb2R1Y3RvfVxuICAgIFVJLS0+PlByb3ZlZWRvcjogMjEuIFwiU3RvY2sgYWN0dWFsaXphZG9cIlxuICAgIFVJLT4+VUk6IDIyLiBSZWZyZXNoIHByb2R1Y3QgbGlzdCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    sequenceDiagram
                        actor Proveedor
                        participant UI as Frontend
                        participant API as Backend API
                        participant Stock as Stock<br/>Service
                        participant DB as Database
                        participant Notif as Notification<br/>Service
                    
                        Proveedor->>UI: 1. Navega a "Mis Productos"
                        UI->>API: 2. GET /api/productos/mis-productos
                        API-->>UI: 3. Lista de productos
                        
                        Proveedor->>UI: 4. Selecciona producto
                        Proveedor->>UI: 5. Click "Recargar Stock"
                        Proveedor->>UI: 6. Ingresa cantidad
                        
                        UI->>API: 7. POST /api/productos/{id}/recargar<br/>{cantidad, notas}
                        
                        API->>Stock: 8. manual_recharge(producto, cantidad)
                        Stock->>DB: 9. SELECT producto
                        DB-->>Stock: 10. Producto data
                        
                        Stock->>DB: 11. BEGIN TRANSACTION
                        
                        Stock->>Stock: 12. stock_anterior = producto.stock
                        Stock->>DB: 13. UPDATE productos<br/>SET stock += cantidad
                        
                        Stock->>DB: 14. INSERT INTO historial_recarga<br/>(tipo='manual', usuario=proveedor)
                        
                        Stock->>DB: 15. COMMIT
                        
                        Stock->>Notif: 16. notify_manual_recharge()
                        Notif->>Notif: 17. Email to admin
                        Notif-->>Stock: 18. Sent
                        
                        Stock-->>API: 19. Recarga exitosa
                        API-->>UI: 20. 200 OK {producto}
                        UI-->>Proveedor: 21. "Stock actualizado"
                        UI->>UI: 22. Refresh product list

    .. card::
        :class-card: sd-mb-4 sd-shadow-sm

        .. tab-set::

            .. tab-item:: üëÅÔ∏è Visualizaci√≥n
                :sync: view

                .. mermaid::

                    sequenceDiagram
                        participant Trigger as Event<br/>Trigger
                        participant Notif as Notification<br/>Service
                        participant DB as Database
                        participant Queue as Celery<br/>Queue
                        participant Worker as Celery<br/>Worker
                        participant Email as Email<br/>Service
                        participant SMS as SMS<br/>Service
                    
                        Trigger->>Notif: 1. Event occurred<br/>(e.g., pedido creado)
                        
                        Notif->>Notif: 2. Determine recipients<br/>& notification type
                        
                        loop Por cada destinatario
                            Notif->>DB: 3. INSERT INTO notificaciones<br/>(estado='pendiente')
                            DB-->>Notif: 4. Notificacion ID
                            
                            Notif->>Queue: 5. Enqueue send task
                        end
                        
                        Notif-->>Trigger: 6. Notifications queued
                        
                        Queue->>Worker: 7. Dequeue task
                        Worker->>DB: 8. Get notification details
                        DB-->>Worker: 9. Notification data
                        
                        alt Channel = Email
                            Worker->>Email: 10. send_email()
                            Email->>Email: 11. Connect to SMTP
                            Email->>Email: 12. Send message
                            
                            alt Email sent
                                Email-->>Worker: 13. Success
                                Worker->>DB: 14. UPDATE notificaciones<br/>SET estado='enviada'
                            else Send failed
                                Email-->>Worker: Error
                                Worker->>DB: UPDATE estado='fallida'
                                Worker->>Queue: Retry task (max 3)
                            end
                            
                        else Channel = SMS
                            Worker->>SMS: send_sms()
                            SMS-->>Worker: Result
                            Worker->>DB: UPDATE notification
                        end
                        
                        Worker->>DB: 15. Set fecha_envio
                        Worker-->>Queue: 16. Task completed

                .. div:: diagram-controls

                    .. button-link:: https://mermaid.live/view#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIHBhcnRpY2lwYW50IFRyaWdnZXIgYXMgRXZlbnQ8YnIvPlRyaWdnZXJcbiAgICBwYXJ0aWNpcGFudCBOb3RpZiBhcyBOb3RpZmljYXRpb248YnIvPlNlcnZpY2VcbiAgICBwYXJ0aWNpcGFudCBEQiBhcyBEYXRhYmFzZVxuICAgIHBhcnRpY2lwYW50IFF1ZXVlIGFzIENlbGVyeTxici8+UXVldWVcbiAgICBwYXJ0aWNpcGFudCBXb3JrZXIgYXMgQ2VsZXJ5PGJyLz5Xb3JrZXJcbiAgICBwYXJ0aWNpcGFudCBFbWFpbCBhcyBFbWFpbDxici8+U2VydmljZVxuICAgIHBhcnRpY2lwYW50IFNNUyBhcyBTTVM8YnIvPlNlcnZpY2VcblxuICAgIFRyaWdnZXItPj5Ob3RpZjogMS4gRXZlbnQgb2NjdXJyZWQ8YnIvPihlLmcuLCBwZWRpZG8gY3JlYWRvKVxuICAgIFxuICAgIE5vdGlmLT4+Tm90aWY6IDIuIERldGVybWluZSByZWNpcGllbnRzPGJyLz4mIG5vdGlmaWNhdGlvbiB0eXBlXG4gICAgXG4gICAgbG9vcCBQb3IgY2FkYSBkZXN0aW5hdGFyaW9cbiAgICAgICAgTm90aWYtPj5EQjogMy4gSU5TRVJUIElOVE8gbm90aWZpY2FjaW9uZXM8YnIvPihlc3RhZG89J3BlbmRpZW50ZScpXG4gICAgICAgIERCLS0+Pk5vdGlmOiA0LiBOb3RpZmljYWNpb24gSURcbiAgICAgICAgXG4gICAgICAgIE5vdGlmLT4+UXVldWU6IDUuIEVucXVldWUgc2VuZCB0YXNrXG4gICAgZW5kXG4gICAgXG4gICAgTm90aWYtLT4+VHJpZ2dlcjogNi4gTm90aWZpY2F0aW9ucyBxdWV1ZWRcbiAgICBcbiAgICBRdWV1ZS0+PldvcmtlcjogNy4gRGVxdWV1ZSB0YXNrXG4gICAgV29ya2VyLT4+REI6IDguIEdldCBub3RpZmljYXRpb24gZGV0YWlsc1xuICAgIERCLS0+PldvcmtlcjogOS4gTm90aWZpY2F0aW9uIGRhdGFcbiAgICBcbiAgICBhbHQgQ2hhbm5lbCA9IEVtYWlsXG4gICAgICAgIFdvcmtlci0+PkVtYWlsOiAxMC4gc2VuZF9lbWFpbCgpXG4gICAgICAgIEVtYWlsLT4+RW1haWw6IDExLiBDb25uZWN0IHRvIFNNVFBcbiAgICAgICAgRW1haWwtPj5FbWFpbDogMTIuIFNlbmQgbWVzc2FnZVxuICAgICAgICBcbiAgICAgICAgYWx0IEVtYWlsIHNlbnRcbiAgICAgICAgICAgIEVtYWlsLS0+PldvcmtlcjogMTMuIFN1Y2Nlc3NcbiAgICAgICAgICAgIFdvcmtlci0+PkRCOiAxNC4gVVBEQVRFIG5vdGlmaWNhY2lvbmVzPGJyLz5TRVQgZXN0YWRvPSdlbnZpYWRhJ1xuICAgICAgICBlbHNlIFNlbmQgZmFpbGVkXG4gICAgICAgICAgICBFbWFpbC0tPj5Xb3JrZXI6IEVycm9yXG4gICAgICAgICAgICBXb3JrZXItPj5EQjogVVBEQVRFIGVzdGFkbz0nZmFsbGlkYSdcbiAgICAgICAgICAgIFdvcmtlci0+PlF1ZXVlOiBSZXRyeSB0YXNrIChtYXggMylcbiAgICAgICAgZW5kXG4gICAgICAgIFxuICAgIGVsc2UgQ2hhbm5lbCA9IFNNU1xuICAgICAgICBXb3JrZXItPj5TTVM6IHNlbmRfc21zKClcbiAgICAgICAgU01TLS0+PldvcmtlcjogUmVzdWx0XG4gICAgICAgIFdvcmtlci0+PkRCOiBVUERBVEUgbm90aWZpY2F0aW9uXG4gICAgZW5kXG4gICAgXG4gICAgV29ya2VyLT4+REI6IDE1LiBTZXQgZmVjaGFfZW52aW9cbiAgICBXb3JrZXItLT4+UXVldWU6IDE2LiBUYXNrIGNvbXBsZXRlZCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: info
                        :icon: octicon:search
                        :outline:

                        üîç Zoom / Pantalla Completa

                    .. button-link:: https://mermaid.live/edit#base64:eyJjb2RlIjogInNlcXVlbmNlRGlhZ3JhbVxuICAgIHBhcnRpY2lwYW50IFRyaWdnZXIgYXMgRXZlbnQ8YnIvPlRyaWdnZXJcbiAgICBwYXJ0aWNpcGFudCBOb3RpZiBhcyBOb3RpZmljYXRpb248YnIvPlNlcnZpY2VcbiAgICBwYXJ0aWNpcGFudCBEQiBhcyBEYXRhYmFzZVxuICAgIHBhcnRpY2lwYW50IFF1ZXVlIGFzIENlbGVyeTxici8+UXVldWVcbiAgICBwYXJ0aWNpcGFudCBXb3JrZXIgYXMgQ2VsZXJ5PGJyLz5Xb3JrZXJcbiAgICBwYXJ0aWNpcGFudCBFbWFpbCBhcyBFbWFpbDxici8+U2VydmljZVxuICAgIHBhcnRpY2lwYW50IFNNUyBhcyBTTVM8YnIvPlNlcnZpY2VcblxuICAgIFRyaWdnZXItPj5Ob3RpZjogMS4gRXZlbnQgb2NjdXJyZWQ8YnIvPihlLmcuLCBwZWRpZG8gY3JlYWRvKVxuICAgIFxuICAgIE5vdGlmLT4+Tm90aWY6IDIuIERldGVybWluZSByZWNpcGllbnRzPGJyLz4mIG5vdGlmaWNhdGlvbiB0eXBlXG4gICAgXG4gICAgbG9vcCBQb3IgY2FkYSBkZXN0aW5hdGFyaW9cbiAgICAgICAgTm90aWYtPj5EQjogMy4gSU5TRVJUIElOVE8gbm90aWZpY2FjaW9uZXM8YnIvPihlc3RhZG89J3BlbmRpZW50ZScpXG4gICAgICAgIERCLS0+Pk5vdGlmOiA0LiBOb3RpZmljYWNpb24gSURcbiAgICAgICAgXG4gICAgICAgIE5vdGlmLT4+UXVldWU6IDUuIEVucXVldWUgc2VuZCB0YXNrXG4gICAgZW5kXG4gICAgXG4gICAgTm90aWYtLT4+VHJpZ2dlcjogNi4gTm90aWZpY2F0aW9ucyBxdWV1ZWRcbiAgICBcbiAgICBRdWV1ZS0+PldvcmtlcjogNy4gRGVxdWV1ZSB0YXNrXG4gICAgV29ya2VyLT4+REI6IDguIEdldCBub3RpZmljYXRpb24gZGV0YWlsc1xuICAgIERCLS0+PldvcmtlcjogOS4gTm90aWZpY2F0aW9uIGRhdGFcbiAgICBcbiAgICBhbHQgQ2hhbm5lbCA9IEVtYWlsXG4gICAgICAgIFdvcmtlci0+PkVtYWlsOiAxMC4gc2VuZF9lbWFpbCgpXG4gICAgICAgIEVtYWlsLT4+RW1haWw6IDExLiBDb25uZWN0IHRvIFNNVFBcbiAgICAgICAgRW1haWwtPj5FbWFpbDogMTIuIFNlbmQgbWVzc2FnZVxuICAgICAgICBcbiAgICAgICAgYWx0IEVtYWlsIHNlbnRcbiAgICAgICAgICAgIEVtYWlsLS0+PldvcmtlcjogMTMuIFN1Y2Nlc3NcbiAgICAgICAgICAgIFdvcmtlci0+PkRCOiAxNC4gVVBEQVRFIG5vdGlmaWNhY2lvbmVzPGJyLz5TRVQgZXN0YWRvPSdlbnZpYWRhJ1xuICAgICAgICBlbHNlIFNlbmQgZmFpbGVkXG4gICAgICAgICAgICBFbWFpbC0tPj5Xb3JrZXI6IEVycm9yXG4gICAgICAgICAgICBXb3JrZXItPj5EQjogVVBEQVRFIGVzdGFkbz0nZmFsbGlkYSdcbiAgICAgICAgICAgIFdvcmtlci0+PlF1ZXVlOiBSZXRyeSB0YXNrIChtYXggMylcbiAgICAgICAgZW5kXG4gICAgICAgIFxuICAgIGVsc2UgQ2hhbm5lbCA9IFNNU1xuICAgICAgICBXb3JrZXItPj5TTVM6IHNlbmRfc21zKClcbiAgICAgICAgU01TLS0+PldvcmtlcjogUmVzdWx0XG4gICAgICAgIFdvcmtlci0+PkRCOiBVUERBVEUgbm90aWZpY2F0aW9uXG4gICAgZW5kXG4gICAgXG4gICAgV29ya2VyLT4+REI6IDE1LiBTZXQgZmVjaGFfZW52aW9cbiAgICBXb3JrZXItLT4+UXVldWU6IDE2LiBUYXNrIGNvbXBsZXRlZCIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In0sICJhdXRvU3luYyI6IHRydWUsICJ1cGRhdGVEaWFncmFtIjogdHJ1ZX0=
                        :color: secondary
                        :icon: octicon:pencil
                        :outline:

                        ‚úèÔ∏è Editar en Vivo

            .. tab-item:: üìù C√≥digo Fuente
                :sync: code

                .. code-block:: mermaid

                    sequenceDiagram
                        participant Trigger as Event<br/>Trigger
                        participant Notif as Notification<br/>Service
                        participant DB as Database
                        participant Queue as Celery<br/>Queue
                        participant Worker as Celery<br/>Worker
                        participant Email as Email<br/>Service
                        participant SMS as SMS<br/>Service
                    
                        Trigger->>Notif: 1. Event occurred<br/>(e.g., pedido creado)
                        
                        Notif->>Notif: 2. Determine recipients<br/>& notification type
                        
                        loop Por cada destinatario
                            Notif->>DB: 3. INSERT INTO notificaciones<br/>(estado='pendiente')
                            DB-->>Notif: 4. Notificacion ID
                            
                            Notif->>Queue: 5. Enqueue send task
                        end
                        
                        Notif-->>Trigger: 6. Notifications queued
                        
                        Queue->>Worker: 7. Dequeue task
                        Worker->>DB: 8. Get notification details
                        DB-->>Worker: 9. Notification data
                        
                        alt Channel = Email
                            Worker->>Email: 10. send_email()
                            Email->>Email: 11. Connect to SMTP
                            Email->>Email: 12. Send message
                            
                            alt Email sent
                                Email-->>Worker: 13. Success
                                Worker->>DB: 14. UPDATE notificaciones<br/>SET estado='enviada'
                            else Send failed
                                Email-->>Worker: Error
                                Worker->>DB: UPDATE estado='fallida'
                                Worker->>Queue: Retry task (max 3)
                            end
                            
                        else Channel = SMS
                            Worker->>SMS: send_sms()
                            SMS-->>Worker: Result
                            Worker->>DB: UPDATE notification
                        end
                        
                        Worker->>DB: 15. Set fecha_envio
                        Worker-->>Queue: 16. Task completed

